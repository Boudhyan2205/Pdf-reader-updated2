//
// Copyright 2020 FoxyUtils ehf. All rights reserved.
//
// This is a commercial product and requires a license to operate.
// A trial license can be obtained at https://unidoc.io
//
// DO NOT EDIT: generated by unitwist Go source code obfuscator.
//
// Use of this source code is governed by the UniDoc End User License Agreement
// terms that can be accessed at https://unidoc.io/eula/

package render ;import (_b "errors";_gb "fmt";_bf "github.com/adrg/sysfont";_fc "github.com/unidoc/unipdf/v3/common";_ba "github.com/unidoc/unipdf/v3/contentstream";_bc "github.com/unidoc/unipdf/v3/core";_cd "github.com/unidoc/unipdf/v3/internal/transform";_d "github.com/unidoc/unipdf/v3/model";_bcf "github.com/unidoc/unipdf/v3/render/internal/context";_ae "github.com/unidoc/unipdf/v3/render/internal/context/imagerender";_e "image";_ac "image/draw";_acf "image/jpeg";_c "image/png";_af "os";_a "path/filepath";_g "strings";);type renderer struct{};

// ImageDevice is used to render PDF pages to image targets.
type ImageDevice struct{renderer };func _bfe (_gc string ,_eg _e .Image )error {_fcb ,_de :=_af .Create (_gc );if _de !=nil {return _de ;};defer _fcb .Close ();return _c .Encode (_fcb ,_eg );};

// NewImageDevice returns a new image device.
func NewImageDevice ()*ImageDevice {return &ImageDevice {}};

// RenderToPath converts the specified PDF page into an image and saves the
// result at the specified location.
func (_ce *ImageDevice )RenderToPath (page *_d .PdfPage ,outputPath string )error {_ec ,_ca :=_ce .Render (page );if _ca !=nil {return _ca ;};_gdb :=_g .ToLower (_a .Ext (outputPath ));if _gdb ==""{return _b .New ("\u0063\u006ful\u0064\u0020\u006eo\u0074\u0020\u0072\u0065cog\u006eiz\u0065\u0020\u006f\u0075\u0074\u0070\u0075t \u0066\u0069\u006c\u0065\u0020\u0074\u0079p\u0065");};switch _gdb {case "\u002e\u0070\u006e\u0067":return _bfe (outputPath ,_ec );case "\u002e\u006a\u0070\u0067","\u002e\u006a\u0070e\u0067":return _gdd (outputPath ,_ec ,100);};return _gb .Errorf ("\u0075\u006e\u0072\u0065\u0063\u006fg\u006e\u0069\u007a\u0065\u0064\u0020\u006f\u0075\u0074\u0070\u0075\u0074\u0020f\u0069\u006c\u0065\u0020\u0074\u0079\u0070e\u003a\u0020\u0025\u0073",_gdb );};

// Render converts the specified PDF page into an image and returns the result.
func (_gbe *ImageDevice )Render (page *_d .PdfPage )(_e .Image ,error ){_be ,_dg :=page .GetMediaBox ();if _dg !=nil {return nil ,_dg ;};_aec ,_beb :=_be .Llx +_be .Width (),_be .Lly +_be .Height ();_gd :=_ae .NewContext (int (_aec ),int (_beb ));if _ge :=_gbe .renderPage (_gd ,page );_ge !=nil {return nil ,_ge ;};_db :=_gd .Image ();if _geb :=page .CropBox ;_geb !=nil {_bb :=_e .Rect (0,0,int (_geb .Width ()),int (_geb .Height ()));_dc :=_e .Pt (int (_geb .Llx ),int (_beb -_geb .Ury ));_ad :=_e .NewRGBA (_bb );_ac .Draw (_ad ,_bb ,_db ,_dc ,_ac .Src );_db =_ad ;};return _db ,nil ;};func (_afe renderer )renderContentStream (_gdc _bcf .Context ,_ed string ,_dd *_d .PdfPageResources )error {_gg ,_fa :=_ba .NewContentStreamParser (_ed ).Parse ();if _fa !=nil {return _fa ;};_egc :=_gdc .TextState ();_ee :=map[string ]*_bcf .TextFont {};_bcee :=_bf .NewFinder (&_bf .FinderOpts {Extensions :[]string {"\u002e\u0074\u0074\u0066","\u002e\u0074\u0074\u0063"}});_bd :=_ba .NewContentStreamProcessor (*_gg );_bd .AddHandler (_ba .HandlerConditionEnumAllOperands ,"",func (_dgb *_ba .ContentStreamOperation ,_ddf _ba .GraphicsState ,_cf *_d .PdfPageResources )error {_fc .Log .Debug ("\u0050\u0072\u006f\u0063\u0065\u0073\u0073\u0069\u006e\u0067\u0020\u0025\u0073",_dgb .Operand );switch _dgb .Operand {case "\u0071":_gdc .Push ();case "\u0051":_gdc .Pop ();case "\u0063\u006d":if len (_dgb .Params )!=6{return _cg ;};_caf ,_gbc :=_bc .GetNumbersAsFloat (_dgb .Params );if _gbc !=nil {return _gbc ;};_cdg :=_cd .NewMatrix (_caf [0],_caf [1],_caf [2],_caf [3],_caf [4],_caf [5]);_fc .Log .Debug ("\u0047\u0072\u0061\u0070\u0068\u0069\u0063\u0073\u0020\u0073\u0074a\u0074\u0065\u0020\u006d\u0061\u0074\u0072\u0069\u0078\u003a \u0025\u002b\u0076",_cdg );_gdc .SetMatrix (_gdc .Matrix ().Mult (_cdg ));_fef :=(_ddf .CTM .ScalingFactorX ()+_ddf .CTM .ScalingFactorY ())/2.0;_gdc .SetLineWidth (_fef *_gdc .LineWidth ());case "\u0077":if len (_dgb .Params )!=1{return _cg ;};_eeb ,_bfg :=_bc .GetNumbersAsFloat (_dgb .Params );if _bfg !=nil {return _bfg ;};_bee :=(_ddf .CTM .ScalingFactorX ()+_ddf .CTM .ScalingFactorY ())/2.0;_gdc .SetLineWidth (_bee *_eeb [0]);case "\u004a":if len (_dgb .Params )!=1{return _cg ;};_aa ,_bgc :=_bc .GetIntVal (_dgb .Params [0]);if !_bgc {return _bbf ;};switch _aa {case 0:_gdc .SetLineCap (_bcf .LineCapButt );case 1:_gdc .SetLineCap (_bcf .LineCapRound );case 2:_gdc .SetLineCap (_bcf .LineCapSquare );default:_fc .Log .Debug ("\u0049\u006e\u0076\u0061\u006c\u0069\u0064\u0020\u006c\u0069\u006ee\u0020\u0063\u0061\u0070\u0020\u0073\u0074\u0079\u006c\u0065:\u0020\u0025\u0064",_aa );return _cg ;};case "\u006a":if len (_dgb .Params )!=1{return _cg ;};_aac ,_cef :=_bc .GetIntVal (_dgb .Params [0]);if !_cef {return _bbf ;};switch _aac {case 0:_gdc .SetLineJoin (_bcf .LineJoinBevel );case 1:_gdc .SetLineJoin (_bcf .LineJoinRound );case 2:_gdc .SetLineJoin (_bcf .LineJoinBevel );default:_fc .Log .Debug ("I\u006e\u0076\u0061\u006c\u0069\u0064 \u006c\u0069\u006e\u0065\u0020\u006a\u006f\u0069\u006e \u0073\u0074\u0079l\u0065:\u0020\u0025\u0064",_aac );return _cg ;};case "\u004d":if len (_dgb .Params )!=1{return _cg ;};_bfc ,_dga :=_bc .GetNumbersAsFloat (_dgb .Params );if _dga !=nil {return _dga ;};_ =_bfc ;_fc .Log .Debug ("\u004di\u0074\u0065\u0072\u0020l\u0069\u006d\u0069\u0074\u0020n\u006ft\u0020s\u0075\u0070\u0070\u006f\u0072\u0074\u0065d");case "\u0064":if len (_dgb .Params )!=2{return _cg ;};_afd ,_cgf :=_bc .GetArray (_dgb .Params [0]);if !_cgf {return _bbf ;};_cfg ,_cgf :=_bc .GetIntVal (_dgb .Params [1]);if !_cgf {return _bbf ;};_fg ,_gf :=_bc .GetNumbersAsFloat (_afd .Elements ());if _gf !=nil {return _gf ;};_gdc .SetDash (_fg ...);_ =_cfg ;_fc .Log .Debug ("\u004c\u0069n\u0065\u0020\u0064\u0061\u0073\u0068\u0020\u0070\u0068\u0061\u0073\u0065\u0020\u006e\u006f\u0074\u0020\u0073\u0075\u0070\u0070\u006frt\u0065\u0064");case "\u0072\u0069":_fc .Log .Debug ("\u0052\u0065\u006e\u0064\u0065\u0072\u0069\u006e\u0067\u0020i\u006e\u0074\u0065\u006e\u0074\u0020\u006eo\u0074\u0020\u0073\u0075\u0070\u0070\u006f\u0072\u0074\u0065\u0064");case "\u0069":_fc .Log .Debug ("\u0046\u006c\u0061\u0074\u006e\u0065\u0073\u0073\u0020\u0074\u006f\u006c\u0065\u0072\u0061n\u0063e\u0020\u006e\u006f\u0074\u0020\u0073\u0075\u0070\u0070\u006f\u0072\u0074\u0065\u0064");case "\u0067\u0073":if len (_dgb .Params )!=1{return _cg ;};_bec ,_aab :=_bc .GetName (_dgb .Params [0]);if !_aab {return _bbf ;};if _bec ==nil {return _cg ;};_fgb ,_aab :=_cf .GetExtGState (*_bec );if !_aab {_fc .Log .Debug ("\u0045\u0052\u0052OR\u003a\u0020\u0063\u006f\u0075\u006c\u0064\u0020\u006eo\u0074 \u0066i\u006ed\u0020\u0072\u0065\u0073\u006f\u0075\u0072\u0063\u0065\u003a\u0020\u0025\u0073",*_bec );return _b .New ("\u0072e\u0073o\u0075\u0072\u0063\u0065\u0020n\u006f\u0074 \u0066\u006f\u0075\u006e\u0064");};_dbf ,_aab :=_bc .GetDict (_fgb );if !_aab {_fc .Log .Debug ("\u0045\u0052RO\u0052\u003a\u0020c\u006f\u0075\u006c\u0064 ge\u0074 g\u0072\u0061\u0070\u0068\u0069\u0063\u0073 s\u0074\u0061\u0074\u0065\u0020\u0064\u0069c\u0074");return _bbf ;};_fc .Log .Debug ("G\u0053\u0020\u0064\u0069\u0063\u0074\u003a\u0020\u0025\u0073",_dbf .String ());case "\u006d":if len (_dgb .Params )!=2{_fc .Log .Debug ("\u0057\u0041\u0052\u004e\u003a\u0020\u0065\u0072\u0072o\u0072\u0020\u0077\u0068\u0069\u006c\u0065\u0020\u0070\u0072\u006f\u0063\u0065\u0073\u0073\u0069\u006e\u0067\u0020\u0060\u006d\u0060\u0020o\u0070\u0065r\u0061\u0074o\u0072\u003a\u0020\u0025\u0073\u002e\u0020\u004f\u0075\u0074\u0070\u0075\u0074 m\u0061\u0079\u0020\u0062\u0065\u0020\u0069\u006e\u0063o\u0072\u0072\u0065\u0063\u0074\u002e",_cg );return nil ;};_bff ,_ega :=_bc .GetNumbersAsFloat (_dgb .Params );if _ega !=nil {return _ega ;};_fc .Log .Debug ("M\u006f\u0076\u0065\u0020\u0074\u006f\u003a\u0020\u0025\u0076",_bff );_gdc .NewSubPath ();_gdc .MoveTo (_bff [0],_bff [1]);case "\u006c":if len (_dgb .Params )!=2{_fc .Log .Debug ("\u0057\u0041\u0052\u004e\u003a\u0020\u0065\u0072\u0072o\u0072\u0020\u0077\u0068\u0069\u006c\u0065\u0020\u0070\u0072\u006f\u0063\u0065\u0073\u0073\u0069\u006e\u0067\u0020\u0060\u006c\u0060\u0020o\u0070\u0065r\u0061\u0074o\u0072\u003a\u0020\u0025\u0073\u002e\u0020\u004f\u0075\u0074\u0070\u0075\u0074 m\u0061\u0079\u0020\u0062\u0065\u0020\u0069\u006e\u0063o\u0072\u0072\u0065\u0063\u0074\u002e",_cg );return nil ;};_eb ,_cca :=_bc .GetNumbersAsFloat (_dgb .Params );if _cca !=nil {return _cca ;};_gdc .LineTo (_eb [0],_eb [1]);case "\u0063":if len (_dgb .Params )!=6{return _cg ;};_aaf ,_da :=_bc .GetNumbersAsFloat (_dgb .Params );if _da !=nil {return _da ;};_fc .Log .Debug ("\u0043u\u0062\u0069\u0063\u0020\u0062\u0065\u007a\u0069\u0065\u0072\u0020p\u0061\u0072\u0061\u006d\u0073\u003a\u0020\u0025\u002b\u0076",_aaf );_gdc .CubicTo (_aaf [0],_aaf [1],_aaf [2],_aaf [3],_aaf [4],_aaf [5]);case "\u0076","\u0079":if len (_dgb .Params )!=4{return _cg ;};_ag ,_bfa :=_bc .GetNumbersAsFloat (_dgb .Params );if _bfa !=nil {return _bfa ;};_fc .Log .Debug ("\u0043u\u0062\u0069\u0063\u0020\u0062\u0065\u007a\u0069\u0065\u0072\u0020p\u0061\u0072\u0061\u006d\u0073\u003a\u0020\u0025\u002b\u0076",_ag );_gdc .QuadraticTo (_ag [0],_ag [1],_ag [2],_ag [3]);case "\u0068":_gdc .ClosePath ();_gdc .NewSubPath ();case "\u0072\u0065":if len (_dgb .Params )!=4{return _cg ;};_dgc ,_ef :=_bc .GetNumbersAsFloat (_dgb .Params );if _ef !=nil {return _ef ;};_gdc .DrawRectangle (_dgc [0],_dgc [1],_dgc [2],_dgc [3]);_gdc .NewSubPath ();case "\u0053":_ggf ,_cde :=_ddf .ColorspaceStroking .ColorToRGB (_ddf .ColorStroking );if _cde !=nil {_fc .Log .Debug ("\u0045\u0072\u0072\u006f\u0072\u0020\u0063\u006f\u006e\u0076\u0065r\u0074\u0069\u006e\u0067\u0020\u0063\u006f\u006c\u006f\u0072:\u0020\u0025\u0076",_cde );return _cde ;};_cfc ,_cdb :=_ggf .(*_d .PdfColorDeviceRGB );if !_cdb {_fc .Log .Debug ("\u0045\u0072\u0072\u006fr \u0063\u006f\u006e\u0076\u0065\u0072\u0074\u0069\u006e\u0067\u0020\u0063\u006f\u006co\u0072");return _cde ;};_gdc .SetRGBA (_cfc .R (),_cfc .G (),_cfc .B (),1);_gdc .Stroke ();case "\u0073":_aaa ,_agc :=_ddf .ColorspaceStroking .ColorToRGB (_ddf .ColorStroking );if _agc !=nil {_fc .Log .Debug ("\u0045\u0072\u0072\u006f\u0072\u0020\u0063\u006f\u006e\u0076\u0065r\u0074\u0069\u006e\u0067\u0020\u0063\u006f\u006c\u006f\u0072:\u0020\u0025\u0076",_agc );return _agc ;};_fce ,_gee :=_aaa .(*_d .PdfColorDeviceRGB );if !_gee {_fc .Log .Debug ("\u0045\u0072\u0072\u006fr \u0063\u006f\u006e\u0076\u0065\u0072\u0074\u0069\u006e\u0067\u0020\u0063\u006f\u006co\u0072");return _agc ;};_gdc .ClosePath ();_gdc .NewSubPath ();_gdc .SetRGBA (_fce .R (),_fce .G (),_fce .B (),1);_gdc .Stroke ();case "\u0066","\u0046":_fgd ,_egaf :=_ddf .ColorspaceNonStroking .ColorToRGB (_ddf .ColorNonStroking );if _egaf !=nil {_fc .Log .Debug ("\u0045\u0072\u0072\u006f\u0072\u0020\u0063\u006f\u006e\u0076\u0065r\u0074\u0069\u006e\u0067\u0020\u0063\u006f\u006c\u006f\u0072:\u0020\u0025\u0076",_egaf );return _egaf ;};_bca ,_egaa :=_fgd .(*_d .PdfColorDeviceRGB );if !_egaa {_fc .Log .Debug ("\u0045\u0072\u0072\u006fr \u0063\u006f\u006e\u0076\u0065\u0072\u0074\u0069\u006e\u0067\u0020\u0063\u006f\u006co\u0072");return _egaf ;};_gdc .SetRGBA (_bca .R (),_bca .G (),_bca .B (),1);_gdc .SetFillRule (_bcf .FillRuleWinding );_gdc .Fill ();case "\u0066\u002a":_bdf ,_ab :=_ddf .ColorspaceNonStroking .ColorToRGB (_ddf .ColorNonStroking );if _ab !=nil {_fc .Log .Debug ("\u0045\u0072\u0072\u006f\u0072\u0020\u0063\u006f\u006e\u0076\u0065r\u0074\u0069\u006e\u0067\u0020\u0063\u006f\u006c\u006f\u0072:\u0020\u0025\u0076",_ab );return _ab ;};_bffg ,_gfa :=_bdf .(*_d .PdfColorDeviceRGB );if !_gfa {_fc .Log .Debug ("\u0045\u0072\u0072\u006fr \u0063\u006f\u006e\u0076\u0065\u0072\u0074\u0069\u006e\u0067\u0020\u0063\u006f\u006co\u0072");return _ab ;};_gdc .SetRGBA (_bffg .R (),_bffg .G (),_bffg .B (),1);_gdc .SetFillRule (_bcf .FillRuleEvenOdd );_gdc .Fill ();case "\u0042":_dfa ,_dee :=_ddf .ColorspaceNonStroking .ColorToRGB (_ddf .ColorNonStroking );if _dee !=nil {_fc .Log .Debug ("\u0045\u0072\u0072\u006f\u0072\u0020\u0063\u006f\u006e\u0076\u0065r\u0074\u0069\u006e\u0067\u0020\u0063\u006f\u006c\u006f\u0072:\u0020\u0025\u0076",_dee );return _dee ;};_bed :=_dfa .(*_d .PdfColorDeviceRGB );_gdc .SetRGBA (_bed .R (),_bed .G (),_bed .B (),1);_gdc .SetFillRule (_bcf .FillRuleWinding );_gdc .FillPreserve ();_dfa ,_dee =_ddf .ColorspaceStroking .ColorToRGB (_ddf .ColorStroking );if _dee !=nil {_fc .Log .Debug ("\u0045\u0072\u0072\u006f\u0072\u0020\u0063\u006f\u006e\u0076\u0065r\u0074\u0069\u006e\u0067\u0020\u0063\u006f\u006c\u006f\u0072:\u0020\u0025\u0076",_dee );return _dee ;};_bed =_dfa .(*_d .PdfColorDeviceRGB );_gdc .SetRGBA (_bed .R (),_bed .G (),_bed .B (),1);_gdc .Stroke ();case "\u0042\u002a":_efg ,_ffe :=_ddf .ColorspaceNonStroking .ColorToRGB (_ddf .ColorNonStroking );if _ffe !=nil {_fc .Log .Debug ("\u0045\u0072\u0072\u006f\u0072\u0020\u0063\u006f\u006e\u0076\u0065r\u0074\u0069\u006e\u0067\u0020\u0063\u006f\u006c\u006f\u0072:\u0020\u0025\u0076",_ffe );return _ffe ;};_cae :=_efg .(*_d .PdfColorDeviceRGB );_gdc .SetRGBA (_cae .R (),_cae .G (),_cae .B (),1);_gdc .SetFillRule (_bcf .FillRuleEvenOdd );_gdc .FillPreserve ();_efg ,_ffe =_ddf .ColorspaceStroking .ColorToRGB (_ddf .ColorStroking );if _ffe !=nil {_fc .Log .Debug ("\u0045\u0072\u0072\u006f\u0072\u0020\u0063\u006f\u006e\u0076\u0065r\u0074\u0069\u006e\u0067\u0020\u0063\u006f\u006c\u006f\u0072:\u0020\u0025\u0076",_ffe );return _ffe ;};_cae =_efg .(*_d .PdfColorDeviceRGB );_gdc .SetRGBA (_cae .R (),_cae .G (),_cae .B (),1);_gdc .Stroke ();case "\u0062":_ddg ,_gae :=_ddf .ColorspaceNonStroking .ColorToRGB (_ddf .ColorNonStroking );if _gae !=nil {_fc .Log .Debug ("\u0045\u0072\u0072\u006f\u0072\u0020\u0063\u006f\u006e\u0076\u0065r\u0074\u0069\u006e\u0067\u0020\u0063\u006f\u006c\u006f\u0072:\u0020\u0025\u0076",_gae );return _gae ;};_gcb :=_ddg .(*_d .PdfColorDeviceRGB );_gdc .SetRGBA (_gcb .R (),_gcb .G (),_gcb .B (),1);_gdc .ClosePath ();_gdc .NewSubPath ();_gdc .SetFillRule (_bcf .FillRuleWinding );_gdc .FillPreserve ();_ddg ,_gae =_ddf .ColorspaceStroking .ColorToRGB (_ddf .ColorStroking );if _gae !=nil {_fc .Log .Debug ("\u0045\u0072\u0072\u006f\u0072\u0020\u0063\u006f\u006e\u0076\u0065r\u0074\u0069\u006e\u0067\u0020\u0063\u006f\u006c\u006f\u0072:\u0020\u0025\u0076",_gae );return _gae ;};_gcb =_ddg .(*_d .PdfColorDeviceRGB );_gdc .SetRGBA (_gcb .R (),_gcb .G (),_gcb .B (),1);_gdc .Stroke ();case "\u0062\u002a":_gdc .ClosePath ();_deef ,_ace :=_ddf .ColorspaceNonStroking .ColorToRGB (_ddf .ColorNonStroking );if _ace !=nil {_fc .Log .Debug ("\u0045\u0072\u0072\u006f\u0072\u0020\u0063\u006f\u006e\u0076\u0065r\u0074\u0069\u006e\u0067\u0020\u0063\u006f\u006c\u006f\u0072:\u0020\u0025\u0076",_ace );return _ace ;};_bbc :=_deef .(*_d .PdfColorDeviceRGB );_gdc .SetRGBA (_bbc .R (),_bbc .G (),_bbc .B (),1);_gdc .NewSubPath ();_gdc .SetFillRule (_bcf .FillRuleEvenOdd );_gdc .FillPreserve ();_deef ,_ace =_ddf .ColorspaceStroking .ColorToRGB (_ddf .ColorStroking );if _ace !=nil {_fc .Log .Debug ("\u0045\u0072\u0072\u006f\u0072\u0020\u0063\u006f\u006e\u0076\u0065r\u0074\u0069\u006e\u0067\u0020\u0063\u006f\u006c\u006f\u0072:\u0020\u0025\u0076",_ace );return _ace ;};_bbc =_deef .(*_d .PdfColorDeviceRGB );_gdc .SetRGBA (_bbc .R (),_bbc .G (),_bbc .B (),1);_gdc .Stroke ();case "\u006e":_gdc .ClearPath ();case "\u0057":_gdc .SetFillRule (_bcf .FillRuleWinding );_gdc .ClipPreserve ();case "\u0057\u002a":_gdc .SetFillRule (_bcf .FillRuleEvenOdd );_gdc .ClipPreserve ();case "\u0072\u0067":_fec ,_fff :=_ddf .ColorNonStroking .(*_d .PdfColorDeviceRGB );if !_fff {_fc .Log .Debug ("\u0045\u0072\u0072\u006f\u0072\u0020\u0063\u006f\u006e\u0076\u0065r\u0074\u0069\u006e\u0067\u0020\u0063\u006f\u006c\u006f\u0072:\u0020\u0025\u0076",_ddf .ColorNonStroking );return nil ;};_gdc .SetFillRGBA (_fec .R (),_fec .G (),_fec .B (),1);case "\u0052\u0047":_dda ,_ceg :=_ddf .ColorStroking .(*_d .PdfColorDeviceRGB );if !_ceg {_fc .Log .Debug ("\u0045\u0072\u0072\u006f\u0072\u0020\u0063\u006f\u006e\u0076\u0065r\u0074\u0069\u006e\u0067\u0020\u0063\u006f\u006c\u006f\u0072:\u0020\u0025\u0076",_ddf .ColorStroking );return nil ;};_gdc .SetStrokeRGBA (_dda .R (),_dda .G (),_dda .B (),1);case "\u006b":_fb ,_ggb :=_ddf .ColorNonStroking .(*_d .PdfColorDeviceCMYK );if !_ggb {_fc .Log .Debug ("\u0045\u0072\u0072\u006f\u0072\u0020\u0063\u006f\u006e\u0076\u0065r\u0074\u0069\u006e\u0067\u0020\u0063\u006f\u006c\u006f\u0072:\u0020\u0025\u0076",_ddf .ColorNonStroking );return nil ;};_ffb ,_dbb :=_ddf .ColorspaceNonStroking .ColorToRGB (_fb );if _dbb !=nil {_fc .Log .Debug ("\u0045\u0072\u0072\u006f\u0072\u0020\u0063\u006f\u006e\u0076\u0065r\u0074\u0069\u006e\u0067\u0020\u0063\u006f\u006c\u006f\u0072:\u0020\u0025\u0076",_ddf .ColorNonStroking );return nil ;};_gbd ,_ggb :=_ffb .(*_d .PdfColorDeviceRGB );if !_ggb {_fc .Log .Debug ("\u0045\u0072\u0072\u006f\u0072\u0020\u0063\u006f\u006e\u0076\u0065r\u0074\u0069\u006e\u0067\u0020\u0063\u006f\u006c\u006f\u0072:\u0020\u0025\u0076",_ffb );return nil ;};_gdc .SetFillRGBA (_gbd .R (),_gbd .G (),_gbd .B (),1);case "\u004b":_ffc ,_caef :=_ddf .ColorStroking .(*_d .PdfColorDeviceCMYK );if !_caef {_fc .Log .Debug ("\u0045\u0072\u0072\u006f\u0072\u0020\u0063\u006f\u006e\u0076\u0065r\u0074\u0069\u006e\u0067\u0020\u0063\u006f\u006c\u006f\u0072:\u0020\u0025\u0076",_ddf .ColorStroking );return nil ;};_dfg ,_deb :=_ddf .ColorspaceStroking .ColorToRGB (_ffc );if _deb !=nil {_fc .Log .Debug ("\u0045\u0072\u0072\u006f\u0072\u0020\u0063\u006f\u006e\u0076\u0065r\u0074\u0069\u006e\u0067\u0020\u0063\u006f\u006c\u006f\u0072:\u0020\u0025\u0076",_ddf .ColorStroking );return nil ;};_fca ,_caef :=_dfg .(*_d .PdfColorDeviceRGB );if !_caef {_fc .Log .Debug ("\u0045\u0072\u0072\u006f\u0072\u0020\u0063\u006f\u006e\u0076\u0065r\u0074\u0069\u006e\u0067\u0020\u0063\u006f\u006c\u006f\u0072:\u0020\u0025\u0076",_dfg );return nil ;};_gdc .SetStrokeRGBA (_fca .R (),_fca .G (),_fca .B (),1);case "\u0067":_dgg ,_afee :=_ddf .ColorNonStroking .(*_d .PdfColorDeviceGray );if !_afee {_fc .Log .Debug ("\u0045\u0072\u0072\u006f\u0072\u0020\u0063\u006f\u006e\u0076\u0065r\u0074\u0069\u006e\u0067\u0020\u0063\u006f\u006c\u006f\u0072:\u0020\u0025\u0076",_ddf .ColorNonStroking );return nil ;};_agb ,_fbd :=_ddf .ColorspaceNonStroking .ColorToRGB (_dgg );if _fbd !=nil {_fc .Log .Debug ("\u0045\u0072\u0072\u006f\u0072\u0020\u0063\u006f\u006e\u0076\u0065r\u0074\u0069\u006e\u0067\u0020\u0063\u006f\u006c\u006f\u0072:\u0020\u0025\u0076",_ddf .ColorNonStroking );return nil ;};_afa ,_afee :=_agb .(*_d .PdfColorDeviceRGB );if !_afee {_fc .Log .Debug ("\u0045\u0072\u0072\u006f\u0072\u0020\u0063\u006f\u006e\u0076\u0065r\u0074\u0069\u006e\u0067\u0020\u0063\u006f\u006c\u006f\u0072:\u0020\u0025\u0076",_agb );return nil ;};_gdc .SetFillRGBA (_afa .R (),_afa .G (),_afa .B (),1);case "\u0047":_cda ,_gcc :=_ddf .ColorStroking .(*_d .PdfColorDeviceGray );if !_gcc {_fc .Log .Debug ("\u0045\u0072\u0072\u006f\u0072\u0020\u0063\u006f\u006e\u0076\u0065r\u0074\u0069\u006e\u0067\u0020\u0063\u006f\u006c\u006f\u0072:\u0020\u0025\u0076",_ddf .ColorStroking );return nil ;};_bad ,_cfe :=_ddf .ColorspaceStroking .ColorToRGB (_cda );if _cfe !=nil {_fc .Log .Debug ("\u0045\u0072\u0072\u006f\u0072\u0020\u0063\u006f\u006e\u0076\u0065r\u0074\u0069\u006e\u0067\u0020\u0063\u006f\u006c\u006f\u0072:\u0020\u0025\u0076",_ddf .ColorStroking );return nil ;};_caa ,_gcc :=_bad .(*_d .PdfColorDeviceRGB );if !_gcc {_fc .Log .Debug ("\u0045\u0072\u0072\u006f\u0072\u0020\u0063\u006f\u006e\u0076\u0065r\u0074\u0069\u006e\u0067\u0020\u0063\u006f\u006c\u006f\u0072:\u0020\u0025\u0076",_bad );return nil ;};_gdc .SetStrokeRGBA (_caa .R (),_caa .G (),_caa .B (),1);case "\u0063\u0073","\u0073\u0063","\u0073\u0063\u006e":_gaeb ,_cded :=_ddf .ColorspaceNonStroking .ColorToRGB (_ddf .ColorNonStroking );if _cded !=nil {_fc .Log .Debug ("\u0045\u0072\u0072\u006f\u0072\u0020\u0063\u006f\u006e\u0076\u0065r\u0074\u0069\u006e\u0067\u0020\u0063\u006f\u006c\u006f\u0072:\u0020\u0025\u0076",_ddf .ColorNonStroking );return nil ;};_bfed ,_fbda :=_gaeb .(*_d .PdfColorDeviceRGB );if !_fbda {_fc .Log .Debug ("\u0045\u0072\u0072\u006f\u0072\u0020\u0063\u006f\u006e\u0076\u0065r\u0074\u0069\u006e\u0067\u0020\u0063\u006f\u006c\u006f\u0072:\u0020\u0025\u0076",_gaeb );return nil ;};_gdc .SetFillRGBA (_bfed .R (),_bfed .G (),_bfed .B (),1);case "\u0043\u0053","\u0053\u0043","\u0053\u0043\u004e":_becb ,_becg :=_ddf .ColorspaceStroking .ColorToRGB (_ddf .ColorStroking );if _becg !=nil {_fc .Log .Debug ("\u0045\u0072\u0072\u006f\u0072\u0020\u0063\u006f\u006e\u0076\u0065r\u0074\u0069\u006e\u0067\u0020\u0063\u006f\u006c\u006f\u0072:\u0020\u0025\u0076",_ddf .ColorStroking );return nil ;};_feg ,_ea :=_becb .(*_d .PdfColorDeviceRGB );if !_ea {_fc .Log .Debug ("\u0045\u0072\u0072\u006f\u0072\u0020\u0063\u006f\u006e\u0076\u0065r\u0074\u0069\u006e\u0067\u0020\u0063\u006f\u006c\u006f\u0072:\u0020\u0025\u0076",_becb );return nil ;};_gdc .SetStrokeRGBA (_feg .R (),_feg .G (),_feg .B (),1);case "\u0044\u006f":if len (_dgb .Params )!=1{return _cg ;};_ebd ,_dgf :=_bc .GetName (_dgb .Params [0]);if !_dgf {return _bbf ;};_ ,_fd :=_cf .GetXObjectByName (*_ebd );switch _fd {case _d .XObjectTypeImage :_fc .Log .Debug ("\u0058\u004f\u0062\u006a\u0065\u0063\u0074\u0020\u0069\u006d\u0061\u0067e\u003a\u0020\u0025\u0073",_ebd .String ());_dgd ,_dgcc :=_cf .GetXObjectImageByName (*_ebd );if _dgcc !=nil {return _dgcc ;};_dae ,_dgcc :=_dgd .ToImage ();if _dgcc !=nil {return _dgcc ;};_adb ,_dgcc :=_dae .ToGoImage ();if _dgcc !=nil {return _dgcc ;};_dgfa :=_adb .Bounds ();_gdc .Push ();_gdc .Scale (1.0/float64 (_dgfa .Dx ()),-1.0/float64 (_dgfa .Dy ()));_gdc .DrawImageAnchored (_adb ,0,0,0,1);_gdc .Pop ();case _d .XObjectTypeForm :_fc .Log .Debug ("\u0058\u004fb\u006a\u0065\u0063t\u0020\u0066\u006f\u0072\u006d\u003a\u0020\u0025\u0073",_ebd .String ());_aff ,_cbc :=_cf .GetXObjectFormByName (*_ebd );if _cbc !=nil {return _cbc ;};_edg ,_cbc :=_aff .GetContentStream ();if _cbc !=nil {return _cbc ;};_bgce :=_aff .Resources ;if _bgce ==nil {_bgce =_cf ;};_gdc .Push ();if _aff .Matrix !=nil {_aeb ,_fbb :=_bc .GetArray (_aff .Matrix );if !_fbb {return _bbf ;};_bfcf ,_gaed :=_bc .GetNumbersAsFloat (_aeb .Elements ());if _gaed !=nil {return _gaed ;};if len (_bfcf )!=6{return _cg ;};_ddb :=_cd .NewMatrix (_bfcf [0],_bfcf [1],_bfcf [2],_bfcf [3],_bfcf [4],_bfcf [5]);_gdc .SetMatrix (_gdc .Matrix ().Mult (_ddb ));};if _aff .BBox !=nil {_ggd ,_gde :=_bc .GetArray (_aff .BBox );if !_gde {return _bbf ;};_gab ,_gfae :=_bc .GetNumbersAsFloat (_ggd .Elements ());if _gfae !=nil {return _gfae ;};if len (_gab )!=4{_fc .Log .Debug ("\u004c\u0065\u006e\u0020\u003d\u0020\u0025\u0064",len (_gab ));return _cg ;};_gdc .DrawRectangle (_gab [0],_gab [1],_gab [2]-_gab [0],_gab [3]-_gab [1]);_gdc .SetRGBA (1,0,0,1);_gdc .Clip ();}else {_fc .Log .Debug ("\u0045R\u0052\u004fR\u003a\u0020\u0052\u0065q\u0075\u0069\u0072e\u0064\u0020\u0042\u0042\u006f\u0078\u0020\u006d\u0069ss\u0069\u006e\u0067 \u006f\u006e \u0058\u004f\u0062\u006a\u0065\u0063t\u0020\u0046o\u0072\u006d");};_cbc =_afe .renderContentStream (_gdc ,string (_edg ),_bgce );if _cbc !=nil {return _cbc ;};_gdc .Pop ();};case "\u0042\u0049":if len (_dgb .Params )!=1{return _cg ;};_cgg ,_cdc :=_dgb .Params [0].(*_ba .ContentStreamInlineImage );if !_cdc {return nil ;};_dgbg ,_fcd :=_cgg .ToImage (_cf );if _fcd !=nil {return _fcd ;};_fcf ,_fcd :=_dgbg .ToGoImage ();if _fcd !=nil {return _fcd ;};_adg :=_fcf .Bounds ();_gdc .Push ();_gdc .Scale (1.0/float64 (_adg .Dx ()),-1.0/float64 (_adg .Dy ()));_gdc .DrawImageAnchored (_fcf ,0,0,0,1);_gdc .Pop ();case "\u0042\u0054":_egc .Reset ();case "\u0045\u0054":_egc .Reset ();case "\u0054\u004c":if len (_dgb .Params )!=1{return _cg ;};_ebf ,_eca :=_bc .GetNumberAsFloat (_dgb .Params [0]);if _eca !=nil {return _eca ;};_egc .Tl =_ebf ;case "\u0054\u0063":if len (_dgb .Params )!=1{return _cg ;};_gdec ,_ebg :=_bc .GetNumberAsFloat (_dgb .Params [0]);if _ebg !=nil {return _ebg ;};_egc .Tc =_gdec ;case "\u0054\u0077":if len (_dgb .Params )!=1{return _cg ;};_egcg ,_cdaf :=_bc .GetNumberAsFloat (_dgb .Params [0]);if _cdaf !=nil {return _cdaf ;};_egc .Tw =_egcg ;case "\u0054\u007a":if len (_dgb .Params )!=1{return _cg ;};_fga ,_acb :=_bc .GetNumberAsFloat (_dgb .Params [0]);if _acb !=nil {return _acb ;};_egc .Th =_fga ;case "\u0054\u0073":if len (_dgb .Params )!=1{return _cg ;};_cbd ,_caff :=_bc .GetNumberAsFloat (_dgb .Params [0]);if _caff !=nil {return _caff ;};_egc .Ts =_cbd ;case "\u0054\u0064":if len (_dgb .Params )!=2{return _cg ;};_cdbe ,_abe :=_bc .GetNumbersAsFloat (_dgb .Params );if _abe !=nil {return _abe ;};_fc .Log .Debug ("\u0054\u0064\u003a\u0020\u0025\u0076",_cdbe );_egc .ProcTd (_cdbe [0],_cdbe [1]);case "\u0054\u0044":if len (_dgb .Params )!=2{return _cg ;};_eac ,_bag :=_bc .GetNumbersAsFloat (_dgb .Params );if _bag !=nil {return _bag ;};_fc .Log .Debug ("\u0054\u0044\u003a\u0020\u0025\u0076",_eac );_egc .ProcTD (_eac [0],_eac [1]);case "\u0054\u002a":_egc .ProcTStar ();case "\u0054\u006d":if len (_dgb .Params )!=6{return _cg ;};_bda ,_efc :=_bc .GetNumbersAsFloat (_dgb .Params );if _efc !=nil {return _efc ;};_fc .Log .Debug ("\u0054\u0065x\u0074\u0020\u006da\u0074\u0072\u0069\u0078\u003a\u0020\u0025\u002b\u0076",_bda );_egc .ProcTm (_bda [0],_bda [1],_bda [2],_bda [3],_bda [4],_bda [5]);case "\u0027":if len (_dgb .Params )!=1{return _cg ;};_bcaf ,_dgdg :=_bc .GetStringBytes (_dgb .Params [0]);if !_dgdg {return _bbf ;};_fc .Log .Debug ("\u0027\u0020\u0073t\u0072\u0069\u006e\u0067\u003a\u0020\u0025\u0073",string (_bcaf ));_egc .ProcQ (_bcaf ,_gdc );case "\u0022":if len (_dgb .Params )!=3{return _cg ;};_gdbb ,_cab :=_bc .GetNumberAsFloat (_dgb .Params [0]);if _cab !=nil {return _cab ;};_acff ,_cab :=_bc .GetNumberAsFloat (_dgb .Params [1]);if _cab !=nil {return _cab ;};_ddd ,_gfd :=_bc .GetStringBytes (_dgb .Params [2]);if !_gfd {return _bbf ;};_egc .ProcDQ (_ddd ,_gdbb ,_acff ,_gdc );case "\u0054\u006a":if len (_dgb .Params )!=1{return _cg ;};_gbdd ,_cgb :=_bc .GetStringBytes (_dgb .Params [0]);if !_cgb {return _bbf ;};_fc .Log .Debug ("\u0054j\u0020s\u0074\u0072\u0069\u006e\u0067\u003a\u0020\u0060\u0025\u0073\u0060",string (_gbdd ));_egc .ProcTj (_gbdd ,_gdc );case "\u0054\u004a":if len (_dgb .Params )!=1{return _cg ;};_def ,_cdedf :=_bc .GetArray (_dgb .Params [0]);if !_cdedf {_fc .Log .Debug ("\u0054\u0079\u0070\u0065\u003a\u0020\u0025\u0054",_def );return _bbf ;};_fc .Log .Debug ("\u0054\u004a\u0020\u0061\u0072\u0072\u0061\u0079\u003a\u0020\u0025\u002b\u0076",_def );for _ ,_bdd :=range _def .Elements (){switch _fgf :=_bdd .(type ){case *_bc .PdfObjectString :if _fgf !=nil {_egc .ProcTj (_fgf .Bytes (),_gdc );};case *_bc .PdfObjectFloat ,*_bc .PdfObjectInteger :_gcbe ,_fag :=_bc .GetNumberAsFloat (_fgf );if _fag ==nil {_egc .Translate (-_gcbe *0.001*_egc .Tf .Size ,0);};};};case "\u0054\u0066":if len (_dgb .Params )!=2{return _cg ;};_fc .Log .Debug ("\u0025\u0023\u0076",_dgb .Params );_ebdg ,_gbee :=_bc .GetName (_dgb .Params [0]);if !_gbee ||_ebdg ==nil {_fc .Log .Debug ("\u0069\u006e\u0076\u0061l\u0069\u0064\u0020\u0066\u006f\u006e\u0074\u0020\u006e\u0061m\u0065 \u006f\u0062\u006a\u0065\u0063\u0074\u003a \u0025\u0076",_dgb .Params [0]);return _bbf ;};_fc .Log .Debug ("\u0046\u006f\u006e\u0074\u0020\u006e\u0061\u006d\u0065\u003a\u0020\u0025\u0073",_ebdg .String ());_fee ,_ecd :=_bc .GetNumberAsFloat (_dgb .Params [1]);if _ecd !=nil {_fc .Log .Debug ("\u0069\u006e\u0076\u0061l\u0069\u0064\u0020\u0066\u006f\u006e\u0074\u0020\u0073\u0069z\u0065 \u006f\u0062\u006a\u0065\u0063\u0074\u003a \u0025\u0076",_dgb .Params [1]);return _bbf ;};_fc .Log .Debug ("\u0046\u006f\u006e\u0074\u0020\u0073\u0069\u007a\u0065\u003a\u0020\u0025\u0076",_fee );_cea ,_efcg :=_cf .GetFontByName (*_ebdg );if !_efcg {_fc .Log .Debug ("\u0045R\u0052\u004f\u0052\u003a\u0020\u0046\u006f\u006e\u0074\u0020\u0025s\u0020\u006e\u006f\u0074\u0020\u0066\u006f\u0075\u006e\u0064",_ebdg .String ());return _b .New ("\u0066\u006f\u006e\u0074\u0020\u006e\u006f\u0074\u0020f\u006f\u0075\u006e\u0064");};_fc .Log .Debug ("\u0046\u006f\u006e\u0074\u003a\u0020\u0025\u0054",_cea );_bbb ,_gbee :=_bc .GetDict (_cea );if !_gbee {_fc .Log .Debug ("\u0045\u0052\u0052\u004f\u0052\u003a\u0020\u0063\u006f\u0075l\u0064\u0020\u006e\u006f\u0074\u0020\u0067e\u0074\u0020\u0066\u006f\u006e\u0074\u0020\u0064\u0069\u0063\u0074");return _bbf ;};_ddbe ,_ecd :=_d .NewPdfFontFromPdfObject (_bbb );if _ecd !=nil {_fc .Log .Debug ("\u0045\u0052\u0052\u004f\u0052\u003a\u0020\u0063\u006f\u0075\u006c\u0064\u0020\u006e\u006f\u0074\u0020\u006c\u006f\u0061\u0064\u0020\u0066\u006fn\u0074\u0020\u0066\u0072\u006fm\u0020\u006fb\u006a\u0065\u0063\u0074");return _ecd ;};_gcba :=_ddbe .BaseFont ();if _gcba ==""{_gcba =_ebdg .String ();};_bfef ,_gbee :=_ee [_gcba ];if !_gbee {_bfef ,_ecd =_bcf .NewTextFont (_ddbe ,_fee );if _ecd !=nil {_fc .Log .Debug ("\u0045R\u0052\u004f\u0052\u003a\u0020\u0025v",_ecd );};};if _bfef ==nil {if len (_gcba )> 7&&_gcba [6]=='+'{_gcba =_gcba [7:];};_cggf :=[]string {_gcba ,"\u0054i\u006de\u0073\u0020\u004e\u0065\u0077\u0020\u0052\u006f\u006d\u0061\u006e","\u0041\u0072\u0069a\u006c","D\u0065\u006a\u0061\u0056\u0075\u0020\u0053\u0061\u006e\u0073"};for _ ,_abec :=range _cggf {_fc .Log .Debug ("\u0044\u0045\u0042\u0055\u0047\u003a \u0073\u0065\u0061\u0072\u0063\u0068\u0069\u006e\u0067\u0020\u0073\u0079\u0073t\u0065\u006d\u0020\u0066\u006f\u006e\u0074 \u0060\u0025\u0073\u0060",_abec );if _bfef ,_gbee =_ee [_abec ];_gbee {break ;};_fcg :=_bcee .Match (_abec );if _fcg ==nil {_fc .Log .Debug ("c\u006f\u0075\u006c\u0064\u0020\u006eo\u0074\u0020\u0066\u0069\u006e\u0064\u0020\u0066\u006fn\u0074\u0020\u0066i\u006ce\u0020\u0025\u0073",_abec );continue ;};_bfef ,_ecd =_bcf .NewTextFontFromPath (_fcg .Filename ,_fee );if _ecd !=nil {_fc .Log .Debug ("c\u006f\u0075\u006c\u0064\u0020\u006eo\u0074\u0020\u006c\u006f\u0061\u0064\u0020\u0066\u006fn\u0074\u0020\u0066i\u006ce\u0020\u0025\u0073",_fcg .Filename );continue ;};_fc .Log .Debug ("\u0053\u0075\u0062\u0073\u0074\u0069t\u0075\u0074\u0069\u006e\u0067\u0020\u0066\u006f\u006e\u0074\u0020\u0025\u0073 \u0077\u0069\u0074\u0068\u0020\u0025\u0073 \u0028\u0025\u0073\u0029",_gcba ,_fcg .Name ,_fcg .Filename );_ee [_abec ]=_bfef ;break ;};};if _bfef ==nil {_fc .Log .Debug ("\u0045\u0052\u0052\u004f\u0052\u003a\u0020\u0063\u006f\u0075\u006c\u0064\u0020n\u006f\u0074\u0020\u0066\u0069\u006ed\u0020\u0061\u006e\u0079\u0020\u0073\u0075\u0069\u0074\u0061\u0062\u006c\u0065 \u0066\u006f\u006e\u0074");return _b .New ("\u0063\u006f\u0075\u006c\u0064\u0020\u006e\u006f\u0074\u0020\u0066\u0069\u006e\u0064\u0020a\u006ey\u0020\u0073\u0075\u0069\u0074\u0061\u0062\u006c\u0065\u0020\u0066\u006f\u006e\u0074");};_egc .ProcTf (_bfef .WithSize (_fee ,_ddbe ));case "\u0042\u004d\u0043","\u0042\u0044\u0043":case "\u0045\u004d\u0043":default:_fc .Log .Debug ("\u0045\u0052\u0052\u004f\u0052\u003a\u0020\u0075\u006e\u0073u\u0070\u0070\u006f\u0072\u0074\u0065\u0064 \u006f\u0070\u0065\u0072\u0061\u006e\u0064\u003a\u0020\u0025\u0073",_dgb .Operand );};return nil ;});_fa =_bd .Process (_dd );if _fa !=nil {return _fa ;};return nil ;};func _gdd (_bce string ,_bef _e .Image ,_dca int )error {_fe ,_bg :=_af .Create (_bce );if _bg !=nil {return _bg ;};defer _fe .Close ();return _acf .Encode (_fe ,_bef ,&_acf .Options {Quality :_dca });};var (_bbf =_b .New ("\u0074\u0079p\u0065\u0020\u0063h\u0065\u0063\u006b\u0020\u0065\u0072\u0072\u006f\u0072");_cg =_b .New ("\u0072\u0061\u006e\u0067\u0065\u0020\u0063\u0068\u0065\u0063\u006b\u0020e\u0072\u0072\u006f\u0072"););func (_acc renderer )renderPage (_bbg _bcf .Context ,_cb *_d .PdfPage )error {_ff ,_cc :=_cb .GetAllContentStreams ();if _cc !=nil {return _cc ;};_bbg .Translate (0,float64 (_bbg .Height ()));_bbg .Scale (1,-1);_bbg .Push ();_bbg .SetRGBA (1,1,1,1);_bbg .DrawRectangle (0,0,float64 (_bbg .Width ()),float64 (_bbg .Height ()));_bbg .Fill ();_bbg .Pop ();_bbg .SetLineWidth (1.0);_bbg .SetRGBA (0,0,0,1);return _acc .renderContentStream (_bbg ,_ff ,_cb .Resources );};