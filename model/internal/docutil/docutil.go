//
// Copyright 2020 FoxyUtils ehf. All rights reserved.
//
// This is a commercial product and requires a license to operate.
// A trial license can be obtained at https://unidoc.io
//
// DO NOT EDIT: generated by unitwist Go source code obfuscator.
//
// Use of this source code is governed by the UniDoc End User License Agreement
// terms that can be accessed at https://unidoc.io/eula/

package docutil ;import (_g "errors";_d "fmt";_a "github.com/unidoc/unipdf/v3/common";_fb "github.com/unidoc/unipdf/v3/core";);func (_bg *Catalog )GetMetadata ()(*_fb .PdfObjectStream ,bool ){_cf ,_bd :=_fb .GetStream (_bg .Object .Get ("\u004d\u0065\u0074\u0061\u0064\u0061\u0074\u0061"));
return _cf ,_bd ;};func (_fgc *Catalog )GetOutputIntents ()(*OutputIntents ,bool ){_ab :=_fgc .Object .Get ("\u004f\u0075\u0074\u0070\u0075\u0074\u0049\u006e\u0074\u0065\u006e\u0074\u0073");if _ab ==nil {return nil ,false ;};_ba ,_dc :=_fb .GetIndirect (_ab );
if !_dc {return nil ,false ;};_ff ,_dac :=_fb .GetArray (_ba .PdfObject );if !_dac {return nil ,false ;};return &OutputIntents {_faa :_ba ,_dfa :_ff ,_ea :_fgc ._e },true ;};func (_bb *Catalog )SetOutputIntents (outputIntents *OutputIntents ){if _cd :=_bb .Object .Get ("\u004f\u0075\u0074\u0070\u0075\u0074\u0049\u006e\u0074\u0065\u006e\u0074\u0073");
_cd !=nil {for _cg ,_gc :=range _bb ._e .Objects {if _gc ==_cd {if outputIntents ._faa ==_cd {return ;};_bb ._e .Objects =append (_bb ._e .Objects [:_cg ],_bb ._e .Objects [_cg +1:]...);break ;};};};_fag :=outputIntents ._faa ;if _fag ==nil {_fag =_fb .MakeIndirectObject (outputIntents ._dfa );
};_bb .Object .Set ("\u004f\u0075\u0074\u0070\u0075\u0074\u0049\u006e\u0074\u0065\u006e\u0074\u0073",_fag );_bb ._e .Objects =append (_bb ._e .Objects ,_fag );};func (_fcc Page )GetContents ()([]Content ,bool ){_ggd ,_bgc :=_fb .GetArray (_fcc .Object .Get ("\u0043\u006f\u006e\u0074\u0065\u006e\u0074\u0073"));
if !_bgc {_gfg ,_eac :=_fb .GetStream (_fcc .Object .Get ("\u0043\u006f\u006e\u0074\u0065\u006e\u0074\u0073"));if !_eac {return nil ,false ;};return []Content {{Stream :_gfg ,_afe :_fcc ,_fd :0}},true ;};_ace :=make ([]Content ,_ggd .Len ());for _cdf ,_ffd :=range _ggd .Elements (){_gcbe ,_bcb :=_fb .GetStream (_ffd );
if !_bcb {continue ;};_ace [_cdf ]=Content {Stream :_gcbe ,_afe :_fcc ,_fd :_cdf };};return _ace ,true ;};func (_cb *OutputIntents )Add (oi _fb .PdfObject )error {_afc ,_fcf :=oi .(*_fb .PdfObjectDictionary );if !_fcf {return _g .New ("\u0069\u006e\u0070\u0075\u0074\u0020\u006f\u0075\u0074\u0070\u0075\u0074\u0020\u0069\u006e\u0074\u0065\u006et\u0020\u0073\u0068\u006f\u0075\u006c\u0064 \u0062\u0065\u0020\u0061\u006e\u0020\u006f\u0062\u006a\u0065\u0063t\u0020\u0064\u0069\u0063\u0074\u0069\u006f\u006e\u0061\u0072\u0079");
};if _cgb ,_ccg :=_fb .GetStream (_afc .Get ("\u0044\u0065\u0073\u0074\u004f\u0075\u0074\u0070\u0075\u0074\u0050\u0072o\u0066\u0069\u006c\u0065"));_ccg {_cb ._ea .Objects =append (_cb ._ea .Objects ,_cgb );};_ef ,_gce :=oi .(*_fb .PdfIndirectObject );if !_gce {_ef =_fb .MakeIndirectObject (oi );
};if _cb ._dfa ==nil {_cb ._dfa =_fb .MakeArray (_ef );}else {_cb ._dfa .Append (_ef );};_cb ._ea .Objects =append (_cb ._ea .Objects ,_ef );return nil ;};func (_ad *OutputIntents )Get (i int )(OutputIntent ,bool ){if _ad ._dfa ==nil {return OutputIntent {},false ;
};if i >=_ad ._dfa .Len (){return OutputIntent {},false ;};_bea :=_ad ._dfa .Get (i );_adc ,_ce :=_fb .GetIndirect (_bea );if !_ce {_ac ,_eg :=_fb .GetDict (_bea );return OutputIntent {Object :_ac },_eg ;};_de ,_ga :=_fb .GetDict (_adc .PdfObject );return OutputIntent {Object :_de },_ga ;
};func (_bfg Page )FindXObjectForms ()[]*_fb .PdfObjectStream {_dba ,_dbg :=_bfg .GetResourcesXObject ();if !_dbg {return nil ;};_ddd :=map[*_fb .PdfObjectStream ]struct{}{};var _gdg func (_edb *_fb .PdfObjectDictionary ,_cbg map[*_fb .PdfObjectStream ]struct{});
_gdg =func (_gfb *_fb .PdfObjectDictionary ,_gcbg map[*_fb .PdfObjectStream ]struct{}){for _ ,_fgb :=range _gfb .Keys (){_cca ,_aff :=_fb .GetStream (_gfb .Get (_fgb ));if !_aff {continue ;};if _ ,_dfc :=_gcbg [_cca ];_dfc {continue ;};_dgd ,_faag :=_fb .GetName (_cca .Get ("\u0053u\u0062\u0074\u0079\u0070\u0065"));
if !_faag ||_dgd .String ()!="\u0046\u006f\u0072\u006d"{continue ;};_gcbg [_cca ]=struct{}{};_cfb ,_faag :=_fb .GetDict (_cca .Get ("\u0052e\u0073\u006f\u0075\u0072\u0063\u0065s"));if !_faag {continue ;};_cbc ,_gac :=_fb .GetDict (_cfb .Get ("\u0058O\u0062\u006a\u0065\u0063\u0074"));
if _gac {_gdg (_cbc ,_gcbg );};};};_gdg (_dba ,_ddd );var _ccb []*_fb .PdfObjectStream ;for _afg :=range _ddd {_ccb =append (_ccb ,_afg );};return _ccb ;};type OutputIntent struct{Object *_fb .PdfObjectDictionary ;};type ImageSMask struct{Image *Image ;
Stream *_fb .PdfObjectStream ;};type Catalog struct{Object *_fb .PdfObjectDictionary ;_e *Document ;};type Document struct{ID [2]string ;Version _fb .Version ;Objects []_fb .PdfObject ;Info _fb .PdfObject ;Crypt *_fb .PdfCrypt ;UseHashBasedID bool ;};func (_egc Page )GetResources ()(*_fb .PdfObjectDictionary ,bool ){return _fb .GetDict (_egc .Object .Get ("\u0052e\u0073\u006f\u0075\u0072\u0063\u0065s"));
};type OutputIntents struct{_dfa *_fb .PdfObjectArray ;_ea *Document ;_faa *_fb .PdfIndirectObject ;};func (_ge *Catalog )SetMarkInfo (mi _fb .PdfObject ){_gea :=_fb .MakeIndirectObject (mi );_ge .Object .Set ("\u004d\u0061\u0072\u006b\u0049\u006e\u0066\u006f",_gea );
_ge ._e .Objects =append (_ge ._e .Objects ,_gea );};type Content struct{Stream *_fb .PdfObjectStream ;_fd int ;_afe Page ;};func (_aae *Page )Number ()int {return _aae ._dfad };func _gdb (_dcg _fb .PdfObject )(_fb .PdfObjectName ,error ){var _gcb *_fb .PdfObjectName ;
var _gbbd *_fb .PdfObjectArray ;if _aee ,_dcd :=_dcg .(*_fb .PdfIndirectObject );_dcd {if _abc ,_dab :=_aee .PdfObject .(*_fb .PdfObjectArray );_dab {_gbbd =_abc ;}else if _cgc ,_gg :=_aee .PdfObject .(*_fb .PdfObjectName );_gg {_gcb =_cgc ;};}else if _aeg ,_ag :=_dcg .(*_fb .PdfObjectArray );
_ag {_gbbd =_aeg ;}else if _adf ,_gad :=_dcg .(*_fb .PdfObjectName );_gad {_gcb =_adf ;};if _gcb !=nil {switch *_gcb {case "\u0044\u0065\u0076\u0069\u0063\u0065\u0047\u0072\u0061\u0079","\u0044e\u0076\u0069\u0063\u0065\u0052\u0047B","\u0044\u0065\u0076\u0069\u0063\u0065\u0043\u004d\u0059\u004b":return *_gcb ,nil ;
case "\u0050a\u0074\u0074\u0065\u0072\u006e":return *_gcb ,nil ;};};if _gbbd !=nil &&_gbbd .Len ()> 0{if _bdb ,_fff :=_gbbd .Get (0).(*_fb .PdfObjectName );_fff {switch *_bdb {case "\u0044\u0065\u0076\u0069\u0063\u0065\u0047\u0072\u0061\u0079","\u0044e\u0076\u0069\u0063\u0065\u0052\u0047B","\u0044\u0065\u0076\u0069\u0063\u0065\u0043\u004d\u0059\u004b":if _gbbd .Len ()==1{return *_bdb ,nil ;
};case "\u0043a\u006c\u0047\u0072\u0061\u0079","\u0043\u0061\u006c\u0052\u0047\u0042","\u004c\u0061\u0062":return *_bdb ,nil ;case "\u0049\u0043\u0043\u0042\u0061\u0073\u0065\u0064","\u0050a\u0074\u0074\u0065\u0072\u006e","\u0049n\u0064\u0065\u0078\u0065\u0064":return *_bdb ,nil ;
case "\u0053\u0065\u0070\u0061\u0072\u0061\u0074\u0069\u006f\u006e","\u0044e\u0076\u0069\u0063\u0065\u004e":return *_bdb ,nil ;};};};return "",nil ;};func (_gbd *Document )AddIndirectObject (indirect *_fb .PdfIndirectObject ){for _ ,_gf :=range _gbd .Objects {if _gf ==indirect {return ;
};};_gbd .Objects =append (_gbd .Objects ,indirect );};func (_gcef Page )GetResourcesXObject ()(*_fb .PdfObjectDictionary ,bool ){_bc ,_dge :=_gcef .GetResources ();if !_dge {return nil ,false ;};return _fb .GetDict (_bc .Get ("\u0058O\u0062\u006a\u0065\u0063\u0074"));
};func (_af *Catalog )GetPages ()([]Page ,bool ){_fc ,_df :=_fb .GetDict (_af .Object .Get ("\u0050\u0061\u0067e\u0073"));if !_df {return nil ,false ;};_ed ,_c :=_fb .GetArray (_fc .Get ("\u004b\u0069\u0064\u0073"));if !_c {return nil ,false ;};_dg :=make ([]Page ,_ed .Len ());
for _da ,_afa :=range _ed .Elements (){_cc ,_b :=_fb .GetDict (_afa );if !_b {continue ;};_dg [_da ]=Page {Object :_cc ,_dfad :_da +1,_gcf :_af ._e };};return _dg ,true ;};func (_be *OutputIntents )Len ()int {return _be ._dfa .Len ()};func (_cef *Content )SetData (data []byte )error {_fgf ,_acf :=_fb .MakeStream (data ,_fb .NewFlateEncoder ());
if _acf !=nil {return _acf ;};_dgeb ,_fbg :=_fb .GetArray (_cef ._afe .Object .Get ("\u0043\u006f\u006e\u0074\u0065\u006e\u0074\u0073"));if !_fbg &&_cef ._fd ==0{_cef ._afe .Object .Set ("\u0043\u006f\u006e\u0074\u0065\u006e\u0074\u0073",_fgf );}else {if _acf =_dgeb .Set (_cef ._fd ,_fgf );
_acf !=nil {return _acf ;};};_cef ._afe ._gcf .Objects =append (_cef ._afe ._gcf .Objects ,_fgf );return nil ;};func (_faf *Document )FindCatalog ()(*Catalog ,bool ){var _eeg *_fb .PdfObjectDictionary ;for _ ,_gee :=range _faf .Objects {_cdg ,_ec :=_fb .GetDict (_gee );
if !_ec {continue ;};if _gd ,_dff :=_fb .GetName (_cdg .Get ("\u0054\u0079\u0070\u0065"));_dff &&*_gd =="\u0043a\u0074\u0061\u006c\u006f\u0067"{_eeg =_cdg ;break ;};};if _eeg ==nil {return nil ,false ;};return &Catalog {Object :_eeg ,_e :_faf },true ;};
func (_egd *Document )AddStream (stream *_fb .PdfObjectStream ){for _ ,_dfag :=range _egd .Objects {if _dfag ==stream {return ;};};_egd .Objects =append (_egd .Objects ,stream );};func (_ecd Page )FindXObjectImages ()([]*Image ,error ){_bce ,_ege :=_ecd .GetResourcesXObject ();
if !_ege {return nil ,nil ;};var _caa []*Image ;var _geag error ;_bga :=map[*_fb .PdfObjectStream ]int {};_fcg :=map[*_fb .PdfObjectStream ]struct{}{};var _ddg int ;for _ ,_gaf :=range _bce .Keys (){_ede ,_dae :=_fb .GetStream (_bce .Get (_gaf ));if !_dae {continue ;
};if _ ,_dffc :=_bga [_ede ];_dffc {continue ;};_ddb ,_bf :=_fb .GetName (_ede .Get ("\u0053u\u0062\u0074\u0079\u0070\u0065"));if !_bf ||_ddb .String ()!="\u0049\u006d\u0061g\u0065"{continue ;};_aga :=Image {BitsPerComponent :8,Stream :_ede ,Name :string (_gaf )};
if _aga .Colorspace ,_geag =_gdb (_ede .PdfObjectDictionary .Get ("\u0043\u006f\u006c\u006f\u0072\u0053\u0070\u0061\u0063\u0065"));_geag !=nil {_a .Log .Error ("\u0045\u0072\u0072\u006f\u0072\u0020\u0064\u0065\u0074\u0065r\u006d\u0069\u006e\u0065\u0020\u0063\u006fl\u006f\u0072\u0020\u0073\u0070\u0061\u0063\u0065\u0020\u0025\u0073",_geag );
continue ;};if _fbd ,_fcd :=_fb .GetIntVal (_ede .PdfObjectDictionary .Get ("\u0042\u0069t\u0073\u0050\u0065r\u0043\u006f\u006d\u0070\u006f\u006e\u0065\u006e\u0074"));_fcd {_aga .BitsPerComponent =_fbd ;};if _cbd ,_dda :=_fb .GetIntVal (_ede .PdfObjectDictionary .Get ("\u0057\u0069\u0064t\u0068"));
_dda {_aga .Width =_cbd ;};if _gadg ,_bde :=_fb .GetIntVal (_ede .PdfObjectDictionary .Get ("\u0048\u0065\u0069\u0067\u0068\u0074"));_bde {_aga .Height =_gadg ;};if _ccge ,_bda :=_fb .GetStream (_ede .Get ("\u0053\u004d\u0061s\u006b"));_bda {_aga .SMask =&ImageSMask {Image :&_aga ,Stream :_ccge };
_fcg [_ccge ]=struct{}{};};switch _aga .Colorspace {case "\u0044e\u0076\u0069\u0063\u0065\u0052\u0047B":_aga .ColorComponents =3;case "\u0044\u0065\u0076\u0069\u0063\u0065\u0047\u0072\u0061\u0079":_aga .ColorComponents =1;case "\u0044\u0065\u0076\u0069\u0063\u0065\u0043\u004d\u0059\u004b":_aga .ColorComponents =4;
default:_aga .ColorComponents =-1;};_bga [_ede ]=_ddg ;_caa =append (_caa ,&_aga );_ddg ++;};var _fe []int ;for _ ,_eag :=range _caa {if _eag .SMask !=nil {_gge ,_eed :=_bga [_eag .SMask .Stream ];if _eed {_fe =append (_fe ,_gge );};};};_bab :=make ([]*Image ,len (_caa )-len (_fe ));
_ddg =0;_gdd :for _dace ,_gafe :=range _caa {for _ ,_daec :=range _fe {if _dace ==_daec {continue _gdd ;};};_bab [_ddg ]=_gafe ;_ddg ++;};return _caa ,nil ;};func (_fa *Catalog )NewOutputIntents ()*OutputIntents {return &OutputIntents {_ea :_fa ._e }};
func (_daa *Document )GetPages ()([]Page ,bool ){_cac ,_bag :=_daa .FindCatalog ();if !_bag {return nil ,false ;};return _cac .GetPages ();};func (_ee *Catalog )SetMetadata (data []byte )error {_gbb ,_dd :=_fb .MakeStream (data ,nil );if _dd !=nil {return _dd ;
};_gbb .Set ("\u0054\u0079\u0070\u0065",_fb .MakeName ("\u004d\u0065\u0074\u0061\u0064\u0061\u0074\u0061"));_gbb .Set ("\u0053u\u0062\u0074\u0079\u0070\u0065",_fb .MakeName ("\u0058\u004d\u004c"));_ee .Object .Set ("\u004d\u0065\u0074\u0061\u0064\u0061\u0074\u0061",_gbb );
_ee ._e .Objects =append (_ee ._e .Objects ,_gbb );return nil ;};func (_ade Content )GetData ()([]byte ,error ){_bbd ,_egg :=_fb .NewEncoderFromStream (_ade .Stream );if _egg !=nil {return nil ,_egg ;};_bfd ,_egg :=_bbd .DecodeStream (_ade .Stream );if _egg !=nil {return nil ,_egg ;
};return _bfd ,nil ;};type Page struct{_dfad int ;Object *_fb .PdfObjectDictionary ;_gcf *Document ;};func (_ccd *Catalog )GetMarkInfo ()(*_fb .PdfObjectDictionary ,bool ){_ca ,_aa :=_fb .GetDict (_ccd .Object .Get ("\u004d\u0061\u0072\u006b\u0049\u006e\u0066\u006f"));
return _ca ,_aa ;};func (_fg *Catalog )SetVersion (){_fg .Object .Set ("\u0056e\u0072\u0073\u0069\u006f\u006e",_fb .MakeName (_d .Sprintf ("\u0025\u0064\u002e%\u0064",_fg ._e .Version .Major ,_fg ._e .Version .Minor )));};func (_ae *Catalog )HasMetadata ()bool {_gb :=_ae .Object .Get ("\u004d\u0065\u0074\u0061\u0064\u0061\u0074\u0061");
return _gb !=nil ;};type Image struct{Name string ;Width int ;Height int ;Colorspace _fb .PdfObjectName ;ColorComponents int ;BitsPerComponent int ;SMask *ImageSMask ;Stream *_fb .PdfObjectStream ;};