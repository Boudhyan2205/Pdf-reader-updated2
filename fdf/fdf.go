//
// Copyright 2020 FoxyUtils ehf. All rights reserved.
//
// This is a commercial product and requires a license to operate.
// A trial license can be obtained at https://unidoc.io
//
// DO NOT EDIT: generated by unitwist Go source code obfuscator.
//
// Use of this source code is governed by the UniDoc End User License Agreement
// terms that can be accessed at https://unidoc.io/eula/

// Package fdf provides support for loading form field data from Form Field Data (FDF) files.
package fdf ;import (_ec "bufio";_ee "bytes";_c "encoding/hex";_e "errors";_g "fmt";_dca "github.com/unidoc/unipdf/v3/common";_ca "github.com/unidoc/unipdf/v3/core";_ecd "io";_f "os";_da "regexp";_cd "sort";_dc "strconv";_d "strings";);func (_cecd *fdfParser )readAtLeast (_ge []byte ,_cad int )(int ,error ){_ef :=_cad ;
_ba :=0;_gd :=0;for _ef > 0{_bc ,_gcd :=_cecd ._bfa .Read (_ge [_ba :]);if _gcd !=nil {_dca .Log .Debug ("\u0045\u0052\u0052O\u0052\u0020\u0046\u0061i\u006c\u0065\u0064\u0020\u0072\u0065\u0061d\u0069\u006e\u0067\u0020\u0028\u0025\u0064\u003b\u0025\u0064\u0029\u0020\u0025\u0073",_bc ,_gd ,_gcd .Error ());
return _ba ,_e .New ("\u0066\u0061\u0069\u006c\u0065\u0064\u0020\u0072\u0065a\u0064\u0069\u006e\u0067");};_gd ++;_ba +=_bc ;_ef -=_bc ;};return _ba ,nil ;};

// FieldValues implements interface model.FieldValueProvider.
// Returns a map of field names to values (PdfObjects).
func (fdf *Data )FieldValues ()(map[string ]_ca .PdfObject ,error ){_gc ,_cff :=fdf .FieldDictionaries ();if _cff !=nil {return nil ,_cff ;};var _gg []string ;for _cec :=range _gc {_gg =append (_gg ,_cec );};_cd .Strings (_gg );_ad :=map[string ]_ca .PdfObject {};
for _ ,_ed :=range _gg {_fa :=_gc [_ed ];_eb :=_ca .TraceToDirectObject (_fa .Get ("\u0056"));_ad [_ed ]=_eb ;};return _ad ,nil ;};func (_cbc *fdfParser )parseArray ()(*_ca .PdfObjectArray ,error ){_abb :=_ca .MakeArray ();_cbc ._bfa .ReadByte ();for {_cbc .skipSpaces ();
_afc ,_dbfa :=_cbc ._bfa .Peek (1);if _dbfa !=nil {return _abb ,_dbfa ;};if _afc [0]==']'{_cbc ._bfa .ReadByte ();break ;};_ecac ,_dbfa :=_cbc .parseObject ();if _dbfa !=nil {return _abb ,_dbfa ;};_abb .Append (_ecac );};return _abb ,nil ;};func _bac (_cafd string )(*fdfParser ,error ){_cbgd :=fdfParser {};
_bcdg :=[]byte (_cafd );_aff :=_ee .NewReader (_bcdg );_cbgd ._cecb =_aff ;_cbgd ._fae =map[int64 ]_ca .PdfObject {};_aec :=_ec .NewReader (_aff );_cbgd ._bfa =_aec ;_cbgd ._ac =int64 (len (_cafd ));return &_cbgd ,_cbgd .parse ();};func (_bce *fdfParser )parseString ()(*_ca .PdfObjectString ,error ){_bce ._bfa .ReadByte ();
var _dbf _ee .Buffer ;_cce :=1;for {_cfc ,_afb :=_bce ._bfa .Peek (1);if _afb !=nil {return _ca .MakeString (_dbf .String ()),_afb ;};if _cfc [0]=='\\'{_bce ._bfa .ReadByte ();_fgbgd ,_ebg :=_bce ._bfa .ReadByte ();if _ebg !=nil {return _ca .MakeString (_dbf .String ()),_ebg ;
};if _ca .IsOctalDigit (_fgbgd ){_cbd ,_fe :=_bce ._bfa .Peek (2);if _fe !=nil {return _ca .MakeString (_dbf .String ()),_fe ;};var _ebae []byte ;_ebae =append (_ebae ,_fgbgd );for _ ,_feb :=range _cbd {if _ca .IsOctalDigit (_feb ){_ebae =append (_ebae ,_feb );
}else {break ;};};_bce ._bfa .Discard (len (_ebae )-1);_dca .Log .Trace ("\u004e\u0075\u006d\u0065ri\u0063\u0020\u0073\u0074\u0072\u0069\u006e\u0067\u0020\u0022\u0025\u0073\u0022",_ebae );_gge ,_fe :=_dc .ParseUint (string (_ebae ),8,32);if _fe !=nil {return _ca .MakeString (_dbf .String ()),_fe ;
};_dbf .WriteByte (byte (_gge ));continue ;};switch _fgbgd {case 'n':_dbf .WriteRune ('\n');case 'r':_dbf .WriteRune ('\r');case 't':_dbf .WriteRune ('\t');case 'b':_dbf .WriteRune ('\b');case 'f':_dbf .WriteRune ('\f');case '(':_dbf .WriteRune ('(');case ')':_dbf .WriteRune (')');
case '\\':_dbf .WriteRune ('\\');};continue ;}else if _cfc [0]=='('{_cce ++;}else if _cfc [0]==')'{_cce --;if _cce ==0{_bce ._bfa .ReadByte ();break ;};};_acf ,_ :=_bce ._bfa .ReadByte ();_dbf .WriteByte (_acf );};return _ca .MakeString (_dbf .String ()),nil ;
};var _cea =_da .MustCompile ("\u005e\u005b\u005c\u002b\u002d\u002e\u005d\u002a\u0028\u005b\u0030\u002d9\u002e\u005d\u002b\u0029");func (_fgbg *fdfParser )readComment ()(string ,error ){var _edc _ee .Buffer ;_ ,_dcc :=_fgbg .skipSpaces ();if _dcc !=nil {return _edc .String (),_dcc ;
};_agc :=true ;for {_eba ,_ff :=_fgbg ._bfa .Peek (1);if _ff !=nil {_dca .Log .Debug ("\u0045\u0072\u0072\u006f\u0072\u0020\u0025\u0073",_ff .Error ());return _edc .String (),_ff ;};if _agc &&_eba [0]!='%'{return _edc .String (),_e .New ("c\u006f\u006d\u006d\u0065\u006e\u0074 \u0073\u0068\u006f\u0075\u006c\u0064\u0020\u0073\u0074a\u0072\u0074\u0020w\u0069t\u0068\u0020\u0025");
};_agc =false ;if (_eba [0]!='\r')&&(_eba [0]!='\n'){_agf ,_ :=_fgbg ._bfa .ReadByte ();_edc .WriteByte (_agf );}else {break ;};};return _edc .String (),nil ;};func (_gf *fdfParser )skipSpaces ()(int ,error ){_ged :=0;for {_daa ,_dgg :=_gf ._bfa .ReadByte ();
if _dgg !=nil {return 0,_dgg ;};if _ca .IsWhiteSpace (_daa ){_ged ++;}else {_gf ._bfa .UnreadByte ();break ;};};return _ged ,nil ;};

// Root returns the Root of the FDF document.
func (_gcg *fdfParser )Root ()(*_ca .PdfObjectDictionary ,error ){if _gcg ._bde !=nil {if _afbg ,_gcgd :=_gcg .trace (_gcg ._bde .Get ("\u0052\u006f\u006f\u0074")).(*_ca .PdfObjectDictionary );_gcgd {if _deeg ,_age :=_gcg .trace (_afbg .Get ("\u0046\u0044\u0046")).(*_ca .PdfObjectDictionary );
_age {return _deeg ,nil ;};};};var _gbbe []int64 ;for _abd :=range _gcg ._fae {_gbbe =append (_gbbe ,_abd );};_cd .Slice (_gbbe ,func (_eefa ,_dga int )bool {return _gbbe [_eefa ]< _gbbe [_dga ]});for _ ,_fcb :=range _gbbe {_fgg :=_gcg ._fae [_fcb ];if _ccgg ,_ccc :=_gcg .trace (_fgg ).(*_ca .PdfObjectDictionary );
_ccc {if _faeeg ,_ded :=_gcg .trace (_ccgg .Get ("\u0046\u0044\u0046")).(*_ca .PdfObjectDictionary );_ded {return _faeeg ,nil ;};};};return nil ,_e .New ("\u0046\u0044\u0046\u0020\u006e\u006f\u0074\u0020\u0066\u006f\u0075\u006e\u0064");};func (_agd *fdfParser )parseNull ()(_ca .PdfObjectNull ,error ){_ ,_bef :=_agd ._bfa .Discard (4);
return _ca .PdfObjectNull {},_bef ;};var _cbg =_da .MustCompile ("\u0028\u005c\u0064\u002b)\\\u0073\u002b\u0028\u005c\u0064\u002b\u0029\u005c\u0073\u002b\u006f\u0062\u006a");var _dgf =_da .MustCompile ("\u0025\u0025\u0045O\u0046");func (_cfcb *fdfParser )parseObject ()(_ca .PdfObject ,error ){_dca .Log .Trace ("\u0052e\u0061d\u0020\u0064\u0069\u0072\u0065c\u0074\u0020o\u0062\u006a\u0065\u0063\u0074");
_cfcb .skipSpaces ();for {_ffe ,_febb :=_cfcb ._bfa .Peek (2);if _febb !=nil {return nil ,_febb ;};_dca .Log .Trace ("\u0050e\u0065k\u0020\u0073\u0074\u0072\u0069\u006e\u0067\u003a\u0020\u0025\u0073",string (_ffe ));if _ffe [0]=='/'{_dcae ,_ggf :=_cfcb .parseName ();
_dca .Log .Trace ("\u002d\u003e\u004ea\u006d\u0065\u003a\u0020\u0027\u0025\u0073\u0027",_dcae );return &_dcae ,_ggf ;}else if _ffe [0]=='('{_dca .Log .Trace ("\u002d>\u0053\u0074\u0072\u0069\u006e\u0067!");return _cfcb .parseString ();}else if _ffe [0]=='['{_dca .Log .Trace ("\u002d\u003e\u0041\u0072\u0072\u0061\u0079\u0021");
return _cfcb .parseArray ();}else if (_ffe [0]=='<')&&(_ffe [1]=='<'){_dca .Log .Trace ("\u002d>\u0044\u0069\u0063\u0074\u0021");return _cfcb .parseDict ();}else if _ffe [0]=='<'{_dca .Log .Trace ("\u002d\u003e\u0048\u0065\u0078\u0020\u0073\u0074\u0072\u0069\u006e\u0067\u0021");
return _cfcb .parseHexString ();}else if _ffe [0]=='%'{_cfcb .readComment ();_cfcb .skipSpaces ();}else {_dca .Log .Trace ("\u002d\u003eN\u0075\u006d\u0062e\u0072\u0020\u006f\u0072\u0020\u0072\u0065\u0066\u003f");_ffe ,_ =_cfcb ._bfa .Peek (15);_de :=string (_ffe );
_dca .Log .Trace ("\u0050\u0065\u0065k\u0020\u0073\u0074\u0072\u003a\u0020\u0025\u0073",_de );if (len (_de )> 3)&&(_de [:4]=="\u006e\u0075\u006c\u006c"){_bdd ,_fbg :=_cfcb .parseNull ();return &_bdd ,_fbg ;}else if (len (_de )> 4)&&(_de [:5]=="\u0066\u0061\u006cs\u0065"){_acg ,_ccd :=_cfcb .parseBool ();
return &_acg ,_ccd ;}else if (len (_de )> 3)&&(_de [:4]=="\u0074\u0072\u0075\u0065"){_df ,_cfe :=_cfcb .parseBool ();return &_df ,_cfe ;};_ggfa :=_beb .FindStringSubmatch (_de );if len (_ggfa )> 1{_ffe ,_ =_cfcb ._bfa .ReadBytes ('R');_dca .Log .Trace ("\u002d\u003e\u0020\u0021\u0052\u0065\u0066\u003a\u0020\u0027\u0025\u0073\u0027",string (_ffe [:]));
_ecdd ,_dfc :=_gag (string (_ffe ));return &_ecdd ,_dfc ;};_faf :=_cea .FindStringSubmatch (_de );if len (_faf )> 1{_dca .Log .Trace ("\u002d\u003e\u0020\u004e\u0075\u006d\u0062\u0065\u0072\u0021");return _cfcb .parseNumber ();};_faf =_fgb .FindStringSubmatch (_de );
if len (_faf )> 1{_dca .Log .Trace ("\u002d\u003e\u0020\u0045xp\u006f\u006e\u0065\u006e\u0074\u0069\u0061\u006c\u0020\u004e\u0075\u006d\u0062\u0065r\u0021");_dca .Log .Trace ("\u0025\u0020\u0073",_faf );return _cfcb .parseNumber ();};_dca .Log .Debug ("\u0045R\u0052\u004f\u0052\u0020U\u006e\u006b\u006e\u006f\u0077n\u0020(\u0070e\u0065\u006b\u0020\u0022\u0025\u0073\u0022)",_de );
return nil ,_e .New ("\u006f\u0062\u006a\u0065\u0063t\u0020\u0070\u0061\u0072\u0073\u0069\u006e\u0067\u0020\u0065\u0072\u0072\u006fr\u0020\u002d\u0020\u0075\u006e\u0065\u0078\u0070\u0065\u0063\u0074\u0065\u0064\u0020\u0070\u0061\u0074\u0074\u0065\u0072\u006e");
};};};func (_dgae *fdfParser )parse ()error {_dgae ._cecb .Seek (0,_ecd .SeekStart );_dgae ._bfa =_ec .NewReader (_dgae ._cecb );for {_dgae .skipComments ();_gee ,_cdd :=_dgae ._bfa .Peek (20);if _cdd !=nil {_dca .Log .Debug ("\u0045\u0052\u0052\u004f\u0052\u003a\u0020\u0046\u0061\u0069\u006c\u0020\u0074\u006f\u0020r\u0065a\u0064\u0020\u0069\u006e\u0064\u0069\u0072\u0065\u0063\u0074\u0020\u006f\u0062\u006a");
return _cdd ;};if _d .HasPrefix (string (_gee ),"\u0074r\u0061\u0069\u006c\u0065\u0072"){_dgae ._bfa .Discard (7);_dgae .skipSpaces ();_dgae .skipComments ();_dfd ,_ :=_dgae .parseDict ();_dgae ._bde =_dfd ;break ;};_agff :=_cbg .FindStringSubmatchIndex (string (_gee ));
if len (_agff )< 6{_dca .Log .Debug ("\u0045\u0052\u0052\u004f\u0052\u003a\u0020U\u006e\u0061\u0062l\u0065\u0020\u0074\u006f \u0066\u0069\u006e\u0064\u0020\u006f\u0062\u006a\u0065\u0063\u0074\u0020\u0073\u0069\u0067\u006e\u0061\u0074\u0075\u0072\u0065\u0020\u0028\u0025\u0073\u0029",string (_gee ));
return _e .New ("\u0075\u006e\u0061b\u006c\u0065\u0020\u0074\u006f\u0020\u0064\u0065\u0074\u0065\u0063\u0074\u0020\u0069\u006e\u0064\u0069\u0072\u0065\u0063\u0074\u0020\u006f\u0062\u006a\u0065\u0063\u0074\u0020s\u0069\u0067\u006e\u0061\u0074\u0075\u0072\u0065");
};_ggd ,_cdd :=_dgae .parseIndirectObject ();if _cdd !=nil {return _cdd ;};switch _gdc :=_ggd .(type ){case *_ca .PdfIndirectObject :_dgae ._fae [_gdc .ObjectNumber ]=_gdc ;case *_ca .PdfObjectStream :_dgae ._fae [_gdc .ObjectNumber ]=_gdc ;default:return _e .New ("\u0074\u0079\u0070\u0065\u0020\u0065\u0072\u0072\u006f\u0072");
};};return nil ;};func (_bec *fdfParser )seekToEOFMarker (_cgd int64 )error {_adg :=int64 (0);_cca :=int64 (1000);for _adg < _cgd {if _cgd <=(_cca +_adg ){_cca =_cgd -_adg ;};_ ,_aefe :=_bec ._cecb .Seek (-_adg -_cca ,_ecd .SeekEnd );if _aefe !=nil {return _aefe ;
};_cdg :=make ([]byte ,_cca );_bec ._cecb .Read (_cdg );_dca .Log .Trace ("\u004c\u006f\u006f\u006bi\u006e\u0067\u0020\u0066\u006f\u0072\u0020\u0045\u004f\u0046 \u006da\u0072\u006b\u0065\u0072\u003a\u0020\u0022%\u0073\u0022",string (_cdg ));_fcde :=_dgf .FindAllStringIndex (string (_cdg ),-1);
if _fcde !=nil {_cegf :=_fcde [len (_fcde )-1];_dca .Log .Trace ("\u0049\u006e\u0064\u003a\u0020\u0025\u0020\u0064",_fcde );_bec ._cecb .Seek (-_adg -_cca +int64 (_cegf [0]),_ecd .SeekEnd );return nil ;};_dca .Log .Debug ("\u0057\u0061\u0072\u006e\u0069\u006eg\u003a\u0020\u0045\u004f\u0046\u0020\u006d\u0061\u0072\u006b\u0065\u0072\u0020\u006e\u006f\u0074\u0020\u0066\u006f\u0075n\u0064\u0021\u0020\u002d\u0020\u0063\u006f\u006e\u0074\u0069\u006e\u0075\u0065\u0020s\u0065e\u006b\u0069\u006e\u0067");
_adg +=_cca ;};_dca .Log .Debug ("\u0045\u0072\u0072\u006f\u0072\u003a\u0020\u0045\u004f\u0046\u0020\u006d\u0061\u0072\u006be\u0072 \u0077\u0061\u0073\u0020\u006e\u006f\u0074\u0020\u0066\u006f\u0075\u006e\u0064\u002e");return _e .New ("\u0045\u004f\u0046\u0020\u006e\u006f\u0074\u0020\u0066\u006f\u0075\u006e\u0064");
};type fdfParser struct{_ebf int ;_bbe int ;_fae map[int64 ]_ca .PdfObject ;_cecb _ecd .ReadSeeker ;_bfa *_ec .Reader ;_ac int64 ;_bde *_ca .PdfObjectDictionary ;};func _gag (_dad string )(_ca .PdfObjectReference ,error ){_dcb :=_ca .PdfObjectReference {};
_gae :=_beb .FindStringSubmatch (_dad );if len (_gae )< 3{_dca .Log .Debug ("\u0045\u0072\u0072or\u0020\u0070\u0061\u0072\u0073\u0069\u006e\u0067\u0020\u0072\u0065\u0066\u0065\u0072\u0065\u006e\u0063\u0065");return _dcb ,_e .New ("\u0075n\u0061\u0062\u006c\u0065 \u0074\u006f\u0020\u0070\u0061r\u0073e\u0020r\u0065\u0066\u0065\u0072\u0065\u006e\u0063e");
};_ea ,_aca :=_dc .Atoi (_gae [1]);if _aca !=nil {_dca .Log .Debug ("\u0045\u0072\u0072\u006f\u0072\u0020\u0070a\u0072\u0073\u0069n\u0067\u0020\u006fb\u006a\u0065c\u0074\u0020\u006e\u0075\u006d\u0062e\u0072 '\u0025\u0073\u0027\u0020\u002d\u0020\u0055\u0073\u0069\u006e\u0067\u0020\u006f\u0062\u006a\u0065\u0063\u0074\u0020\u006e\u0075\u006d\u0020\u003d\u0020\u0030",_gae [1]);
return _dcb ,nil ;};_dcb .ObjectNumber =int64 (_ea );_ecb ,_aca :=_dc .Atoi (_gae [2]);if _aca !=nil {_dca .Log .Debug ("\u0045\u0072r\u006f\u0072\u0020\u0070\u0061r\u0073\u0069\u006e\u0067\u0020g\u0065\u006e\u0065\u0072\u0061\u0074\u0069\u006f\u006e\u0020\u006e\u0075\u006d\u0062\u0065\u0072\u0020\u0027\u0025\u0073\u0027\u0020\u002d\u0020\u0055\u0073\u0069\u006e\u0067\u0020\u0067\u0065\u006e\u0020\u003d\u0020\u0030",_gae [2]);
return _dcb ,nil ;};_dcb .GenerationNumber =int64 (_ecb );return _dcb ,nil ;};var _beb =_da .MustCompile ("^\u005c\u0073\u002a\u0028\\d\u002b)\u005c\u0073\u002b\u0028\u005cd\u002b\u0029\u005c\u0073\u002b\u0052");

// Data represents forms data format (FDF) file data.
type Data struct{_b *_ca .PdfObjectDictionary ;_bb *_ca .PdfObjectArray ;};func _gab (_fag _ecd .ReadSeeker )(*fdfParser ,error ){_ecbc :=&fdfParser {};_ecbc ._cecb =_fag ;_ecbc ._fae =map[int64 ]_ca .PdfObject {};_dbd ,_cdgb ,_agfg :=_ecbc .parseFdfVersion ();
if _agfg !=nil {_dca .Log .Error ("U\u006e\u0061\u0062\u006c\u0065\u0020t\u006f\u0020\u0070\u0061\u0072\u0073\u0065\u0020\u0076e\u0072\u0073\u0069o\u006e:\u0020\u0025\u0076",_agfg );return nil ,_agfg ;};_ecbc ._ebf =_dbd ;_ecbc ._bbe =_cdgb ;_agfg =_ecbc .parse ();
return _ecbc ,_agfg ;};func (_eda *fdfParser )parseFdfVersion ()(int ,int ,error ){_eda ._cecb .Seek (0,_ecd .SeekStart );_gb :=20;_gce :=make ([]byte ,_gb );_eda ._cecb .Read (_gce );_gda :=_ga .FindStringSubmatch (string (_gce ));if len (_gda )< 3{_gaea ,_bgge ,_faee :=_eda .seekFdfVersionTopDown ();
if _faee !=nil {_dca .Log .Debug ("F\u0061\u0069\u006c\u0065\u0064\u0020\u0072\u0065\u0063\u006f\u0076\u0065\u0072\u0079\u0020\u002d\u0020\u0075n\u0061\u0062\u006c\u0065\u0020\u0074\u006f\u0020\u0066\u0069nd\u0020\u0076\u0065r\u0073i\u006f\u006e");return 0,0,_faee ;
};return _gaea ,_bgge ,nil ;};_bad ,_aee :=_dc .Atoi (_gda [1]);if _aee !=nil {return 0,0,_aee ;};_dfca ,_aee :=_dc .Atoi (_gda [2]);if _aee !=nil {return 0,0,_aee ;};_dca .Log .Debug ("\u0046\u0064\u0066\u0020\u0076\u0065\u0072\u0073\u0069\u006f\u006e\u0020%\u0064\u002e\u0025\u0064",_bad ,_dfca );
return _bad ,_dfca ,nil ;};func (_ae *fdfParser )readTextLine ()(string ,error ){var _cee _ee .Buffer ;for {_eef ,_ecab :=_ae ._bfa .Peek (1);if _ecab !=nil {_dca .Log .Debug ("\u0045\u0072\u0072\u006f\u0072\u0020\u0025\u0073",_ecab .Error ());return _cee .String (),_ecab ;
};if (_eef [0]!='\r')&&(_eef [0]!='\n'){_cc ,_ :=_ae ._bfa .ReadByte ();_cee .WriteByte (_cc );}else {break ;};};return _cee .String (),nil ;};func (_abc *fdfParser )parseBool ()(_ca .PdfObjectBool ,error ){_dcd ,_fd :=_abc ._bfa .Peek (4);if _fd !=nil {return _ca .PdfObjectBool (false ),_fd ;
};if (len (_dcd )>=4)&&(string (_dcd [:4])=="\u0074\u0072\u0075\u0065"){_abc ._bfa .Discard (4);return _ca .PdfObjectBool (true ),nil ;};_dcd ,_fd =_abc ._bfa .Peek (5);if _fd !=nil {return _ca .PdfObjectBool (false ),_fd ;};if (len (_dcd )>=5)&&(string (_dcd [:5])=="\u0066\u0061\u006cs\u0065"){_abc ._bfa .Discard (5);
return _ca .PdfObjectBool (false ),nil ;};return _ca .PdfObjectBool (false ),_e .New ("\u0075n\u0065\u0078\u0070\u0065c\u0074\u0065\u0064\u0020\u0062o\u006fl\u0065a\u006e\u0020\u0073\u0074\u0072\u0069\u006eg");};func (_cgb *fdfParser )parseNumber ()(_ca .PdfObject ,error ){return _ca .ParseNumber (_cgb ._bfa )};
var _ga =_da .MustCompile ("\u0025F\u0044F\u002d\u0028\u005c\u0064\u0029\u005c\u002e\u0028\u005c\u0064\u0029");func (_bd *fdfParser )setFileOffset (_bfd int64 ){_bd ._cecb .Seek (_bfd ,_ecd .SeekStart );_bd ._bfa =_ec .NewReader (_bd ._cecb );};func (_bcd *fdfParser )parseHexString ()(*_ca .PdfObjectString ,error ){_bcd ._bfa .ReadByte ();
var _fcd _ee .Buffer ;for {_fca ,_bgg :=_bcd ._bfa .Peek (1);if _bgg !=nil {return _ca .MakeHexString (""),_bgg ;};if _fca [0]=='>'{_bcd ._bfa .ReadByte ();break ;};_faa ,_ :=_bcd ._bfa .ReadByte ();if !_ca .IsWhiteSpace (_faa ){_fcd .WriteByte (_faa );
};};if _fcd .Len ()%2==1{_fcd .WriteRune ('0');};_baf ,_cac :=_c .DecodeString (_fcd .String ());if _cac !=nil {_dca .Log .Debug ("\u0045\u0052\u0052\u004f\u0052\u0020\u0050\u0061\u0072\u0073\u0069\u006e\u0067\u0020\u0068\u0065\u0078\u0020\u0073\u0074r\u0069\u006e\u0067\u003a\u0020\u0027\u0025\u0073\u0027 \u002d\u0020\u0072\u0065\u0074\u0075\u0072\u006e\u0069\u006e\u0067\u0020\u0061n\u0020\u0065\u006d\u0070\u0074\u0079 \u0073\u0074\u0072i\u006e\u0067",_fcd .String ());
return _ca .MakeHexString (""),nil ;};return _ca .MakeHexString (string (_baf )),nil ;};func (_cecc *fdfParser )parseName ()(_ca .PdfObjectName ,error ){var _gdb _ee .Buffer ;_db :=false ;for {_aed ,_bdf :=_cecc ._bfa .Peek (1);if _bdf ==_ecd .EOF {break ;
};if _bdf !=nil {return _ca .PdfObjectName (_gdb .String ()),_bdf ;};if !_db {if _aed [0]=='/'{_db =true ;_cecc ._bfa .ReadByte ();}else if _aed [0]=='%'{_cecc .readComment ();_cecc .skipSpaces ();}else {_dca .Log .Debug ("\u0045\u0052\u0052\u004f\u0052\u0020N\u0061\u006d\u0065\u0020\u0073\u0074\u0061\u0072\u0074\u0069\u006e\u0067\u0020w\u0069\u0074\u0068\u0020\u0025\u0073\u0020(\u0025\u0020\u0078\u0029",_aed ,_aed );
return _ca .PdfObjectName (_gdb .String ()),_g .Errorf ("\u0069n\u0076a\u006c\u0069\u0064\u0020\u006ea\u006d\u0065:\u0020\u0028\u0025\u0063\u0029",_aed [0]);};}else {if _ca .IsWhiteSpace (_aed [0]){break ;}else if (_aed [0]=='/')||(_aed [0]=='[')||(_aed [0]=='(')||(_aed [0]==']')||(_aed [0]=='<')||(_aed [0]=='>'){break ;
}else if _aed [0]=='#'{_fb ,_bg :=_cecc ._bfa .Peek (3);if _bg !=nil {return _ca .PdfObjectName (_gdb .String ()),_bg ;};_cecc ._bfa .Discard (3);_caf ,_bg :=_c .DecodeString (string (_fb [1:3]));if _bg !=nil {return _ca .PdfObjectName (_gdb .String ()),_bg ;
};_gdb .Write (_caf );}else {_ecaf ,_ :=_cecc ._bfa .ReadByte ();_gdb .WriteByte (_ecaf );};};};return _ca .PdfObjectName (_gdb .String ()),nil ;};var _fgb =_da .MustCompile ("\u005e\u005b\u005c+-\u002e\u005d\u002a\u0028\u005b\u0030\u002d\u0039\u002e]\u002b)\u0065[\u005c+\u002d\u002e\u005d\u002a\u0028\u005b\u0030\u002d\u0039\u002e\u005d\u002b\u0029");
func (_ccgd *fdfParser )trace (_badb _ca .PdfObject )_ca .PdfObject {switch _fge :=_badb .(type ){case *_ca .PdfObjectReference :_ebgg ,_dfa :=_ccgd ._fae [_fge .ObjectNumber ].(*_ca .PdfIndirectObject );if _dfa {return _ebgg .PdfObject ;};_dca .Log .Debug ("\u0054\u0079\u0070\u0065\u0020\u0065\u0072\u0072\u006f\u0072");
return nil ;case *_ca .PdfIndirectObject :return _fge .PdfObject ;};return _badb ;};func (_fdg *fdfParser )parseIndirectObject ()(_ca .PdfObject ,error ){_acae :=_ca .PdfIndirectObject {};_dca .Log .Trace ("\u002dR\u0065a\u0064\u0020\u0069\u006e\u0064i\u0072\u0065c\u0074\u0020\u006f\u0062\u006a");
_fad ,_bgd :=_fdg ._bfa .Peek (20);if _bgd !=nil {_dca .Log .Debug ("\u0045\u0052\u0052\u004f\u0052\u003a\u0020\u0046\u0061\u0069\u006c\u0020\u0074\u006f\u0020r\u0065a\u0064\u0020\u0069\u006e\u0064\u0069\u0072\u0065\u0063\u0074\u0020\u006f\u0062\u006a");
return &_acae ,_bgd ;};_dca .Log .Trace ("\u0028\u0069\u006edi\u0072\u0065\u0063\u0074\u0020\u006f\u0062\u006a\u0020\u0070\u0065\u0065\u006b\u0020\u0022\u0025\u0073\u0022",string (_fad ));_cgc :=_cbg .FindStringSubmatchIndex (string (_fad ));if len (_cgc )< 6{_dca .Log .Debug ("\u0045\u0052\u0052\u004f\u0052\u003a\u0020U\u006e\u0061\u0062l\u0065\u0020\u0074\u006f \u0066\u0069\u006e\u0064\u0020\u006f\u0062\u006a\u0065\u0063\u0074\u0020\u0073\u0069\u0067\u006e\u0061\u0074\u0075\u0072\u0065\u0020\u0028\u0025\u0073\u0029",string (_fad ));
return &_acae ,_e .New ("\u0075\u006e\u0061b\u006c\u0065\u0020\u0074\u006f\u0020\u0064\u0065\u0074\u0065\u0063\u0074\u0020\u0069\u006e\u0064\u0069\u0072\u0065\u0063\u0074\u0020\u006f\u0062\u006a\u0065\u0063\u0074\u0020s\u0069\u0067\u006e\u0061\u0074\u0075\u0072\u0065");
};_fdg ._bfa .Discard (_cgc [0]);_dca .Log .Trace ("O\u0066\u0066\u0073\u0065\u0074\u0073\u0020\u0025\u0020\u0064",_cgc );_daadc :=_cgc [1]-_cgc [0];_cged :=make ([]byte ,_daadc );_ ,_bgd =_fdg .readAtLeast (_cged ,_daadc );if _bgd !=nil {_dca .Log .Debug ("\u0045\u0052\u0052\u004f\u0052\u003a\u0020\u0075\u006e\u0061\u0062l\u0065\u0020\u0074\u006f\u0020\u0072\u0065\u0061\u0064\u0020-\u0020\u0025\u0073",_bgd );
return nil ,_bgd ;};_dca .Log .Trace ("\u0074\u0065\u0078t\u006c\u0069\u006e\u0065\u003a\u0020\u0025\u0073",_cged );_dee :=_cbg .FindStringSubmatch (string (_cged ));if len (_dee )< 3{_dca .Log .Debug ("\u0045\u0052\u0052\u004f\u0052\u003a\u0020U\u006e\u0061\u0062l\u0065\u0020\u0074\u006f \u0066\u0069\u006e\u0064\u0020\u006f\u0062\u006a\u0065\u0063\u0074\u0020\u0073\u0069\u0067\u006e\u0061\u0074\u0075\u0072\u0065\u0020\u0028\u0025\u0073\u0029",string (_cged ));
return &_acae ,_e .New ("\u0075\u006e\u0061b\u006c\u0065\u0020\u0074\u006f\u0020\u0064\u0065\u0074\u0065\u0063\u0074\u0020\u0069\u006e\u0064\u0069\u0072\u0065\u0063\u0074\u0020\u006f\u0062\u006a\u0065\u0063\u0074\u0020s\u0069\u0067\u006e\u0061\u0074\u0075\u0072\u0065");
};_ccf ,_ :=_dc .Atoi (_dee [1]);_cab ,_ :=_dc .Atoi (_dee [2]);_acae .ObjectNumber =int64 (_ccf );_acae .GenerationNumber =int64 (_cab );for {_aba ,_fcff :=_fdg ._bfa .Peek (2);if _fcff !=nil {return &_acae ,_fcff ;};_dca .Log .Trace ("I\u006ed\u002e\u0020\u0070\u0065\u0065\u006b\u003a\u0020%\u0073\u0020\u0028\u0025 x\u0029\u0021",string (_aba ),string (_aba ));
if _ca .IsWhiteSpace (_aba [0]){_fdg .skipSpaces ();}else if _aba [0]=='%'{_fdg .skipComments ();}else if (_aba [0]=='<')&&(_aba [1]=='<'){_dca .Log .Trace ("\u0043\u0061\u006c\u006c\u0020\u0050\u0061\u0072\u0073e\u0044\u0069\u0063\u0074");_acae .PdfObject ,_fcff =_fdg .parseDict ();
_dca .Log .Trace ("\u0045\u004f\u0046\u0020Ca\u006c\u006c\u0020\u0050\u0061\u0072\u0073\u0065\u0044\u0069\u0063\u0074\u003a\u0020%\u0076",_fcff );if _fcff !=nil {return &_acae ,_fcff ;};_dca .Log .Trace ("\u0050\u0061\u0072\u0073\u0065\u0064\u0020\u0064\u0069\u0063t\u0069\u006f\u006e\u0061\u0072\u0079\u002e.\u002e\u0020\u0066\u0069\u006e\u0069\u0073\u0068\u0065\u0064\u002e");
}else if (_aba [0]=='/')||(_aba [0]=='(')||(_aba [0]=='[')||(_aba [0]=='<'){_acae .PdfObject ,_fcff =_fdg .parseObject ();if _fcff !=nil {return &_acae ,_fcff ;};_dca .Log .Trace ("P\u0061\u0072\u0073\u0065\u0064\u0020o\u0062\u006a\u0065\u0063\u0074\u0020\u002e\u002e\u002e \u0066\u0069\u006ei\u0073h\u0065\u0064\u002e");
}else {if _aba [0]=='e'{_gbb ,_cgf :=_fdg .readTextLine ();if _cgf !=nil {return nil ,_cgf ;};if len (_gbb )>=6&&_gbb [0:6]=="\u0065\u006e\u0064\u006f\u0062\u006a"{break ;};}else if _aba [0]=='s'{_aba ,_ =_fdg ._bfa .Peek (10);if string (_aba [:6])=="\u0073\u0074\u0072\u0065\u0061\u006d"{_acfd :=6;
if len (_aba )> 6{if _ca .IsWhiteSpace (_aba [_acfd ])&&_aba [_acfd ]!='\r'&&_aba [_acfd ]!='\n'{_dca .Log .Debug ("\u004e\u006fn\u002d\u0063\u006f\u006e\u0066\u006f\u0072\u006d\u0061\u006e\u0074\u0020\u0046\u0044\u0046\u0020\u006e\u006f\u0074 \u0065\u006e\u0064\u0069\u006e\u0067 \u0073\u0074\u0072\u0065\u0061\u006d\u0020\u006c\u0069\u006e\u0065\u0020\u0070\u0072o\u0070\u0065r\u006c\u0079\u0020\u0077i\u0074\u0068\u0020\u0045\u004fL\u0020\u006d\u0061\u0072\u006b\u0065\u0072");
_acfd ++;};if _aba [_acfd ]=='\r'{_acfd ++;if _aba [_acfd ]=='\n'{_acfd ++;};}else if _aba [_acfd ]=='\n'{_acfd ++;};};_fdg ._bfa .Discard (_acfd );_ecg ,_ebgf :=_acae .PdfObject .(*_ca .PdfObjectDictionary );if !_ebgf {return nil ,_e .New ("\u0073\u0074\u0072\u0065\u0061\u006d\u0020\u006f\u0062\u006a\u0065\u0063\u0074\u0020\u006di\u0073s\u0069\u006e\u0067\u0020\u0064\u0069\u0063\u0074\u0069\u006f\u006e\u0061\u0072\u0079");
};_dca .Log .Trace ("\u0053\u0074\u0072\u0065\u0061\u006d\u0020\u0064\u0069c\u0074\u0020\u0025\u0073",_ecg );_ccg ,_add :=_ecg .Get ("\u004c\u0065\u006e\u0067\u0074\u0068").(*_ca .PdfObjectInteger );if !_add {return nil ,_e .New ("\u0073\u0074re\u0061\u006d\u0020l\u0065\u006e\u0067\u0074h n\u0065ed\u0073\u0020\u0074\u006f\u0020\u0062\u0065 a\u006e\u0020\u0069\u006e\u0074\u0065\u0067e\u0072");
};_ege :=*_ccg ;if _ege < 0{return nil ,_e .New ("\u0073\u0074\u0072\u0065\u0061\u006d\u0020\u006e\u0065\u0065\u0064\u0073\u0020\u0074\u006f \u0062e\u0020\u006c\u006f\u006e\u0067\u0065\u0072\u0020\u0074\u0068\u0061\u006e\u0020\u0030");};if int64 (_ege )> _fdg ._ac {_dca .Log .Debug ("\u0045\u0052R\u004f\u0052\u003a\u0020\u0053t\u0072\u0065\u0061\u006d\u0020l\u0065\u006e\u0067\u0074\u0068\u0020\u0063\u0061\u006e\u006e\u006f\u0074\u0020\u0062\u0065\u0020\u006c\u0061\u0072\u0067\u0065\u0072\u0020\u0074\u0068\u0061\u006e\u0020\u0066\u0069\u006c\u0065\u0020\u0073\u0069\u007a\u0065");
return nil ,_e .New ("\u0069n\u0076\u0061l\u0069\u0064\u0020\u0073t\u0072\u0065\u0061m\u0020\u006c\u0065\u006e\u0067\u0074\u0068\u002c\u0020la\u0072\u0067\u0065r\u0020\u0074h\u0061\u006e\u0020\u0066\u0069\u006ce\u0020\u0073i\u007a\u0065");};_ffd :=make ([]byte ,_ege );
_ ,_fcff =_fdg .readAtLeast (_ffd ,int (_ege ));if _fcff !=nil {_dca .Log .Debug ("E\u0052\u0052\u004f\u0052 s\u0074r\u0065\u0061\u006d\u0020\u0028%\u0064\u0029\u003a\u0020\u0025\u0058",len (_ffd ),_ffd );_dca .Log .Debug ("\u0045R\u0052\u004f\u0052\u003a\u0020\u0025v",_fcff );
return nil ,_fcff ;};_bfb :=_ca .PdfObjectStream {};_bfb .Stream =_ffd ;_bfb .PdfObjectDictionary =_acae .PdfObject .(*_ca .PdfObjectDictionary );_bfb .ObjectNumber =_acae .ObjectNumber ;_bfb .GenerationNumber =_acae .GenerationNumber ;_fdg .skipSpaces ();
_fdg ._bfa .Discard (9);_fdg .skipSpaces ();return &_bfb ,nil ;};};_acae .PdfObject ,_fcff =_fdg .parseObject ();return &_acae ,_fcff ;};};_dca .Log .Trace ("\u0052\u0065\u0074\u0075rn\u0069\u006e\u0067\u0020\u0069\u006e\u0064\u0069\u0072\u0065\u0063\u0074\u0021");
return &_acae ,nil ;};func (_ebe *fdfParser )seekFdfVersionTopDown ()(int ,int ,error ){_ebe ._cecb .Seek (0,_ecd .SeekStart );_ebe ._bfa =_ec .NewReader (_ebe ._cecb );_eaa :=20;_fea :=make ([]byte ,_eaa );for {_ebb ,_afbgf :=_ebe ._bfa .ReadByte ();if _afbgf !=nil {if _afbgf ==_ecd .EOF {break ;
}else {return 0,0,_afbgf ;};};if _ca .IsDecimalDigit (_ebb )&&_fea [_eaa -1]=='.'&&_ca .IsDecimalDigit (_fea [_eaa -2])&&_fea [_eaa -3]=='-'&&_fea [_eaa -4]=='F'&&_fea [_eaa -5]=='D'&&_fea [_eaa -6]=='P'{_fga :=int (_fea [_eaa -2]-'0');_bfba :=int (_ebb -'0');
return _fga ,_bfba ,nil ;};_fea =append (_fea [1:_eaa ],_ebb );};return 0,0,_e .New ("\u0076\u0065\u0072\u0073\u0069\u006f\u006e\u0020\u006e\u006f\u0074\u0020f\u006f\u0075\u006e\u0064");};func (_bbd *fdfParser )parseDict ()(*_ca .PdfObjectDictionary ,error ){_dca .Log .Trace ("\u0052\u0065\u0061\u0064\u0069\u006e\u0067\u0020\u0046\u0044\u0046\u0020D\u0069\u0063\u0074\u0021");
_bbda :=_ca .MakeDict ();_bcb ,_ :=_bbd ._bfa .ReadByte ();if _bcb !='<'{return nil ,_e .New ("\u0069\u006e\u0076a\u006c\u0069\u0064\u0020\u0064\u0069\u0063\u0074");};_bcb ,_ =_bbd ._bfa .ReadByte ();if _bcb !='<'{return nil ,_e .New ("\u0069\u006e\u0076a\u006c\u0069\u0064\u0020\u0064\u0069\u0063\u0074");
};for {_bbd .skipSpaces ();_bbd .skipComments ();_bee ,_fgf :=_bbd ._bfa .Peek (2);if _fgf !=nil {return nil ,_fgf ;};_dca .Log .Trace ("D\u0069c\u0074\u0020\u0070\u0065\u0065\u006b\u003a\u0020%\u0073\u0020\u0028\u0025 x\u0029\u0021",string (_bee ),string (_bee ));
if (_bee [0]=='>')&&(_bee [1]=='>'){_dca .Log .Trace ("\u0045\u004f\u0046\u0020\u0064\u0069\u0063\u0074\u0069o\u006e\u0061\u0072\u0079");_bbd ._bfa .ReadByte ();_bbd ._bfa .ReadByte ();break ;};_dca .Log .Trace ("\u0050a\u0072s\u0065\u0020\u0074\u0068\u0065\u0020\u006e\u0061\u006d\u0065\u0021");
_egd ,_fgf :=_bbd .parseName ();_dca .Log .Trace ("\u004be\u0079\u003a\u0020\u0025\u0073",_egd );if _fgf !=nil {_dca .Log .Debug ("E\u0052\u0052\u004f\u0052\u0020\u0052e\u0074\u0075\u0072\u006e\u0069\u006e\u0067\u0020\u006ea\u006d\u0065\u0020e\u0072r\u0020\u0025\u0073",_fgf );
return nil ,_fgf ;};if len (_egd )> 4&&_egd [len (_egd )-4:]=="\u006e\u0075\u006c\u006c"{_ffec :=_egd [0:len (_egd )-4];_dca .Log .Debug ("\u0054\u0061\u006b\u0069n\u0067\u0020\u0063\u0061\u0072\u0065\u0020\u006f\u0066\u0020n\u0075l\u006c\u0020\u0062\u0075\u0067\u0020\u0028%\u0073\u0029",_egd );
_dca .Log .Debug ("\u004e\u0065\u0077\u0020ke\u0079\u0020\u0022\u0025\u0073\u0022\u0020\u003d\u0020\u006e\u0075\u006c\u006c",_ffec );_bbd .skipSpaces ();_afd ,_ :=_bbd ._bfa .Peek (1);if _afd [0]=='/'{_bbda .Set (_ffec ,_ca .MakeNull ());continue ;};};
_bbd .skipSpaces ();_bfg ,_fgf :=_bbd .parseObject ();if _fgf !=nil {return nil ,_fgf ;};_bbda .Set (_egd ,_bfg );_dca .Log .Trace ("\u0064\u0069\u0063\u0074\u005b\u0025\u0073\u005d\u0020\u003d\u0020\u0025\u0073",_egd ,_bfg .String ());};_dca .Log .Trace ("\u0072\u0065\u0074\u0075rn\u0069\u006e\u0067\u0020\u0046\u0044\u0046\u0020\u0044\u0069\u0063\u0074\u0021");
return _bbda ,nil ;};

// Load loads FDF form data from `r`.
func Load (r _ecd .ReadSeeker )(*Data ,error ){_af ,_cb :=_gab (r );if _cb !=nil {return nil ,_cb ;};_ce ,_cb :=_af .Root ();if _cb !=nil {return nil ,_cb ;};_be ,_cf :=_ca .GetArray (_ce .Get ("\u0046\u0069\u0065\u006c\u0064\u0073"));if !_cf {return nil ,_e .New ("\u0066\u0069\u0065\u006c\u0064\u0073\u0020\u006d\u0069s\u0073\u0069\u006e\u0067");
};return &Data {_bb :_be ,_b :_ce },nil ;};func (_eca *fdfParser )getFileOffset ()int64 {_ggb ,_ :=_eca ._cecb .Seek (0,_ecd .SeekCurrent );_ggb -=int64 (_eca ._bfa .Buffered ());return _ggb ;};func (_cge *fdfParser )skipComments ()error {if _ ,_edf :=_cge .skipSpaces ();
_edf !=nil {return _edf ;};_ecaa :=true ;for {_daad ,_bbg :=_cge ._bfa .Peek (1);if _bbg !=nil {_dca .Log .Debug ("\u0045\u0072\u0072\u006f\u0072\u0020\u0025\u0073",_bbg .Error ());return _bbg ;};if _ecaa &&_daad [0]!='%'{return nil ;};_ecaa =false ;if (_daad [0]!='\r')&&(_daad [0]!='\n'){_cge ._bfa .ReadByte ();
}else {break ;};};return _cge .skipComments ();};

// FieldDictionaries returns a map of field names to field dictionaries.
func (fdf *Data )FieldDictionaries ()(map[string ]*_ca .PdfObjectDictionary ,error ){_ceg :=map[string ]*_ca .PdfObjectDictionary {};for _cg :=0;_cg < fdf ._bb .Len ();_cg ++{_fc ,_fg :=_ca .GetDict (fdf ._bb .Get (_cg ));if _fg {_aa ,_ :=_ca .GetString (_fc .Get ("\u0054"));
if _aa !=nil {_ceg [_aa .Str ()]=_fc ;};};};return _ceg ,nil ;};

// LoadFromPath loads FDF form data from file path `fdfPath`.
func LoadFromPath (fdfPath string )(*Data ,error ){_dcf ,_bf :=_f .Open (fdfPath );if _bf !=nil {return nil ,_bf ;};defer _dcf .Close ();return Load (_dcf );};