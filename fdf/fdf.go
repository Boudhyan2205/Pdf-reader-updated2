//
// Copyright 2020 FoxyUtils ehf. All rights reserved.
//
// This is a commercial product and requires a license to operate.
// A trial license can be obtained at https://unidoc.io
//
// DO NOT EDIT: generated by unitwist Go source code obfuscator.
//
// Use of this source code is governed by the UniDoc End User License Agreement
// terms that can be accessed at https://unidoc.io/eula/

// Package fdf provides support for loading form field data from Form Field Data (FDF) files.
package fdf ;import (_bac "bufio";_ba "bytes";_b "encoding/hex";_g "errors";_df "fmt";_dc "github.com/unidoc/unipdf/v3/common";_e "github.com/unidoc/unipdf/v3/core";_ce "io";_db "os";_c "regexp";_ag "sort";_a "strconv";_gf "strings";);func (_cbg *fdfParser )parseBool ()(_e .PdfObjectBool ,error ){_ff ,_dg :=_cbg ._bbf .Peek (4);
if _dg !=nil {return _e .PdfObjectBool (false ),_dg ;};if (len (_ff )>=4)&&(string (_ff [:4])=="\u0074\u0072\u0075\u0065"){_cbg ._bbf .Discard (4);return _e .PdfObjectBool (true ),nil ;};_ff ,_dg =_cbg ._bbf .Peek (5);if _dg !=nil {return _e .PdfObjectBool (false ),_dg ;
};if (len (_ff )>=5)&&(string (_ff [:5])=="\u0066\u0061\u006cs\u0065"){_cbg ._bbf .Discard (5);return _e .PdfObjectBool (false ),nil ;};return _e .PdfObjectBool (false ),_g .New ("\u0075n\u0065\u0078\u0070\u0065c\u0074\u0065\u0064\u0020\u0062o\u006fl\u0065a\u006e\u0020\u0073\u0074\u0072\u0069\u006eg");
};func (_bebd *fdfParser )parseArray ()(*_e .PdfObjectArray ,error ){_cdge :=_e .MakeArray ();_bebd ._bbf .ReadByte ();for {_bebd .skipSpaces ();_bbc ,_daag :=_bebd ._bbf .Peek (1);if _daag !=nil {return _cdge ,_daag ;};if _bbc [0]==']'{_bebd ._bbf .ReadByte ();
break ;};_ceg ,_daag :=_bebd .parseObject ();if _daag !=nil {return _cdge ,_daag ;};_cdge .Append (_ceg );};return _cdge ,nil ;};func (_cdd *fdfParser )parseIndirectObject ()(_e .PdfObject ,error ){_fde :=_e .PdfIndirectObject {};_dc .Log .Trace ("\u002dR\u0065a\u0064\u0020\u0069\u006e\u0064i\u0072\u0065c\u0074\u0020\u006f\u0062\u006a");
_eeb ,_gbce :=_cdd ._bbf .Peek (20);if _gbce !=nil {_dc .Log .Debug ("\u0045\u0052\u0052\u004f\u0052\u003a\u0020\u0046\u0061\u0069\u006c\u0020\u0074\u006f\u0020r\u0065a\u0064\u0020\u0069\u006e\u0064\u0069\u0072\u0065\u0063\u0074\u0020\u006f\u0062\u006a");
return &_fde ,_gbce ;};_dc .Log .Trace ("\u0028\u0069\u006edi\u0072\u0065\u0063\u0074\u0020\u006f\u0062\u006a\u0020\u0070\u0065\u0065\u006b\u0020\u0022\u0025\u0073\u0022",string (_eeb ));_fbg :=_agfd .FindStringSubmatchIndex (string (_eeb ));if len (_fbg )< 6{_dc .Log .Debug ("\u0045\u0052\u0052\u004f\u0052\u003a\u0020U\u006e\u0061\u0062l\u0065\u0020\u0074\u006f \u0066\u0069\u006e\u0064\u0020\u006f\u0062\u006a\u0065\u0063\u0074\u0020\u0073\u0069\u0067\u006e\u0061\u0074\u0075\u0072\u0065\u0020\u0028\u0025\u0073\u0029",string (_eeb ));
return &_fde ,_g .New ("\u0075\u006e\u0061b\u006c\u0065\u0020\u0074\u006f\u0020\u0064\u0065\u0074\u0065\u0063\u0074\u0020\u0069\u006e\u0064\u0069\u0072\u0065\u0063\u0074\u0020\u006f\u0062\u006a\u0065\u0063\u0074\u0020s\u0069\u0067\u006e\u0061\u0074\u0075\u0072\u0065");
};_cdd ._bbf .Discard (_fbg [0]);_dc .Log .Trace ("O\u0066\u0066\u0073\u0065\u0074\u0073\u0020\u0025\u0020\u0064",_fbg );_cbf :=_fbg [1]-_fbg [0];_edf :=make ([]byte ,_cbf );_ ,_gbce =_cdd .readAtLeast (_edf ,_cbf );if _gbce !=nil {_dc .Log .Debug ("\u0045\u0052\u0052\u004f\u0052\u003a\u0020\u0075\u006e\u0061\u0062l\u0065\u0020\u0074\u006f\u0020\u0072\u0065\u0061\u0064\u0020-\u0020\u0025\u0073",_gbce );
return nil ,_gbce ;};_dc .Log .Trace ("\u0074\u0065\u0078t\u006c\u0069\u006e\u0065\u003a\u0020\u0025\u0073",_edf );_dcd :=_agfd .FindStringSubmatch (string (_edf ));if len (_dcd )< 3{_dc .Log .Debug ("\u0045\u0052\u0052\u004f\u0052\u003a\u0020U\u006e\u0061\u0062l\u0065\u0020\u0074\u006f \u0066\u0069\u006e\u0064\u0020\u006f\u0062\u006a\u0065\u0063\u0074\u0020\u0073\u0069\u0067\u006e\u0061\u0074\u0075\u0072\u0065\u0020\u0028\u0025\u0073\u0029",string (_edf ));
return &_fde ,_g .New ("\u0075\u006e\u0061b\u006c\u0065\u0020\u0074\u006f\u0020\u0064\u0065\u0074\u0065\u0063\u0074\u0020\u0069\u006e\u0064\u0069\u0072\u0065\u0063\u0074\u0020\u006f\u0062\u006a\u0065\u0063\u0074\u0020s\u0069\u0067\u006e\u0061\u0074\u0075\u0072\u0065");
};_cgc ,_ :=_a .Atoi (_dcd [1]);_bbef ,_ :=_a .Atoi (_dcd [2]);_fde .ObjectNumber =int64 (_cgc );_fde .GenerationNumber =int64 (_bbef );for {_cfg ,_gceg :=_cdd ._bbf .Peek (2);if _gceg !=nil {return &_fde ,_gceg ;};_dc .Log .Trace ("I\u006ed\u002e\u0020\u0070\u0065\u0065\u006b\u003a\u0020%\u0073\u0020\u0028\u0025 x\u0029\u0021",string (_cfg ),string (_cfg ));
if _e .IsWhiteSpace (_cfg [0]){_cdd .skipSpaces ();}else if _cfg [0]=='%'{_cdd .skipComments ();}else if (_cfg [0]=='<')&&(_cfg [1]=='<'){_dc .Log .Trace ("\u0043\u0061\u006c\u006c\u0020\u0050\u0061\u0072\u0073e\u0044\u0069\u0063\u0074");_fde .PdfObject ,_gceg =_cdd .parseDict ();
_dc .Log .Trace ("\u0045\u004f\u0046\u0020Ca\u006c\u006c\u0020\u0050\u0061\u0072\u0073\u0065\u0044\u0069\u0063\u0074\u003a\u0020%\u0076",_gceg );if _gceg !=nil {return &_fde ,_gceg ;};_dc .Log .Trace ("\u0050\u0061\u0072\u0073\u0065\u0064\u0020\u0064\u0069\u0063t\u0069\u006f\u006e\u0061\u0072\u0079\u002e.\u002e\u0020\u0066\u0069\u006e\u0069\u0073\u0068\u0065\u0064\u002e");
}else if (_cfg [0]=='/')||(_cfg [0]=='(')||(_cfg [0]=='[')||(_cfg [0]=='<'){_fde .PdfObject ,_gceg =_cdd .parseObject ();if _gceg !=nil {return &_fde ,_gceg ;};_dc .Log .Trace ("P\u0061\u0072\u0073\u0065\u0064\u0020o\u0062\u006a\u0065\u0063\u0074\u0020\u002e\u002e\u002e \u0066\u0069\u006ei\u0073h\u0065\u0064\u002e");
}else {if _cfg [0]=='e'{_gbe ,_bfd :=_cdd .readTextLine ();if _bfd !=nil {return nil ,_bfd ;};if len (_gbe )>=6&&_gbe [0:6]=="\u0065\u006e\u0064\u006f\u0062\u006a"{break ;};}else if _cfg [0]=='s'{_cfg ,_ =_cdd ._bbf .Peek (10);if string (_cfg [:6])=="\u0073\u0074\u0072\u0065\u0061\u006d"{_ead :=6;
if len (_cfg )> 6{if _e .IsWhiteSpace (_cfg [_ead ])&&_cfg [_ead ]!='\r'&&_cfg [_ead ]!='\n'{_dc .Log .Debug ("\u004e\u006fn\u002d\u0063\u006f\u006e\u0066\u006f\u0072\u006d\u0061\u006e\u0074\u0020\u0046\u0044\u0046\u0020\u006e\u006f\u0074 \u0065\u006e\u0064\u0069\u006e\u0067 \u0073\u0074\u0072\u0065\u0061\u006d\u0020\u006c\u0069\u006e\u0065\u0020\u0070\u0072o\u0070\u0065r\u006c\u0079\u0020\u0077i\u0074\u0068\u0020\u0045\u004fL\u0020\u006d\u0061\u0072\u006b\u0065\u0072");
_ead ++;};if _cfg [_ead ]=='\r'{_ead ++;if _cfg [_ead ]=='\n'{_ead ++;};}else if _cfg [_ead ]=='\n'{_ead ++;};};_cdd ._bbf .Discard (_ead );_aaed ,_cdb :=_fde .PdfObject .(*_e .PdfObjectDictionary );if !_cdb {return nil ,_g .New ("\u0073\u0074\u0072\u0065\u0061\u006d\u0020\u006f\u0062\u006a\u0065\u0063\u0074\u0020\u006di\u0073s\u0069\u006e\u0067\u0020\u0064\u0069\u0063\u0074\u0069\u006f\u006e\u0061\u0072\u0079");
};_dc .Log .Trace ("\u0053\u0074\u0072\u0065\u0061\u006d\u0020\u0064\u0069c\u0074\u0020\u0025\u0073",_aaed );_fea ,_dgce :=_aaed .Get ("\u004c\u0065\u006e\u0067\u0074\u0068").(*_e .PdfObjectInteger );if !_dgce {return nil ,_g .New ("\u0073\u0074re\u0061\u006d\u0020l\u0065\u006e\u0067\u0074h n\u0065ed\u0073\u0020\u0074\u006f\u0020\u0062\u0065 a\u006e\u0020\u0069\u006e\u0074\u0065\u0067e\u0072");
};_bge :=*_fea ;if _bge < 0{return nil ,_g .New ("\u0073\u0074\u0072\u0065\u0061\u006d\u0020\u006e\u0065\u0065\u0064\u0073\u0020\u0074\u006f \u0062e\u0020\u006c\u006f\u006e\u0067\u0065\u0072\u0020\u0074\u0068\u0061\u006e\u0020\u0030");};if int64 (_bge )> _cdd ._ccg {_dc .Log .Debug ("\u0045\u0052R\u004f\u0052\u003a\u0020\u0053t\u0072\u0065\u0061\u006d\u0020l\u0065\u006e\u0067\u0074\u0068\u0020\u0063\u0061\u006e\u006e\u006f\u0074\u0020\u0062\u0065\u0020\u006c\u0061\u0072\u0067\u0065\u0072\u0020\u0074\u0068\u0061\u006e\u0020\u0066\u0069\u006c\u0065\u0020\u0073\u0069\u007a\u0065");
return nil ,_g .New ("\u0069n\u0076\u0061l\u0069\u0064\u0020\u0073t\u0072\u0065\u0061m\u0020\u006c\u0065\u006e\u0067\u0074\u0068\u002c\u0020la\u0072\u0067\u0065r\u0020\u0074h\u0061\u006e\u0020\u0066\u0069\u006ce\u0020\u0073i\u007a\u0065");};_dff :=make ([]byte ,_bge );
_ ,_gceg =_cdd .readAtLeast (_dff ,int (_bge ));if _gceg !=nil {_dc .Log .Debug ("E\u0052\u0052\u004f\u0052 s\u0074r\u0065\u0061\u006d\u0020\u0028%\u0064\u0029\u003a\u0020\u0025\u0058",len (_dff ),_dff );_dc .Log .Debug ("\u0045R\u0052\u004f\u0052\u003a\u0020\u0025v",_gceg );
return nil ,_gceg ;};_gdb :=_e .PdfObjectStream {};_gdb .Stream =_dff ;_gdb .PdfObjectDictionary =_fde .PdfObject .(*_e .PdfObjectDictionary );_gdb .ObjectNumber =_fde .ObjectNumber ;_gdb .GenerationNumber =_fde .GenerationNumber ;_cdd .skipSpaces ();_cdd ._bbf .Discard (9);
_cdd .skipSpaces ();return &_gdb ,nil ;};};_fde .PdfObject ,_gceg =_cdd .parseObject ();return &_fde ,_gceg ;};};_dc .Log .Trace ("\u0052\u0065\u0074\u0075rn\u0069\u006e\u0067\u0020\u0069\u006e\u0064\u0069\u0072\u0065\u0063\u0074\u0021");return &_fde ,nil ;
};var _gec =_c .MustCompile ("\u005e\u005b\u005c+-\u002e\u005d\u002a\u0028\u005b\u0030\u002d\u0039\u002e]\u002b)\u0065[\u005c+\u002d\u002e\u005d\u002a\u0028\u005b\u0030\u002d\u0039\u002e\u005d\u002b\u0029");var _agfd =_c .MustCompile ("\u0028\u005c\u0064\u002b)\\\u0073\u002b\u0028\u005c\u0064\u002b\u0029\u005c\u0073\u002b\u006f\u0062\u006a");
var _aa =_c .MustCompile ("\u0025\u0025\u0045O\u0046");

// Data represents forms data format (FDF) file data.
type Data struct{_gc *_e .PdfObjectDictionary ;_be *_e .PdfObjectArray ;};func (_ebdb *fdfParser )parseNull ()(_e .PdfObjectNull ,error ){_ ,_gbb :=_ebdb ._bbf .Discard (4);return _e .PdfObjectNull {},_gbb ;};func _ecbb (_bgf string )(_e .PdfObjectReference ,error ){_bdb :=_e .PdfObjectReference {};
_aca :=_beb .FindStringSubmatch (_bgf );if len (_aca )< 3{_dc .Log .Debug ("\u0045\u0072\u0072or\u0020\u0070\u0061\u0072\u0073\u0069\u006e\u0067\u0020\u0072\u0065\u0066\u0065\u0072\u0065\u006e\u0063\u0065");return _bdb ,_g .New ("\u0075n\u0061\u0062\u006c\u0065 \u0074\u006f\u0020\u0070\u0061r\u0073e\u0020r\u0065\u0066\u0065\u0072\u0065\u006e\u0063e");
};_eda ,_edc :=_a .Atoi (_aca [1]);if _edc !=nil {_dc .Log .Debug ("\u0045\u0072\u0072\u006f\u0072\u0020\u0070a\u0072\u0073\u0069n\u0067\u0020\u006fb\u006a\u0065c\u0074\u0020\u006e\u0075\u006d\u0062e\u0072 '\u0025\u0073\u0027\u0020\u002d\u0020\u0055\u0073\u0069\u006e\u0067\u0020\u006f\u0062\u006a\u0065\u0063\u0074\u0020\u006e\u0075\u006d\u0020\u003d\u0020\u0030",_aca [1]);
return _bdb ,nil ;};_bdb .ObjectNumber =int64 (_eda );_adc ,_edc :=_a .Atoi (_aca [2]);if _edc !=nil {_dc .Log .Debug ("\u0045\u0072r\u006f\u0072\u0020\u0070\u0061r\u0073\u0069\u006e\u0067\u0020g\u0065\u006e\u0065\u0072\u0061\u0074\u0069\u006f\u006e\u0020\u006e\u0075\u006d\u0062\u0065\u0072\u0020\u0027\u0025\u0073\u0027\u0020\u002d\u0020\u0055\u0073\u0069\u006e\u0067\u0020\u0067\u0065\u006e\u0020\u003d\u0020\u0030",_aca [2]);
return _bdb ,nil ;};_bdb .GenerationNumber =int64 (_adc );return _bdb ,nil ;};func (_ac *fdfParser )skipComments ()error {if _ ,_acb :=_ac .skipSpaces ();_acb !=nil {return _acb ;};_ab :=true ;for {_adg ,_bab :=_ac ._bbf .Peek (1);if _bab !=nil {_dc .Log .Debug ("\u0045\u0072\u0072\u006f\u0072\u0020\u0025\u0073",_bab .Error ());
return _bab ;};if _ab &&_adg [0]!='%'{return nil ;};_ab =false ;if (_adg [0]!='\r')&&(_adg [0]!='\n'){_ac ._bbf .ReadByte ();}else {break ;};};return _ac .skipComments ();};func (_dad *fdfParser )readAtLeast (_cc []byte ,_ega int )(int ,error ){_ge :=_ega ;
_dade :=0;_ed :=0;for _ge > 0{_fa ,_fc :=_dad ._bbf .Read (_cc [_dade :]);if _fc !=nil {_dc .Log .Debug ("\u0045\u0052\u0052O\u0052\u0020\u0046\u0061i\u006c\u0065\u0064\u0020\u0072\u0065\u0061d\u0069\u006e\u0067\u0020\u0028\u0025\u0064\u003b\u0025\u0064\u0029\u0020\u0025\u0073",_fa ,_ed ,_fc .Error ());
return _dade ,_g .New ("\u0066\u0061\u0069\u006c\u0065\u0064\u0020\u0072\u0065a\u0064\u0069\u006e\u0067");};_ed ++;_dade +=_fa ;_ge -=_fa ;};return _dade ,nil ;};

// Root returns the Root of the FDF document.
func (_aaaf *fdfParser )Root ()(*_e .PdfObjectDictionary ,error ){if _aaaf ._bed !=nil {if _ggc ,_gfg :=_aaaf .trace (_aaaf ._bed .Get ("\u0052\u006f\u006f\u0074")).(*_e .PdfObjectDictionary );_gfg {if _eed ,_baa :=_aaaf .trace (_ggc .Get ("\u0046\u0044\u0046")).(*_e .PdfObjectDictionary );
_baa {return _eed ,nil ;};};};var _ece []int64 ;for _edb :=range _aaaf ._ad {_ece =append (_ece ,_edb );};_ag .Slice (_ece ,func (_bdea ,_agc int )bool {return _ece [_bdea ]< _ece [_agc ]});for _ ,_def :=range _ece {_babc :=_aaaf ._ad [_def ];if _ceb ,_fdg :=_aaaf .trace (_babc ).(*_e .PdfObjectDictionary );
_fdg {if _dbg ,_bda :=_aaaf .trace (_ceb .Get ("\u0046\u0044\u0046")).(*_e .PdfObjectDictionary );_bda {return _dbg ,nil ;};};};return nil ,_g .New ("\u0046\u0044\u0046\u0020\u006e\u006f\u0074\u0020\u0066\u006f\u0075\u006e\u0064");};func _ffa (_cgbf _ce .ReadSeeker )(*fdfParser ,error ){_cdfb :=&fdfParser {};
_cdfb ._bbd =_cgbf ;_cdfb ._ad =map[int64 ]_e .PdfObject {};_eee ,_ecec ,_gab :=_cdfb .parseFdfVersion ();if _gab !=nil {_dc .Log .Error ("U\u006e\u0061\u0062\u006c\u0065\u0020t\u006f\u0020\u0070\u0061\u0072\u0073\u0065\u0020\u0076e\u0072\u0073\u0069o\u006e:\u0020\u0025\u0076",_gab );
return nil ,_gab ;};_cdfb ._fd =_eee ;_cdfb ._gd =_ecec ;_gab =_cdfb .parse ();return _cdfb ,_gab ;};func (_gef *fdfParser )setFileOffset (_eb int64 ){_gef ._bbd .Seek (_eb ,_ce .SeekStart );_gef ._bbf =_bac .NewReader (_gef ._bbd );};func (_egae *fdfParser )readComment ()(string ,error ){var _ecba _ba .Buffer ;
_ ,_aaa :=_egae .skipSpaces ();if _aaa !=nil {return _ecba .String (),_aaa ;};_bg :=true ;for {_adgc ,_ef :=_egae ._bbf .Peek (1);if _ef !=nil {_dc .Log .Debug ("\u0045\u0072\u0072\u006f\u0072\u0020\u0025\u0073",_ef .Error ());return _ecba .String (),_ef ;
};if _bg &&_adgc [0]!='%'{return _ecba .String (),_g .New ("c\u006f\u006d\u006d\u0065\u006e\u0074 \u0073\u0068\u006f\u0075\u006c\u0064\u0020\u0073\u0074a\u0072\u0074\u0020w\u0069t\u0068\u0020\u0025");};_bg =false ;if (_adgc [0]!='\r')&&(_adgc [0]!='\n'){_fae ,_ :=_egae ._bbf .ReadByte ();
_ecba .WriteByte (_fae );}else {break ;};};return _ecba .String (),nil ;};func (_aef *fdfParser )parseDict ()(*_e .PdfObjectDictionary ,error ){_dc .Log .Trace ("\u0052\u0065\u0061\u0064\u0069\u006e\u0067\u0020\u0046\u0044\u0046\u0020D\u0069\u0063\u0074\u0021");
_ccb :=_e .MakeDict ();_gece ,_ :=_aef ._bbf .ReadByte ();if _gece !='<'{return nil ,_g .New ("\u0069\u006e\u0076a\u006c\u0069\u0064\u0020\u0064\u0069\u0063\u0074");};_gece ,_ =_aef ._bbf .ReadByte ();if _gece !='<'{return nil ,_g .New ("\u0069\u006e\u0076a\u006c\u0069\u0064\u0020\u0064\u0069\u0063\u0074");
};for {_aef .skipSpaces ();_aef .skipComments ();_gcgc ,_bfc :=_aef ._bbf .Peek (2);if _bfc !=nil {return nil ,_bfc ;};_dc .Log .Trace ("D\u0069c\u0074\u0020\u0070\u0065\u0065\u006b\u003a\u0020%\u0073\u0020\u0028\u0025 x\u0029\u0021",string (_gcgc ),string (_gcgc ));
if (_gcgc [0]=='>')&&(_gcgc [1]=='>'){_dc .Log .Trace ("\u0045\u004f\u0046\u0020\u0064\u0069\u0063\u0074\u0069o\u006e\u0061\u0072\u0079");_aef ._bbf .ReadByte ();_aef ._bbf .ReadByte ();break ;};_dc .Log .Trace ("\u0050a\u0072s\u0065\u0020\u0074\u0068\u0065\u0020\u006e\u0061\u006d\u0065\u0021");
_aab ,_bfc :=_aef .parseName ();_dc .Log .Trace ("\u004be\u0079\u003a\u0020\u0025\u0073",_aab );if _bfc !=nil {_dc .Log .Debug ("E\u0052\u0052\u004f\u0052\u0020\u0052e\u0074\u0075\u0072\u006e\u0069\u006e\u0067\u0020\u006ea\u006d\u0065\u0020e\u0072r\u0020\u0025\u0073",_bfc );
return nil ,_bfc ;};if len (_aab )> 4&&_aab [len (_aab )-4:]=="\u006e\u0075\u006c\u006c"{_fgd :=_aab [0:len (_aab )-4];_dc .Log .Debug ("\u0054\u0061\u006b\u0069n\u0067\u0020\u0063\u0061\u0072\u0065\u0020\u006f\u0066\u0020n\u0075l\u006c\u0020\u0062\u0075\u0067\u0020\u0028%\u0073\u0029",_aab );
_dc .Log .Debug ("\u004e\u0065\u0077\u0020ke\u0079\u0020\u0022\u0025\u0073\u0022\u0020\u003d\u0020\u006e\u0075\u006c\u006c",_fgd );_aef .skipSpaces ();_afb ,_ :=_aef ._bbf .Peek (1);if _afb [0]=='/'{_ccb .Set (_fgd ,_e .MakeNull ());continue ;};};_aef .skipSpaces ();
_cbb ,_bfc :=_aef .parseObject ();if _bfc !=nil {return nil ,_bfc ;};_ccb .Set (_aab ,_cbb );_dc .Log .Trace ("\u0064\u0069\u0063\u0074\u005b\u0025\u0073\u005d\u0020\u003d\u0020\u0025\u0073",_aab ,_cbb .String ());};_dc .Log .Trace ("\u0072\u0065\u0074\u0075rn\u0069\u006e\u0067\u0020\u0046\u0044\u0046\u0020\u0044\u0069\u0063\u0074\u0021");
return _ccb ,nil ;};func (_abc *fdfParser )parseFdfVersion ()(int ,int ,error ){_abc ._bbd .Seek (0,_ce .SeekStart );_eca :=20;_dgg :=make ([]byte ,_eca );_abc ._bbd .Read (_dgg );_bde :=_dba .FindStringSubmatch (string (_dgg ));if len (_bde )< 3{_fef ,_efg ,_aga :=_abc .seekFdfVersionTopDown ();
if _aga !=nil {_dc .Log .Debug ("F\u0061\u0069\u006c\u0065\u0064\u0020\u0072\u0065\u0063\u006f\u0076\u0065\u0072\u0079\u0020\u002d\u0020\u0075n\u0061\u0062\u006c\u0065\u0020\u0074\u006f\u0020\u0066\u0069nd\u0020\u0076\u0065r\u0073i\u006f\u006e");return 0,0,_aga ;
};return _fef ,_efg ,nil ;};_feeb ,_gde :=_a .Atoi (_bde [1]);if _gde !=nil {return 0,0,_gde ;};_geda ,_gde :=_a .Atoi (_bde [2]);if _gde !=nil {return 0,0,_gde ;};_dc .Log .Debug ("\u0046\u0064\u0066\u0020\u0076\u0065\u0072\u0073\u0069\u006f\u006e\u0020%\u0064\u002e\u0025\u0064",_feeb ,_geda );
return _feeb ,_geda ,nil ;};func (_aee *fdfParser )parseHexString ()(*_e .PdfObjectString ,error ){_aee ._bbf .ReadByte ();var _bcc _ba .Buffer ;for {_dadc ,_eae :=_aee ._bbf .Peek (1);if _eae !=nil {return _e .MakeHexString (""),_eae ;};if _dadc [0]=='>'{_aee ._bbf .ReadByte ();
break ;};_gaf ,_ :=_aee ._bbf .ReadByte ();if !_e .IsWhiteSpace (_gaf ){_bcc .WriteByte (_gaf );};};if _bcc .Len ()%2==1{_bcc .WriteRune ('0');};_cgb ,_afff :=_b .DecodeString (_bcc .String ());if _afff !=nil {_dc .Log .Debug ("\u0045\u0052\u0052\u004f\u0052\u0020\u0050\u0061\u0072\u0073\u0069\u006e\u0067\u0020\u0068\u0065\u0078\u0020\u0073\u0074r\u0069\u006e\u0067\u003a\u0020\u0027\u0025\u0073\u0027 \u002d\u0020\u0072\u0065\u0074\u0075\u0072\u006e\u0069\u006e\u0067\u0020\u0061n\u0020\u0065\u006d\u0070\u0074\u0079 \u0073\u0074\u0072i\u006e\u0067",_bcc .String ());
return _e .MakeHexString (""),nil ;};return _e .MakeHexString (string (_cgb )),nil ;};func (_bbe *fdfParser )skipSpaces ()(int ,error ){_cfb :=0;for {_ee ,_bbb :=_bbe ._bbf .ReadByte ();if _bbb !=nil {return 0,_bbb ;};if _e .IsWhiteSpace (_ee ){_cfb ++;
}else {_bbe ._bbf .UnreadByte ();break ;};};return _cfb ,nil ;};func (_ffb *fdfParser )seekFdfVersionTopDown ()(int ,int ,error ){_ffb ._bbd .Seek (0,_ce .SeekStart );_ffb ._bbf =_bac .NewReader (_ffb ._bbd );_gabe :=20;_ecc :=make ([]byte ,_gabe );for {_cff ,_cge :=_ffb ._bbf .ReadByte ();
if _cge !=nil {if _cge ==_ce .EOF {break ;}else {return 0,0,_cge ;};};if _e .IsDecimalDigit (_cff )&&_ecc [_gabe -1]=='.'&&_e .IsDecimalDigit (_ecc [_gabe -2])&&_ecc [_gabe -3]=='-'&&_ecc [_gabe -4]=='F'&&_ecc [_gabe -5]=='D'&&_ecc [_gabe -6]=='P'{_efb :=int (_ecc [_gabe -2]-'0');
_ced :=int (_cff -'0');return _efb ,_ced ,nil ;};_ecc =append (_ecc [1:_gabe ],_cff );};return 0,0,_g .New ("\u0076\u0065\u0072\u0073\u0069\u006f\u006e\u0020\u006e\u006f\u0074\u0020f\u006f\u0075\u006e\u0064");};var _ged =_c .MustCompile ("\u005e\u005b\u005c\u002b\u002d\u002e\u005d\u002a\u0028\u005b\u0030\u002d9\u002e\u005d\u002b\u0029");
func (_afd *fdfParser )trace (_dca _e .PdfObject )_e .PdfObject {switch _cdfg :=_dca .(type ){case *_e .PdfObjectReference :_egfc ,_fbc :=_afd ._ad [_cdfg .ObjectNumber ].(*_e .PdfIndirectObject );if _fbc {return _egfc .PdfObject ;};_dc .Log .Debug ("\u0054\u0079\u0070\u0065\u0020\u0065\u0072\u0072\u006f\u0072");
return nil ;case *_e .PdfIndirectObject :return _cdfg .PdfObject ;};return _dca ;};type fdfParser struct{_fd int ;_gd int ;_ad map[int64 ]_e .PdfObject ;_bbd _ce .ReadSeeker ;_bbf *_bac .Reader ;_ccg int64 ;_bed *_e .PdfObjectDictionary ;};func (_de *fdfParser )parseName ()(_e .PdfObjectName ,error ){var _daa _ba .Buffer ;
_ecf :=false ;for {_bedb ,_cefe :=_de ._bbf .Peek (1);if _cefe ==_ce .EOF {break ;};if _cefe !=nil {return _e .PdfObjectName (_daa .String ()),_cefe ;};if !_ecf {if _bedb [0]=='/'{_ecf =true ;_de ._bbf .ReadByte ();}else if _bedb [0]=='%'{_de .readComment ();
_de .skipSpaces ();}else {_dc .Log .Debug ("\u0045\u0052\u0052\u004f\u0052\u0020N\u0061\u006d\u0065\u0020\u0073\u0074\u0061\u0072\u0074\u0069\u006e\u0067\u0020w\u0069\u0074\u0068\u0020\u0025\u0073\u0020(\u0025\u0020\u0078\u0029",_bedb ,_bedb );return _e .PdfObjectName (_daa .String ()),_df .Errorf ("\u0069n\u0076a\u006c\u0069\u0064\u0020\u006ea\u006d\u0065:\u0020\u0028\u0025\u0063\u0029",_bedb [0]);
};}else {if _e .IsWhiteSpace (_bedb [0]){break ;}else if (_bedb [0]=='/')||(_bedb [0]=='[')||(_bedb [0]=='(')||(_bedb [0]==']')||(_bedb [0]=='<')||(_bedb [0]=='>'){break ;}else if _bedb [0]=='#'{_agd ,_cdg :=_de ._bbf .Peek (3);if _cdg !=nil {return _e .PdfObjectName (_daa .String ()),_cdg ;
};_de ._bbf .Discard (3);_efd ,_cdg :=_b .DecodeString (string (_agd [1:3]));if _cdg !=nil {return _e .PdfObjectName (_daa .String ()),_cdg ;};_daa .Write (_efd );}else {_gbf ,_ :=_de ._bbf .ReadByte ();_daa .WriteByte (_gbf );};};};return _e .PdfObjectName (_daa .String ()),nil ;
};var _dba =_c .MustCompile ("\u0025F\u0044F\u002d\u0028\u005c\u0064\u0029\u005c\u002e\u0028\u005c\u0064\u0029");

// FieldValues implements interface model.FieldValueProvider.
// Returns a map of field names to values (PdfObjects).
func (fdf *Data )FieldValues ()(map[string ]_e .PdfObject ,error ){_fg ,_aff :=fdf .FieldDictionaries ();if _aff !=nil {return nil ,_aff ;};var _agf []string ;for _ae :=range _fg {_agf =append (_agf ,_ae );};_ag .Strings (_agf );_feb :=map[string ]_e .PdfObject {};
for _ ,_gb :=range _agf {_bb :=_fg [_gb ];_bf :=_e .TraceToDirectObject (_bb .Get ("\u0056"));_feb [_gb ]=_bf ;};return _feb ,nil ;};func _cbc (_bee string )(*fdfParser ,error ){_daab :=fdfParser {};_gac :=[]byte (_bee );_dbag :=_ba .NewReader (_gac );
_daab ._bbd =_dbag ;_daab ._ad =map[int64 ]_e .PdfObject {};_cdf :=_bac .NewReader (_dbag );_daab ._bbf =_cdf ;_daab ._ccg =int64 (len (_bee ));return &_daab ,_daab .parse ();};

// FieldDictionaries returns a map of field names to field dictionaries.
func (fdf *Data )FieldDictionaries ()(map[string ]*_e .PdfObjectDictionary ,error ){_f :=map[string ]*_e .PdfObjectDictionary {};for _bea :=0;_bea < fdf ._be .Len ();_bea ++{_ecb ,_dcc :=_e .GetDict (fdf ._be .Get (_bea ));if _dcc {_fe ,_ :=_e .GetString (_ecb .Get ("\u0054"));
if _fe !=nil {_f [_fe .Str ()]=_ecb ;};};};return _f ,nil ;};func (_ace *fdfParser )parse ()error {_ace ._bbd .Seek (0,_ce .SeekStart );_ace ._bbf =_bac .NewReader (_ace ._bbd );for {_ace .skipComments ();_ddg ,_efef :=_ace ._bbf .Peek (20);if _efef !=nil {_dc .Log .Debug ("\u0045\u0052\u0052\u004f\u0052\u003a\u0020\u0046\u0061\u0069\u006c\u0020\u0074\u006f\u0020r\u0065a\u0064\u0020\u0069\u006e\u0064\u0069\u0072\u0065\u0063\u0074\u0020\u006f\u0062\u006a");
return _efef ;};if _gf .HasPrefix (string (_ddg ),"\u0074r\u0061\u0069\u006c\u0065\u0072"){_ace ._bbf .Discard (7);_ace .skipSpaces ();_ace .skipComments ();_acg ,_ :=_ace .parseDict ();_ace ._bed =_acg ;break ;};_gaa :=_agfd .FindStringSubmatchIndex (string (_ddg ));
if len (_gaa )< 6{_dc .Log .Debug ("\u0045\u0052\u0052\u004f\u0052\u003a\u0020U\u006e\u0061\u0062l\u0065\u0020\u0074\u006f \u0066\u0069\u006e\u0064\u0020\u006f\u0062\u006a\u0065\u0063\u0074\u0020\u0073\u0069\u0067\u006e\u0061\u0074\u0075\u0072\u0065\u0020\u0028\u0025\u0073\u0029",string (_ddg ));
return _g .New ("\u0075\u006e\u0061b\u006c\u0065\u0020\u0074\u006f\u0020\u0064\u0065\u0074\u0065\u0063\u0074\u0020\u0069\u006e\u0064\u0069\u0072\u0065\u0063\u0074\u0020\u006f\u0062\u006a\u0065\u0063\u0074\u0020s\u0069\u0067\u006e\u0061\u0074\u0075\u0072\u0065");
};_dbe ,_efef :=_ace .parseIndirectObject ();if _efef !=nil {return _efef ;};switch _bdca :=_dbe .(type ){case *_e .PdfIndirectObject :_ace ._ad [_bdca .ObjectNumber ]=_bdca ;case *_e .PdfObjectStream :_ace ._ad [_bdca .ObjectNumber ]=_bdca ;default:return _g .New ("\u0074\u0079\u0070\u0065\u0020\u0065\u0072\u0072\u006f\u0072");
};};return nil ;};func (_fcd *fdfParser )getFileOffset ()int64 {_bag ,_ :=_fcd ._bbd .Seek (0,_ce .SeekCurrent );_bag -=int64 (_fcd ._bbf .Buffered ());return _bag ;};func (_cgd *fdfParser )parseString ()(*_e .PdfObjectString ,error ){_cgd ._bbf .ReadByte ();
var _dcg _ba .Buffer ;_gbc :=1;for {_gg ,_bdd :=_cgd ._bbf .Peek (1);if _bdd !=nil {return _e .MakeString (_dcg .String ()),_bdd ;};if _gg [0]=='\\'{_cgd ._bbf .ReadByte ();_gae ,_dac :=_cgd ._bbf .ReadByte ();if _dac !=nil {return _e .MakeString (_dcg .String ()),_dac ;
};if _e .IsOctalDigit (_gae ){_gcc ,_dcf :=_cgd ._bbf .Peek (2);if _dcf !=nil {return _e .MakeString (_dcg .String ()),_dcf ;};var _ebd []byte ;_ebd =append (_ebd ,_gae );for _ ,_ada :=range _gcc {if _e .IsOctalDigit (_ada ){_ebd =append (_ebd ,_ada );
}else {break ;};};_cgd ._bbf .Discard (len (_ebd )-1);_dc .Log .Trace ("\u004e\u0075\u006d\u0065ri\u0063\u0020\u0073\u0074\u0072\u0069\u006e\u0067\u0020\u0022\u0025\u0073\u0022",_ebd );_cb ,_dcf :=_a .ParseUint (string (_ebd ),8,32);if _dcf !=nil {return _e .MakeString (_dcg .String ()),_dcf ;
};_dcg .WriteByte (byte (_cb ));continue ;};switch _gae {case 'n':_dcg .WriteRune ('\n');case 'r':_dcg .WriteRune ('\r');case 't':_dcg .WriteRune ('\t');case 'b':_dcg .WriteRune ('\b');case 'f':_dcg .WriteRune ('\f');case '(':_dcg .WriteRune ('(');case ')':_dcg .WriteRune (')');
case '\\':_dcg .WriteRune ('\\');};continue ;}else if _gg [0]=='('{_gbc ++;}else if _gg [0]==')'{_gbc --;if _gbc ==0{_cgd ._bbf .ReadByte ();break ;};};_fdc ,_ :=_cgd ._bbf .ReadByte ();_dcg .WriteByte (_fdc );};return _e .MakeString (_dcg .String ()),nil ;
};func (_dfg *fdfParser )readTextLine ()(string ,error ){var _gcg _ba .Buffer ;for {_bgd ,_cef :=_dfg ._bbf .Peek (1);if _cef !=nil {_dc .Log .Debug ("\u0045\u0072\u0072\u006f\u0072\u0020\u0025\u0073",_cef .Error ());return _gcg .String (),_cef ;};if (_bgd [0]!='\r')&&(_bgd [0]!='\n'){_ebg ,_ :=_dfg ._bbf .ReadByte ();
_gcg .WriteByte (_ebg );}else {break ;};};return _gcg .String (),nil ;};

// LoadFromPath loads FDF form data from file path `fdfPath`.
func LoadFromPath (fdfPath string )(*Data ,error ){_af ,_cd :=_db .Open (fdfPath );if _cd !=nil {return nil ,_cd ;};defer _af .Close ();return Load (_af );};

// Load loads FDF form data from `r`.
func Load (r _ce .ReadSeeker )(*Data ,error ){_dfe ,_cg :=_ffa (r );if _cg !=nil {return nil ,_cg ;};_cf ,_cg :=_dfe .Root ();if _cg !=nil {return nil ,_cg ;};_ec ,_bc :=_e .GetArray (_cf .Get ("\u0046\u0069\u0065\u006c\u0064\u0073"));if !_bc {return nil ,_g .New ("\u0066\u0069\u0065\u006c\u0064\u0073\u0020\u006d\u0069s\u0073\u0069\u006e\u0067");
};return &Data {_be :_ec ,_gc :_cf },nil ;};func (_fb *fdfParser )parseNumber ()(_e .PdfObject ,error ){return _e .ParseNumber (_fb ._bbf )};func (_eab *fdfParser )seekToEOFMarker (_aaef int64 )error {_ggb :=int64 (0);_dfed :=int64 (1000);for _ggb < _aaef {if _aaef <=(_dfed +_ggb ){_dfed =_aaef -_ggb ;
};_ ,_ffg :=_eab ._bbd .Seek (-_ggb -_dfed ,_ce .SeekEnd );if _ffg !=nil {return _ffg ;};_bdbec :=make ([]byte ,_dfed );_eab ._bbd .Read (_bdbec );_dc .Log .Trace ("\u004c\u006f\u006f\u006bi\u006e\u0067\u0020\u0066\u006f\u0072\u0020\u0045\u004f\u0046 \u006da\u0072\u006b\u0065\u0072\u003a\u0020\u0022%\u0073\u0022",string (_bdbec ));
_edg :=_aa .FindAllStringIndex (string (_bdbec ),-1);if _edg !=nil {_dfb :=_edg [len (_edg )-1];_dc .Log .Trace ("\u0049\u006e\u0064\u003a\u0020\u0025\u0020\u0064",_edg );_eab ._bbd .Seek (-_ggb -_dfed +int64 (_dfb [0]),_ce .SeekEnd );return nil ;};_dc .Log .Debug ("\u0057\u0061\u0072\u006e\u0069\u006eg\u003a\u0020\u0045\u004f\u0046\u0020\u006d\u0061\u0072\u006b\u0065\u0072\u0020\u006e\u006f\u0074\u0020\u0066\u006f\u0075n\u0064\u0021\u0020\u002d\u0020\u0063\u006f\u006e\u0074\u0069\u006e\u0075\u0065\u0020s\u0065e\u006b\u0069\u006e\u0067");
_ggb +=_dfed ;};_dc .Log .Debug ("\u0045\u0072\u0072\u006f\u0072\u003a\u0020\u0045\u004f\u0046\u0020\u006d\u0061\u0072\u006be\u0072 \u0077\u0061\u0073\u0020\u006e\u006f\u0074\u0020\u0066\u006f\u0075\u006e\u0064\u002e");return _g .New ("\u0045\u004f\u0046\u0020\u006e\u006f\u0074\u0020\u0066\u006f\u0075\u006e\u0064");
};var _beb =_c .MustCompile ("^\u005c\u0073\u002a\u0028\\d\u002b)\u005c\u0073\u002b\u0028\u005cd\u002b\u0029\u005c\u0073\u002b\u0052");func (_gee *fdfParser )parseObject ()(_e .PdfObject ,error ){_dc .Log .Trace ("\u0052e\u0061d\u0020\u0064\u0069\u0072\u0065c\u0074\u0020o\u0062\u006a\u0065\u0063\u0074");
_gee .skipSpaces ();for {_fcb ,_egf :=_gee ._bbf .Peek (2);if _egf !=nil {return nil ,_egf ;};_dc .Log .Trace ("\u0050e\u0065k\u0020\u0073\u0074\u0072\u0069\u006e\u0067\u003a\u0020\u0025\u0073",string (_fcb ));if _fcb [0]=='/'{_fcc ,_baf :=_gee .parseName ();
_dc .Log .Trace ("\u002d\u003e\u004ea\u006d\u0065\u003a\u0020\u0027\u0025\u0073\u0027",_fcc );return &_fcc ,_baf ;}else if _fcb [0]=='('{_dc .Log .Trace ("\u002d>\u0053\u0074\u0072\u0069\u006e\u0067!");return _gee .parseString ();}else if _fcb [0]=='['{_dc .Log .Trace ("\u002d\u003e\u0041\u0072\u0072\u0061\u0079\u0021");
return _gee .parseArray ();}else if (_fcb [0]=='<')&&(_fcb [1]=='<'){_dc .Log .Trace ("\u002d>\u0044\u0069\u0063\u0074\u0021");return _gee .parseDict ();}else if _fcb [0]=='<'{_dc .Log .Trace ("\u002d\u003e\u0048\u0065\u0078\u0020\u0073\u0074\u0072\u0069\u006e\u0067\u0021");
return _gee .parseHexString ();}else if _fcb [0]=='%'{_gee .readComment ();_gee .skipSpaces ();}else {_dc .Log .Trace ("\u002d\u003eN\u0075\u006d\u0062e\u0072\u0020\u006f\u0072\u0020\u0072\u0065\u0066\u003f");_fcb ,_ =_gee ._bbf .Peek (15);_fccb :=string (_fcb );
_dc .Log .Trace ("\u0050\u0065\u0065k\u0020\u0073\u0074\u0072\u003a\u0020\u0025\u0073",_fccb );if (len (_fccb )> 3)&&(_fccb [:4]=="\u006e\u0075\u006c\u006c"){_eef ,_eaee :=_gee .parseNull ();return &_eef ,_eaee ;}else if (len (_fccb )> 4)&&(_fccb [:5]=="\u0066\u0061\u006cs\u0065"){_faf ,_fbe :=_gee .parseBool ();
return &_faf ,_fbe ;}else if (len (_fccb )> 3)&&(_fccb [:4]=="\u0074\u0072\u0075\u0065"){_dgc ,_aaf :=_gee .parseBool ();return &_dgc ,_aaf ;};_cbe :=_beb .FindStringSubmatch (_fccb );if len (_cbe )> 1{_fcb ,_ =_gee ._bbf .ReadBytes ('R');_dc .Log .Trace ("\u002d\u003e\u0020\u0021\u0052\u0065\u0066\u003a\u0020\u0027\u0025\u0073\u0027",string (_fcb [:]));
_agg ,_gce :=_ecbb (string (_fcb ));return &_agg ,_gce ;};_ebc :=_ged .FindStringSubmatch (_fccb );if len (_ebc )> 1{_dc .Log .Trace ("\u002d\u003e\u0020\u004e\u0075\u006d\u0062\u0065\u0072\u0021");return _gee .parseNumber ();};_ebc =_gec .FindStringSubmatch (_fccb );
if len (_ebc )> 1{_dc .Log .Trace ("\u002d\u003e\u0020\u0045xp\u006f\u006e\u0065\u006e\u0074\u0069\u0061\u006c\u0020\u004e\u0075\u006d\u0062\u0065r\u0021");_dc .Log .Trace ("\u0025\u0020\u0073",_ebc );return _gee .parseNumber ();};_dc .Log .Debug ("\u0045R\u0052\u004f\u0052\u0020U\u006e\u006b\u006e\u006f\u0077n\u0020(\u0070e\u0065\u006b\u0020\u0022\u0025\u0073\u0022)",_fccb );
return nil ,_g .New ("\u006f\u0062\u006a\u0065\u0063t\u0020\u0070\u0061\u0072\u0073\u0069\u006e\u0067\u0020\u0065\u0072\u0072\u006fr\u0020\u002d\u0020\u0075\u006e\u0065\u0078\u0070\u0065\u0063\u0074\u0065\u0064\u0020\u0070\u0061\u0074\u0074\u0065\u0072\u006e");
};};};