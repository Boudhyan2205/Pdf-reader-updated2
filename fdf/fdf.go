//
// Copyright 2020 FoxyUtils ehf. All rights reserved.
//
// This is a commercial product and requires a license to operate.
// A trial license can be obtained at https://unidoc.io
//
// DO NOT EDIT: generated by unitwist Go source code obfuscator.
//
// Use of this source code is governed by the UniDoc End User License Agreement
// terms that can be accessed at https://unidoc.io/eula/

// Package fdf provides support for loading form field data from Form Field Data (FDF) files.
package fdf ;import (_bg "bufio";_cg "bytes";_d "encoding/hex";_a "errors";_c "fmt";_bga "github.com/unidoc/unipdf/v3/common";_bb "github.com/unidoc/unipdf/v3/core";_aa "io";_ed "os";_f "regexp";_ea "sort";_e "strconv";_be "strings";);var _ffd =_f .MustCompile ("\u0028\u005c\u0064\u002b)\\\u0073\u002b\u0028\u005c\u0064\u002b\u0029\u005c\u0073\u002b\u006f\u0062\u006a");var _fd =_f .MustCompile ("\u005e\u005b\u005c+-\u002e\u005d\u002a\u0028\u005b\u0030\u002d\u0039\u002e]\u002b)\u0065[\u005c+\u002d\u002e\u005d\u002a\u0028\u005b\u0030\u002d\u0039\u002e\u005d\u002b\u0029");var _ffb =_f .MustCompile ("\u0025F\u0044F\u002d\u0028\u005c\u0064\u0029\u005c\u002e\u0028\u005c\u0064\u0029");func (_fgd *fdfParser )setFileOffset (_bd int64 ){_fgd ._bdc .Seek (_bd ,_aa .SeekStart );_fgd ._feb =_bg .NewReader (_fgd ._bdc );};

// FieldDictionaries returns a map of field names to field dictionaries.
func (fdf *Data )FieldDictionaries ()(map[string ]*_bb .PdfObjectDictionary ,error ){_fe :=map[string ]*_bb .PdfObjectDictionary {};for _df :=0;_df < fdf ._de .Len ();_df ++{_cf ,_ec :=_bb .GetDict (fdf ._de .Get (_df ));if _ec {_ead ,_ :=_bb .GetString (_cf .Get ("\u0054"));if _ead !=nil {_fe [_ead .Str ()]=_cf ;};};};return _fe ,nil ;};func (_gg *fdfParser )parseString ()(*_bb .PdfObjectString ,error ){_gg ._feb .ReadByte ();var _ecg _cg .Buffer ;_ebe :=1;for {_fa ,_ccee :=_gg ._feb .Peek (1);if _ccee !=nil {return _bb .MakeString (_ecg .String ()),_ccee ;};if _fa [0]=='\\'{_gg ._feb .ReadByte ();_gcc ,_fbe :=_gg ._feb .ReadByte ();if _fbe !=nil {return _bb .MakeString (_ecg .String ()),_fbe ;};if _bb .IsOctalDigit (_gcc ){_aee ,_fbg :=_gg ._feb .Peek (2);if _fbg !=nil {return _bb .MakeString (_ecg .String ()),_fbg ;};var _caf []byte ;_caf =append (_caf ,_gcc );for _ ,_ccef :=range _aee {if _bb .IsOctalDigit (_ccef ){_caf =append (_caf ,_ccef );}else {break ;};};_gg ._feb .Discard (len (_caf )-1);_bga .Log .Trace ("\u004e\u0075\u006d\u0065ri\u0063\u0020\u0073\u0074\u0072\u0069\u006e\u0067\u0020\u0022\u0025\u0073\u0022",_caf );_ceee ,_fbg :=_e .ParseUint (string (_caf ),8,32);if _fbg !=nil {return _bb .MakeString (_ecg .String ()),_fbg ;};_ecg .WriteByte (byte (_ceee ));continue ;};switch _gcc {case 'n':_ecg .WriteRune ('\n');case 'r':_ecg .WriteRune ('\r');case 't':_ecg .WriteRune ('\t');case 'b':_ecg .WriteRune ('\b');case 'f':_ecg .WriteRune ('\f');case '(':_ecg .WriteRune ('(');case ')':_ecg .WriteRune (')');case '\\':_ecg .WriteRune ('\\');};continue ;}else if _fa [0]=='('{_ebe ++;}else if _fa [0]==')'{_ebe --;if _ebe ==0{_gg ._feb .ReadByte ();break ;};};_gcg ,_ :=_gg ._feb .ReadByte ();_ecg .WriteByte (_gcg );};return _bb .MakeString (_ecg .String ()),nil ;};

// LoadFromPath loads FDF form data from file path `fdfPath`.
func LoadFromPath (fdfPath string )(*Data ,error ){_bbd ,_cb :=_ed .Open (fdfPath );if _cb !=nil {return nil ,_cb ;};defer _bbd .Close ();return Load (_bbd );};func (_gcb *fdfParser )parseBool ()(_bb .PdfObjectBool ,error ){_ga ,_cbe :=_gcb ._feb .Peek (4);if _cbe !=nil {return _bb .PdfObjectBool (false ),_cbe ;};if (len (_ga )>=4)&&(string (_ga [:4])=="\u0074\u0072\u0075\u0065"){_gcb ._feb .Discard (4);return _bb .PdfObjectBool (true ),nil ;};_ga ,_cbe =_gcb ._feb .Peek (5);if _cbe !=nil {return _bb .PdfObjectBool (false ),_cbe ;};if (len (_ga )>=5)&&(string (_ga [:5])=="\u0066\u0061\u006cs\u0065"){_gcb ._feb .Discard (5);return _bb .PdfObjectBool (false ),nil ;};return _bb .PdfObjectBool (false ),_a .New ("\u0075n\u0065\u0078\u0070\u0065c\u0074\u0065\u0064\u0020\u0062o\u006fl\u0065a\u006e\u0020\u0073\u0074\u0072\u0069\u006eg");};

// Root returns the Root of the FDF document.
func (_dde *fdfParser )Root ()(*_bb .PdfObjectDictionary ,error ){if _dde ._gf !=nil {if _fac ,_bed :=_dde .trace (_dde ._gf .Get ("\u0052\u006f\u006f\u0074")).(*_bb .PdfObjectDictionary );_bed {if _ccc ,_ggf :=_dde .trace (_fac .Get ("\u0046\u0044\u0046")).(*_bb .PdfObjectDictionary );_ggf {return _ccc ,nil ;};};};var _gce []int64 ;for _bced :=range _dde ._fee {_gce =append (_gce ,_bced );};_ea .Slice (_gce ,func (_dbe ,_bab int )bool {return _gce [_dbe ]< _gce [_bab ]});for _ ,_gbge :=range _gce {_gcfb :=_dde ._fee [_gbge ];if _gaf ,_ccd :=_dde .trace (_gcfb ).(*_bb .PdfObjectDictionary );_ccd {if _fff ,_ecc :=_dde .trace (_gaf .Get ("\u0046\u0044\u0046")).(*_bb .PdfObjectDictionary );_ecc {return _fff ,nil ;};};};return nil ,_a .New ("\u0046\u0044\u0046\u0020\u006e\u006f\u0074\u0020\u0066\u006f\u0075\u006e\u0064");};func (_aed *fdfParser )skipComments ()error {if _ ,_db :=_aed .skipSpaces ();_db !=nil {return _db ;};_bdb :=true ;for {_aae ,_beg :=_aed ._feb .Peek (1);if _beg !=nil {_bga .Log .Debug ("\u0045\u0072\u0072\u006f\u0072\u0020\u0025\u0073",_beg .Error ());return _beg ;};if _bdb &&_aae [0]!='%'{return nil ;};_bdb =false ;if (_aae [0]!='\r')&&(_aae [0]!='\n'){_aed ._feb .ReadByte ();}else {break ;};};return _aed .skipComments ();};func _gfgd (_gfc _aa .ReadSeeker )(*fdfParser ,error ){_fbgfa :=&fdfParser {};_fbgfa ._bdc =_gfc ;_fbgfa ._fee =map[int64 ]_bb .PdfObject {};_adaa ,_dad ,_bgaf :=_fbgfa .parseFdfVersion ();if _bgaf !=nil {_bga .Log .Error ("U\u006e\u0061\u0062\u006c\u0065\u0020t\u006f\u0020\u0070\u0061\u0072\u0073\u0065\u0020\u0076e\u0072\u0073\u0069o\u006e:\u0020\u0025\u0076",_bgaf );return nil ,_bgaf ;};_fbgfa ._eeb =_adaa ;_fbgfa ._ddf =_dad ;_bgaf =_fbgfa .parse ();return _fbgfa ,_bgaf ;};type fdfParser struct{_eeb int ;_ddf int ;_fee map[int64 ]_bb .PdfObject ;_bdc _aa .ReadSeeker ;_feb *_bg .Reader ;_fcd int64 ;_gf *_bb .PdfObjectDictionary ;};func (_cad *fdfParser )readComment ()(string ,error ){var _fed _cg .Buffer ;_ ,_bbf :=_cad .skipSpaces ();if _bbf !=nil {return _fed .String (),_bbf ;};_bf :=true ;for {_eg ,_ag :=_cad ._feb .Peek (1);if _ag !=nil {_bga .Log .Debug ("\u0045\u0072\u0072\u006f\u0072\u0020\u0025\u0073",_ag .Error ());return _fed .String (),_ag ;};if _bf &&_eg [0]!='%'{return _fed .String (),_a .New ("c\u006f\u006d\u006d\u0065\u006e\u0074 \u0073\u0068\u006f\u0075\u006c\u0064\u0020\u0073\u0074a\u0072\u0074\u0020w\u0069t\u0068\u0020\u0025");};_bf =false ;if (_eg [0]!='\r')&&(_eg [0]!='\n'){_ba ,_ :=_cad ._feb .ReadByte ();_fed .WriteByte (_ba );}else {break ;};};return _fed .String (),nil ;};func (_dbb *fdfParser )parseArray ()(*_bb .PdfObjectArray ,error ){_fbgf :=_bb .MakeArray ();_dbb ._feb .ReadByte ();for {_dbb .skipSpaces ();_aeeg ,_ffc :=_dbb ._feb .Peek (1);if _ffc !=nil {return _fbgf ,_ffc ;};if _aeeg [0]==']'{_dbb ._feb .ReadByte ();break ;};_cfb ,_ffc :=_dbb .parseObject ();if _ffc !=nil {return _fbgf ,_ffc ;};_fbgf .Append (_cfb );};return _fbgf ,nil ;};func (_ac *fdfParser )skipSpaces ()(int ,error ){_cc :=0;for {_bbb ,_gc :=_ac ._feb .ReadByte ();if _gc !=nil {return 0,_gc ;};if _bb .IsWhiteSpace (_bbb ){_cc ++;}else {_ac ._feb .UnreadByte ();break ;};};return _cc ,nil ;};func (_cce *fdfParser )parseNumber ()(_bb .PdfObject ,error ){return _bb .ParseNumber (_cce ._feb )};func (_ede *fdfParser )parseHexString ()(*_bb .PdfObjectString ,error ){_ede ._feb .ReadByte ();var _bbg _cg .Buffer ;for {_cda ,_ddd :=_ede ._feb .Peek (1);if _ddd !=nil {return _bb .MakeHexString (""),_ddd ;};if _cda [0]=='>'{_ede ._feb .ReadByte ();break ;};_eda ,_ :=_ede ._feb .ReadByte ();if !_bb .IsWhiteSpace (_eda ){_bbg .WriteByte (_eda );};};if _bbg .Len ()%2==1{_bbg .WriteRune ('0');};_aea ,_acf :=_d .DecodeString (_bbg .String ());if _acf !=nil {_bga .Log .Debug ("\u0045\u0052\u0052\u004f\u0052\u0020\u0050\u0061\u0072\u0073\u0069\u006e\u0067\u0020\u0068\u0065\u0078\u0020\u0073\u0074r\u0069\u006e\u0067\u003a\u0020\u0027\u0025\u0073\u0027 \u002d\u0020\u0072\u0065\u0074\u0075\u0072\u006e\u0069\u006e\u0067\u0020\u0061n\u0020\u0065\u006d\u0070\u0074\u0079 \u0073\u0074\u0072i\u006e\u0067",_bbg .String ());return _bb .MakeHexString (""),nil ;};return _bb .MakeHexString (string (_aea )),nil ;};func (_fdf *fdfParser )readTextLine ()(string ,error ){var _afd _cg .Buffer ;for {_bba ,_bcg :=_fdf ._feb .Peek (1);if _bcg !=nil {_bga .Log .Debug ("\u0045\u0072\u0072\u006f\u0072\u0020\u0025\u0073",_bcg .Error ());return _afd .String (),_bcg ;};if (_bba [0]!='\r')&&(_bba [0]!='\n'){_ffg ,_ :=_fdf ._feb .ReadByte ();_afd .WriteByte (_ffg );}else {break ;};};return _afd .String (),nil ;};func (_ce *fdfParser )getFileOffset ()int64 {_cee ,_ :=_ce ._bdc .Seek (0,_aa .SeekCurrent );_cee -=int64 (_ce ._feb .Buffered ());return _cee ;};

// Data represents forms data format (FDF) file data.
type Data struct{_cd *_bb .PdfObjectDictionary ;_de *_bb .PdfObjectArray ;};func (_bbba *fdfParser )parseNull ()(_bb .PdfObjectNull ,error ){_ ,_gfd :=_bbba ._feb .Discard (4);return _bb .PdfObjectNull {},_gfd ;};func (_ae *fdfParser )readAtLeast (_ff []byte ,_ca int )(int ,error ){_ded :=_ca ;_dgc :=0;_bc :=0;for _ded > 0{_bbe ,_cfca :=_ae ._feb .Read (_ff [_dgc :]);if _cfca !=nil {_bga .Log .Debug ("\u0045\u0052\u0052O\u0052\u0020\u0046\u0061i\u006c\u0065\u0064\u0020\u0072\u0065\u0061d\u0069\u006e\u0067\u0020\u0028\u0025\u0064\u003b\u0025\u0064\u0029\u0020\u0025\u0073",_bbe ,_bc ,_cfca .Error ());return _dgc ,_a .New ("\u0066\u0061\u0069\u006c\u0065\u0064\u0020\u0072\u0065a\u0064\u0069\u006e\u0067");};_bc ++;_dgc +=_bbe ;_ded -=_bbe ;};return _dgc ,nil ;};func _deg (_ffcg string )(_bb .PdfObjectReference ,error ){_ggd :=_bb .PdfObjectReference {};_gfg :=_af .FindStringSubmatch (string (_ffcg ));if len (_gfg )< 3{_bga .Log .Debug ("\u0045\u0072\u0072or\u0020\u0070\u0061\u0072\u0073\u0069\u006e\u0067\u0020\u0072\u0065\u0066\u0065\u0072\u0065\u006e\u0063\u0065");return _ggd ,_a .New ("\u0075n\u0061\u0062\u006c\u0065 \u0074\u006f\u0020\u0070\u0061r\u0073e\u0020r\u0065\u0066\u0065\u0072\u0065\u006e\u0063e");};_gfa ,_efd :=_e .Atoi (_gfg [1]);if _efd !=nil {_bga .Log .Debug ("\u0045\u0072\u0072\u006f\u0072\u0020\u0070a\u0072\u0073\u0069n\u0067\u0020\u006fb\u006a\u0065c\u0074\u0020\u006e\u0075\u006d\u0062e\u0072 '\u0025\u0073\u0027\u0020\u002d\u0020\u0055\u0073\u0069\u006e\u0067\u0020\u006f\u0062\u006a\u0065\u0063\u0074\u0020\u006e\u0075\u006d\u0020\u003d\u0020\u0030",_gfg [1]);return _ggd ,nil ;};_ggd .ObjectNumber =int64 (_gfa );_gbd ,_efd :=_e .Atoi (_gfg [2]);if _efd !=nil {_bga .Log .Debug ("\u0045\u0072r\u006f\u0072\u0020\u0070\u0061r\u0073\u0069\u006e\u0067\u0020g\u0065\u006e\u0065\u0072\u0061\u0074\u0069\u006f\u006e\u0020\u006e\u0075\u006d\u0062\u0065\u0072\u0020\u0027\u0025\u0073\u0027\u0020\u002d\u0020\u0055\u0073\u0069\u006e\u0067\u0020\u0067\u0065\u006e\u0020\u003d\u0020\u0030",_gfg [2]);return _ggd ,nil ;};_ggd .GenerationNumber =int64 (_gbd );return _ggd ,nil ;};func (_bfa *fdfParser )parseName ()(_bb .PdfObjectName ,error ){var _bdg _cg .Buffer ;_aaa :=false ;for {_eb ,_bcb :=_bfa ._feb .Peek (1);if _bcb ==_aa .EOF {break ;};if _bcb !=nil {return _bb .PdfObjectName (_bdg .String ()),_bcb ;};if !_aaa {if _eb [0]=='/'{_aaa =true ;_bfa ._feb .ReadByte ();}else if _eb [0]=='%'{_bfa .readComment ();_bfa .skipSpaces ();}else {_bga .Log .Debug ("\u0045\u0052\u0052\u004f\u0052\u0020N\u0061\u006d\u0065\u0020\u0073\u0074\u0061\u0072\u0074\u0069\u006e\u0067\u0020w\u0069\u0074\u0068\u0020\u0025\u0073\u0020(\u0025\u0020\u0078\u0029",_eb ,_eb );return _bb .PdfObjectName (_bdg .String ()),_c .Errorf ("\u0069n\u0076a\u006c\u0069\u0064\u0020\u006ea\u006d\u0065:\u0020\u0028\u0025\u0063\u0029",_eb [0]);};}else {if _bb .IsWhiteSpace (_eb [0]){break ;}else if (_eb [0]=='/')||(_eb [0]=='[')||(_eb [0]=='(')||(_eb [0]==']')||(_eb [0]=='<')||(_eb [0]=='>'){break ;}else if _eb [0]=='#'{_ebb ,_eadb :=_bfa ._feb .Peek (3);if _eadb !=nil {return _bb .PdfObjectName (_bdg .String ()),_eadb ;};_bfa ._feb .Discard (3);_agf ,_eadb :=_d .DecodeString (string (_ebb [1:3]));if _eadb !=nil {return _bb .PdfObjectName (_bdg .String ()),_eadb ;};_bdg .Write (_agf );}else {_gfb ,_ :=_bfa ._feb .ReadByte ();_bdg .WriteByte (_gfb );};};};return _bb .PdfObjectName (_bdg .String ()),nil ;};func (_ccg *fdfParser )parseDict ()(*_bb .PdfObjectDictionary ,error ){_bga .Log .Trace ("\u0052\u0065\u0061\u0064\u0069\u006e\u0067\u0020\u0046\u0044\u0046\u0020D\u0069\u0063\u0074\u0021");_ge :=_bb .MakeDict ();_cbd ,_ :=_ccg ._feb .ReadByte ();if _cbd !='<'{return nil ,_a .New ("\u0069\u006e\u0076a\u006c\u0069\u0064\u0020\u0064\u0069\u0063\u0074");};_cbd ,_ =_ccg ._feb .ReadByte ();if _cbd !='<'{return nil ,_a .New ("\u0069\u006e\u0076a\u006c\u0069\u0064\u0020\u0064\u0069\u0063\u0074");};for {_ccg .skipSpaces ();_ccg .skipComments ();_aab ,_ace :=_ccg ._feb .Peek (2);if _ace !=nil {return nil ,_ace ;};_bga .Log .Trace ("D\u0069c\u0074\u0020\u0070\u0065\u0065\u006b\u003a\u0020%\u0073\u0020\u0028\u0025 x\u0029\u0021",string (_aab ),string (_aab ));if (_aab [0]=='>')&&(_aab [1]=='>'){_bga .Log .Trace ("\u0045\u004f\u0046\u0020\u0064\u0069\u0063\u0074\u0069o\u006e\u0061\u0072\u0079");_ccg ._feb .ReadByte ();_ccg ._feb .ReadByte ();break ;};_bga .Log .Trace ("\u0050a\u0072s\u0065\u0020\u0074\u0068\u0065\u0020\u006e\u0061\u006d\u0065\u0021");_aabg ,_ace :=_ccg .parseName ();_bga .Log .Trace ("\u004be\u0079\u003a\u0020\u0025\u0073",_aabg );if _ace !=nil {_bga .Log .Debug ("E\u0052\u0052\u004f\u0052\u0020\u0052e\u0074\u0075\u0072\u006e\u0069\u006e\u0067\u0020\u006ea\u006d\u0065\u0020e\u0072r\u0020\u0025\u0073",_ace );return nil ,_ace ;};if len (_aabg )> 4&&_aabg [len (_aabg )-4:]=="\u006e\u0075\u006c\u006c"{_ggb :=_aabg [0:len (_aabg )-4];_bga .Log .Debug ("\u0054\u0061\u006b\u0069n\u0067\u0020\u0063\u0061\u0072\u0065\u0020\u006f\u0066\u0020n\u0075l\u006c\u0020\u0062\u0075\u0067\u0020\u0028%\u0073\u0029",_aabg );_bga .Log .Debug ("\u004e\u0065\u0077\u0020ke\u0079\u0020\u0022\u0025\u0073\u0022\u0020\u003d\u0020\u006e\u0075\u006c\u006c",_ggb );_ccg .skipSpaces ();_gfbc ,_ :=_ccg ._feb .Peek (1);if _gfbc [0]=='/'{_ge .Set (_ggb ,_bb .MakeNull ());continue ;};};_ccg .skipSpaces ();_gcd ,_ace :=_ccg .parseObject ();if _ace !=nil {return nil ,_ace ;};_ge .Set (_aabg ,_gcd );_bga .Log .Trace ("\u0064\u0069\u0063\u0074\u005b\u0025\u0073\u005d\u0020\u003d\u0020\u0025\u0073",_aabg ,_gcd .String ());};_bga .Log .Trace ("\u0072\u0065\u0074\u0075rn\u0069\u006e\u0067\u0020\u0046\u0044\u0046\u0020\u0044\u0069\u0063\u0074\u0021");return _ge ,nil ;};var _dee =_f .MustCompile ("\u005e\u005b\u005c\u002b\u002d\u002e\u005d\u002a\u0028\u005b\u0030\u002d9\u002e\u005d\u002b\u0029");func (_gab *fdfParser )parse ()error {_gab ._bdc .Seek (0,_aa .SeekStart );_gab ._feb =_bg .NewReader (_gab ._bdc );for {_gab .skipComments ();_edc ,_bdcb :=_gab ._feb .Peek (20);if _bdcb !=nil {_bga .Log .Debug ("\u0045\u0052\u0052\u004f\u0052\u003a\u0020\u0046\u0061\u0069\u006c\u0020\u0074\u006f\u0020r\u0065a\u0064\u0020\u0069\u006e\u0064\u0069\u0072\u0065\u0063\u0074\u0020\u006f\u0062\u006a");return _bdcb ;};if _be .HasPrefix (string (_edc ),"\u0074r\u0061\u0069\u006c\u0065\u0072"){_gab ._feb .Discard (7);_gab .skipSpaces ();_gab .skipComments ();_eeg ,_ :=_gab .parseDict ();_gab ._gf =_eeg ;break ;};_fgcd :=_ffd .FindStringSubmatchIndex (string (_edc ));if len (_fgcd )< 6{_bga .Log .Debug ("\u0045\u0052\u0052\u004f\u0052\u003a\u0020U\u006e\u0061\u0062l\u0065\u0020\u0074\u006f \u0066\u0069\u006e\u0064\u0020\u006f\u0062\u006a\u0065\u0063\u0074\u0020\u0073\u0069\u0067\u006e\u0061\u0074\u0075\u0072\u0065\u0020\u0028\u0025\u0073\u0029",string (_edc ));return _a .New ("\u0075\u006e\u0061b\u006c\u0065\u0020\u0074\u006f\u0020\u0064\u0065\u0074\u0065\u0063\u0074\u0020\u0069\u006e\u0064\u0069\u0072\u0065\u0063\u0074\u0020\u006f\u0062\u006a\u0065\u0063\u0074\u0020s\u0069\u0067\u006e\u0061\u0074\u0075\u0072\u0065");};_gdaa ,_bdcb :=_gab .parseIndirectObject ();if _bdcb !=nil {return _bdcb ;};switch _dec :=_gdaa .(type ){case *_bb .PdfIndirectObject :_gab ._fee [_dec .ObjectNumber ]=_dec ;case *_bb .PdfObjectStream :_gab ._fee [_dec .ObjectNumber ]=_dec ;default:return _a .New ("\u0074\u0079\u0070\u0065\u0020\u0065\u0072\u0072\u006f\u0072");};};return nil ;};func (_dfa *fdfParser )parseFdfVersion ()(int ,int ,error ){_dfa ._bdc .Seek (0,_aa .SeekStart );_afc :=20;_ebd :=make ([]byte ,_afc );_dfa ._bdc .Read (_ebd );_aca :=_ffb .FindStringSubmatch (string (_ebd ));if len (_aca )< 3{_ad ,_cab ,_dfaa :=_dfa .seekFdfVersionTopDown ();if _dfaa !=nil {_bga .Log .Debug ("F\u0061\u0069\u006c\u0065\u0064\u0020\u0072\u0065\u0063\u006f\u0076\u0065\u0072\u0079\u0020\u002d\u0020\u0075n\u0061\u0062\u006c\u0065\u0020\u0074\u006f\u0020\u0066\u0069nd\u0020\u0076\u0065r\u0073i\u006f\u006e");return 0,0,_dfaa ;};return _ad ,_cab ,nil ;};_agb ,_ffbc :=_e .Atoi (_aca [1]);if _ffbc !=nil {return 0,0,_ffbc ;};_dbd ,_ffbc :=_e .Atoi (_aca [2]);if _ffbc !=nil {return 0,0,_ffbc ;};_bga .Log .Debug ("\u0046\u0064\u0066\u0020\u0076\u0065\u0072\u0073\u0069\u006f\u006e\u0020%\u0064\u002e\u0025\u0064",_agb ,_dbd );return int (_agb ),int (_dbd ),nil ;};

// Load loads FDF form data from `r`.
func Load (r _aa .ReadSeeker )(*Data ,error ){_fc ,_g :=_gfgd (r );if _g !=nil {return nil ,_g ;};_gd ,_g :=_fc .Root ();if _g !=nil {return nil ,_g ;};_ee ,_dd :=_bb .GetArray (_gd .Get ("\u0046\u0069\u0065\u006c\u0064\u0073"));if !_dd {return nil ,_a .New ("\u0066\u0069\u0065\u006c\u0064\u0073\u0020\u006d\u0069s\u0073\u0069\u006e\u0067");};return &Data {_de :_ee ,_cd :_gd },nil ;};var _af =_f .MustCompile ("^\u005c\u0073\u002a\u0028\\d\u002b)\u005c\u0073\u002b\u0028\u005cd\u002b\u0029\u005c\u0073\u002b\u0052");func (_ddg *fdfParser )trace (_abg _bb .PdfObject )_bb .PdfObject {switch _afa :=_abg .(type ){case *_bb .PdfObjectReference :_dbef ,_dfdf :=_ddg ._fee [_afa .ObjectNumber ].(*_bb .PdfIndirectObject );if _dfdf {return _dbef .PdfObject ;};_bga .Log .Debug ("\u0054\u0079\u0070\u0065\u0020\u0065\u0072\u0072\u006f\u0072");return nil ;case *_bb .PdfIndirectObject :return _afa .PdfObject ;};return _abg ;};func (_ecb *fdfParser )parseIndirectObject ()(_bb .PdfObject ,error ){_cbcf :=_bb .PdfIndirectObject {};_bga .Log .Trace ("\u002dR\u0065a\u0064\u0020\u0069\u006e\u0064i\u0072\u0065c\u0074\u0020\u006f\u0062\u006a");_bce ,_fgg :=_ecb ._feb .Peek (20);if _fgg !=nil {_bga .Log .Debug ("\u0045\u0052\u0052\u004f\u0052\u003a\u0020\u0046\u0061\u0069\u006c\u0020\u0074\u006f\u0020r\u0065a\u0064\u0020\u0069\u006e\u0064\u0069\u0072\u0065\u0063\u0074\u0020\u006f\u0062\u006a");return &_cbcf ,_fgg ;};_bga .Log .Trace ("\u0028\u0069\u006edi\u0072\u0065\u0063\u0074\u0020\u006f\u0062\u006a\u0020\u0070\u0065\u0065\u006b\u0020\u0022\u0025\u0073\u0022",string (_bce ));_ccb :=_ffd .FindStringSubmatchIndex (string (_bce ));if len (_ccb )< 6{_bga .Log .Debug ("\u0045\u0052\u0052\u004f\u0052\u003a\u0020U\u006e\u0061\u0062l\u0065\u0020\u0074\u006f \u0066\u0069\u006e\u0064\u0020\u006f\u0062\u006a\u0065\u0063\u0074\u0020\u0073\u0069\u0067\u006e\u0061\u0074\u0075\u0072\u0065\u0020\u0028\u0025\u0073\u0029",string (_bce ));return &_cbcf ,_a .New ("\u0075\u006e\u0061b\u006c\u0065\u0020\u0074\u006f\u0020\u0064\u0065\u0074\u0065\u0063\u0074\u0020\u0069\u006e\u0064\u0069\u0072\u0065\u0063\u0074\u0020\u006f\u0062\u006a\u0065\u0063\u0074\u0020s\u0069\u0067\u006e\u0061\u0074\u0075\u0072\u0065");};_ecb ._feb .Discard (_ccb [0]);_bga .Log .Trace ("O\u0066\u0066\u0073\u0065\u0074\u0073\u0020\u0025\u0020\u0064",_ccb );_ffca :=_ccb [1]-_ccb [0];_efe :=make ([]byte ,_ffca );_ ,_fgg =_ecb .readAtLeast (_efe ,_ffca );if _fgg !=nil {_bga .Log .Debug ("\u0045\u0052\u0052\u004f\u0052\u003a\u0020\u0075\u006e\u0061\u0062l\u0065\u0020\u0074\u006f\u0020\u0072\u0065\u0061\u0064\u0020-\u0020\u0025\u0073",_fgg );return nil ,_fgg ;};_bga .Log .Trace ("\u0074\u0065\u0078t\u006c\u0069\u006e\u0065\u003a\u0020\u0025\u0073",_efe );_eef :=_ffd .FindStringSubmatch (string (_efe ));if len (_eef )< 3{_bga .Log .Debug ("\u0045\u0052\u0052\u004f\u0052\u003a\u0020U\u006e\u0061\u0062l\u0065\u0020\u0074\u006f \u0066\u0069\u006e\u0064\u0020\u006f\u0062\u006a\u0065\u0063\u0074\u0020\u0073\u0069\u0067\u006e\u0061\u0074\u0075\u0072\u0065\u0020\u0028\u0025\u0073\u0029",string (_efe ));return &_cbcf ,_a .New ("\u0075\u006e\u0061b\u006c\u0065\u0020\u0074\u006f\u0020\u0064\u0065\u0074\u0065\u0063\u0074\u0020\u0069\u006e\u0064\u0069\u0072\u0065\u0063\u0074\u0020\u006f\u0062\u006a\u0065\u0063\u0074\u0020s\u0069\u0067\u006e\u0061\u0074\u0075\u0072\u0065");};_acfd ,_ :=_e .Atoi (_eef [1]);_ada ,_ :=_e .Atoi (_eef [2]);_cbcf .ObjectNumber =int64 (_acfd );_cbcf .GenerationNumber =int64 (_ada );for {_ccf ,_gcf :=_ecb ._feb .Peek (2);if _gcf !=nil {return &_cbcf ,_gcf ;};_bga .Log .Trace ("I\u006ed\u002e\u0020\u0070\u0065\u0065\u006b\u003a\u0020%\u0073\u0020\u0028\u0025 x\u0029\u0021",string (_ccf ),string (_ccf ));if _bb .IsWhiteSpace (_ccf [0]){_ecb .skipSpaces ();}else if _ccf [0]=='%'{_ecb .skipComments ();}else if (_ccf [0]=='<')&&(_ccf [1]=='<'){_bga .Log .Trace ("\u0043\u0061\u006c\u006c\u0020\u0050\u0061\u0072\u0073e\u0044\u0069\u0063\u0074");_cbcf .PdfObject ,_gcf =_ecb .parseDict ();_bga .Log .Trace ("\u0045\u004f\u0046\u0020Ca\u006c\u006c\u0020\u0050\u0061\u0072\u0073\u0065\u0044\u0069\u0063\u0074\u003a\u0020%\u0076",_gcf );if _gcf !=nil {return &_cbcf ,_gcf ;};_bga .Log .Trace ("\u0050\u0061\u0072\u0073\u0065\u0064\u0020\u0064\u0069\u0063t\u0069\u006f\u006e\u0061\u0072\u0079\u002e.\u002e\u0020\u0066\u0069\u006e\u0069\u0073\u0068\u0065\u0064\u002e");}else if (_ccf [0]=='/')||(_ccf [0]=='(')||(_ccf [0]=='[')||(_ccf [0]=='<'){_cbcf .PdfObject ,_gcf =_ecb .parseObject ();if _gcf !=nil {return &_cbcf ,_gcf ;};_bga .Log .Trace ("P\u0061\u0072\u0073\u0065\u0064\u0020o\u0062\u006a\u0065\u0063\u0074\u0020\u002e\u002e\u002e \u0066\u0069\u006ei\u0073h\u0065\u0064\u002e");}else {if _ccf [0]=='e'{_bcef ,_da :=_ecb .readTextLine ();if _da !=nil {return nil ,_da ;};if len (_bcef )>=6&&_bcef [0:6]=="\u0065\u006e\u0064\u006f\u0062\u006a"{break ;};}else if _ccf [0]=='s'{_ccf ,_ =_ecb ._feb .Peek (10);if string (_ccf [:6])=="\u0073\u0074\u0072\u0065\u0061\u006d"{_fce :=6;if len (_ccf )> 6{if _bb .IsWhiteSpace (_ccf [_fce ])&&_ccf [_fce ]!='\r'&&_ccf [_fce ]!='\n'{_bga .Log .Debug ("\u004e\u006fn\u002d\u0063\u006f\u006e\u0066\u006f\u0072\u006d\u0061\u006e\u0074\u0020\u0046\u0044\u0046\u0020\u006e\u006f\u0074 \u0065\u006e\u0064\u0069\u006e\u0067 \u0073\u0074\u0072\u0065\u0061\u006d\u0020\u006c\u0069\u006e\u0065\u0020\u0070\u0072o\u0070\u0065r\u006c\u0079\u0020\u0077i\u0074\u0068\u0020\u0045\u004fL\u0020\u006d\u0061\u0072\u006b\u0065\u0072");_fce ++;};if _ccf [_fce ]=='\r'{_fce ++;if _ccf [_fce ]=='\n'{_fce ++;};}else if _ccf [_fce ]=='\n'{_fce ++;};};_ecb ._feb .Discard (_fce );_gec ,_dca :=_cbcf .PdfObject .(*_bb .PdfObjectDictionary );if !_dca {return nil ,_a .New ("\u0073\u0074\u0072\u0065\u0061\u006d\u0020\u006f\u0062\u006a\u0065\u0063\u0074\u0020\u006di\u0073s\u0069\u006e\u0067\u0020\u0064\u0069\u0063\u0074\u0069\u006f\u006e\u0061\u0072\u0079");};_bga .Log .Trace ("\u0053\u0074\u0072\u0065\u0061\u006d\u0020\u0064\u0069c\u0074\u0020\u0025\u0073",_gec );_ddda ,_eagb :=_gec .Get ("\u004c\u0065\u006e\u0067\u0074\u0068").(*_bb .PdfObjectInteger );if !_eagb {return nil ,_a .New ("\u0073\u0074re\u0061\u006d\u0020l\u0065\u006e\u0067\u0074h n\u0065ed\u0073\u0020\u0074\u006f\u0020\u0062\u0065 a\u006e\u0020\u0069\u006e\u0074\u0065\u0067e\u0072");};_gda :=*_ddda ;if _gda < 0{return nil ,_a .New ("\u0073\u0074\u0072\u0065\u0061\u006d\u0020\u006e\u0065\u0065\u0064\u0073\u0020\u0074\u006f \u0062e\u0020\u006c\u006f\u006e\u0067\u0065\u0072\u0020\u0074\u0068\u0061\u006e\u0020\u0030");};if int64 (_gda )> _ecb ._fcd {_bga .Log .Debug ("\u0045\u0052R\u004f\u0052\u003a\u0020\u0053t\u0072\u0065\u0061\u006d\u0020l\u0065\u006e\u0067\u0074\u0068\u0020\u0063\u0061\u006e\u006e\u006f\u0074\u0020\u0062\u0065\u0020\u006c\u0061\u0072\u0067\u0065\u0072\u0020\u0074\u0068\u0061\u006e\u0020\u0066\u0069\u006c\u0065\u0020\u0073\u0069\u007a\u0065");return nil ,_a .New ("\u0069n\u0076\u0061l\u0069\u0064\u0020\u0073t\u0072\u0065\u0061m\u0020\u006c\u0065\u006e\u0067\u0074\u0068\u002c\u0020la\u0072\u0067\u0065r\u0020\u0074h\u0061\u006e\u0020\u0066\u0069\u006ce\u0020\u0073i\u007a\u0065");};_bag :=make ([]byte ,_gda );_ ,_gcf =_ecb .readAtLeast (_bag ,int (_gda ));if _gcf !=nil {_bga .Log .Debug ("E\u0052\u0052\u004f\u0052 s\u0074r\u0065\u0061\u006d\u0020\u0028%\u0064\u0029\u003a\u0020\u0025\u0058",len (_bag ),_bag );_bga .Log .Debug ("\u0045R\u0052\u004f\u0052\u003a\u0020\u0025v",_gcf );return nil ,_gcf ;};_edaa :=_bb .PdfObjectStream {};_edaa .Stream =_bag ;_edaa .PdfObjectDictionary =_cbcf .PdfObject .(*_bb .PdfObjectDictionary );_edaa .ObjectNumber =_cbcf .ObjectNumber ;_edaa .GenerationNumber =_cbcf .GenerationNumber ;_ecb .skipSpaces ();_ecb ._feb .Discard (9);_ecb .skipSpaces ();return &_edaa ,nil ;};};_cbcf .PdfObject ,_gcf =_ecb .parseObject ();return &_cbcf ,_gcf ;};};_bga .Log .Trace ("\u0052\u0065\u0074\u0075rn\u0069\u006e\u0067\u0020\u0069\u006e\u0064\u0069\u0072\u0065\u0063\u0074\u0021");return &_cbcf ,nil ;};func (_egb *fdfParser )parseObject ()(_bb .PdfObject ,error ){_bga .Log .Trace ("\u0052e\u0061d\u0020\u0064\u0069\u0072\u0065c\u0074\u0020o\u0062\u006a\u0065\u0063\u0074");_egb .skipSpaces ();for {_gad ,_edde :=_egb ._feb .Peek (2);if _edde !=nil {return nil ,_edde ;};_bga .Log .Trace ("\u0050e\u0065k\u0020\u0073\u0074\u0072\u0069\u006e\u0067\u003a\u0020\u0025\u0073",string (_gad ));if _gad [0]=='/'{_faa ,_fgc :=_egb .parseName ();_bga .Log .Trace ("\u002d\u003e\u004ea\u006d\u0065\u003a\u0020\u0027\u0025\u0073\u0027",_faa );return &_faa ,_fgc ;}else if _gad [0]=='('{_bga .Log .Trace ("\u002d>\u0053\u0074\u0072\u0069\u006e\u0067!");return _egb .parseString ();}else if _gad [0]=='['{_bga .Log .Trace ("\u002d\u003e\u0041\u0072\u0072\u0061\u0079\u0021");return _egb .parseArray ();}else if (_gad [0]=='<')&&(_gad [1]=='<'){_bga .Log .Trace ("\u002d>\u0044\u0069\u0063\u0074\u0021");return _egb .parseDict ();}else if _gad [0]=='<'{_bga .Log .Trace ("\u002d\u003e\u0048\u0065\u0078\u0020\u0073\u0074\u0072\u0069\u006e\u0067\u0021");return _egb .parseHexString ();}else if _gad [0]=='%'{_egb .readComment ();_egb .skipSpaces ();}else {_bga .Log .Trace ("\u002d\u003eN\u0075\u006d\u0062e\u0072\u0020\u006f\u0072\u0020\u0072\u0065\u0066\u003f");_gad ,_ =_egb ._feb .Peek (15);_bbea :=string (_gad );_bga .Log .Trace ("\u0050\u0065\u0065k\u0020\u0073\u0074\u0072\u003a\u0020\u0025\u0073",_bbea );if (len (_bbea )> 3)&&(_bbea [:4]=="\u006e\u0075\u006c\u006c"){_cfa ,_dfd :=_egb .parseNull ();return &_cfa ,_dfd ;}else if (len (_bbea )> 4)&&(_bbea [:5]=="\u0066\u0061\u006cs\u0065"){_cdf ,_eafc :=_egb .parseBool ();return &_cdf ,_eafc ;}else if (len (_bbea )> 3)&&(_bbea [:4]=="\u0074\u0072\u0075\u0065"){_ggg ,_ceg :=_egb .parseBool ();return &_ggg ,_ceg ;};_eee :=_af .FindStringSubmatch (string (_bbea ));if len (_eee )> 1{_gad ,_ =_egb ._feb .ReadBytes ('R');_bga .Log .Trace ("\u002d\u003e\u0020\u0021\u0052\u0065\u0066\u003a\u0020\u0027\u0025\u0073\u0027",string (_gad [:]));_dc ,_ege :=_deg (string (_gad ));return &_dc ,_ege ;};_bfb :=_dee .FindStringSubmatch (string (_bbea ));if len (_bfb )> 1{_bga .Log .Trace ("\u002d\u003e\u0020\u004e\u0075\u006d\u0062\u0065\u0072\u0021");return _egb .parseNumber ();};_bfb =_fd .FindStringSubmatch (string (_bbea ));if len (_bfb )> 1{_bga .Log .Trace ("\u002d\u003e\u0020\u0045xp\u006f\u006e\u0065\u006e\u0074\u0069\u0061\u006c\u0020\u004e\u0075\u006d\u0062\u0065r\u0021");_bga .Log .Trace ("\u0025\u0020\u0073",_bfb );return _egb .parseNumber ();};_bga .Log .Debug ("\u0045R\u0052\u004f\u0052\u0020U\u006e\u006b\u006e\u006f\u0077n\u0020(\u0070e\u0065\u006b\u0020\u0022\u0025\u0073\u0022)",_bbea );return nil ,_a .New ("\u006f\u0062\u006a\u0065\u0063t\u0020\u0070\u0061\u0072\u0073\u0069\u006e\u0067\u0020\u0065\u0072\u0072\u006fr\u0020\u002d\u0020\u0075\u006e\u0065\u0078\u0070\u0065\u0063\u0074\u0065\u0064\u0020\u0070\u0061\u0074\u0074\u0065\u0072\u006e");};};};

// FieldValues implements interface model.FieldValueProvider.
// Returns a map of field names to values (PdfObjects).
func (fdf *Data )FieldValues ()(map[string ]_bb .PdfObject ,error ){_dg ,_fb :=fdf .FieldDictionaries ();if _fb !=nil {return nil ,_fb ;};var _ef []string ;for _bgd :=range _dg {_ef =append (_ef ,_bgd );};_ea .Strings (_ef );_dgg :=map[string ]_bb .PdfObject {};for _ ,_cfc :=range _ef {_fcc :=_dg [_cfc ];_fg :=_bb .TraceToDirectObject (_fcc .Get ("\u0056"));_dgg [_cfc ]=_fg ;};return _dgg ,nil ;};func _acfg (_aad string )(*fdfParser ,error ){_egg :=fdfParser {};_cega :=[]byte (_aad );_gca :=_cg .NewReader (_cega );_egg ._bdc =_gca ;_egg ._fee =map[int64 ]_bb .PdfObject {};_fedd :=_bg .NewReader (_gca );_egg ._feb =_fedd ;_egg ._fcd =int64 (len (_aad ));return &_egg ,_egg .parse ();};func (_bcgfe *fdfParser )seekFdfVersionTopDown ()(int ,int ,error ){_bcgfe ._bdc .Seek (0,_aa .SeekStart );_bcgfe ._feb =_bg .NewReader (_bcgfe ._bdc );_eba :=20;_age :=make ([]byte ,_eba );for {_efec ,_cge :=_bcgfe ._feb .ReadByte ();if _cge !=nil {if _cge ==_aa .EOF {break ;}else {return 0,0,_cge ;};};if _bb .IsDecimalDigit (_efec )&&_age [_eba -1]=='.'&&_bb .IsDecimalDigit (_age [_eba -2])&&_age [_eba -3]=='-'&&_age [_eba -4]=='F'&&_age [_eba -5]=='D'&&_age [_eba -6]=='P'{_ddc :=int (_age [_eba -2]-'0');_ebc :=int (_efec -'0');return _ddc ,_ebc ,nil ;};_age =append (_age [1:_eba ],_efec );};return 0,0,_a .New ("\u0076\u0065\u0072\u0073\u0069\u006f\u006e\u0020\u006e\u006f\u0074\u0020f\u006f\u0075\u006e\u0064");};func (_dbg *fdfParser )seekToEOFMarker (_dff int64 )error {_cbge :=int64 (0);_bda :=int64 (1000);for _cbge < _dff {if _dff <=(_bda +_cbge ){_bda =_dff -_cbge ;};_ ,_agc :=_dbg ._bdc .Seek (-_cbge -_bda ,_aa .SeekEnd );if _agc !=nil {return _agc ;};_eag :=make ([]byte ,_bda );_dbg ._bdc .Read (_eag );_bga .Log .Trace ("\u004c\u006f\u006f\u006bi\u006e\u0067\u0020\u0066\u006f\u0072\u0020\u0045\u004f\u0046 \u006da\u0072\u006b\u0065\u0072\u003a\u0020\u0022%\u0073\u0022",string (_eag ));_ab :=_gb .FindAllStringIndex (string (_eag ),-1);if _ab !=nil {_bcgf :=_ab [len (_ab )-1];_bga .Log .Trace ("\u0049\u006e\u0064\u003a\u0020\u0025\u0020\u0064",_ab );_dbg ._bdc .Seek (-_cbge -_bda +int64 (_bcgf [0]),_aa .SeekEnd );return nil ;};_bga .Log .Debug ("\u0057\u0061\u0072\u006e\u0069\u006eg\u003a\u0020\u0045\u004f\u0046\u0020\u006d\u0061\u0072\u006b\u0065\u0072\u0020\u006e\u006f\u0074\u0020\u0066\u006f\u0075n\u0064\u0021\u0020\u002d\u0020\u0063\u006f\u006e\u0074\u0069\u006e\u0075\u0065\u0020s\u0065e\u006b\u0069\u006e\u0067");_cbge +=_bda ;};_bga .Log .Debug ("\u0045\u0072\u0072\u006f\u0072\u003a\u0020\u0045\u004f\u0046\u0020\u006d\u0061\u0072\u006be\u0072 \u0077\u0061\u0073\u0020\u006e\u006f\u0074\u0020\u0066\u006f\u0075\u006e\u0064\u002e");return _a .New ("\u0045\u004f\u0046\u0020\u006e\u006f\u0074\u0020\u0066\u006f\u0075\u006e\u0064");};var _gb =_f .MustCompile ("\u0025\u0025\u0045O\u0046");