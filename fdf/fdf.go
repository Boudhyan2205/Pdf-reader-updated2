//
// Copyright 2020 FoxyUtils ehf. All rights reserved.
//
// This is a commercial product and requires a license to operate.
// A trial license can be obtained at https://unidoc.io
//
// DO NOT EDIT: generated by unitwist Go source code obfuscator.
//
// Use of this source code is governed by the UniDoc End User License Agreement
// terms that can be accessed at https://unidoc.io/eula/

// Package fdf provides support for loading form field data from Form Field Data (FDF) files.
package fdf ;import (_dg "bufio";_e "bytes";_de "encoding/hex";_d "errors";_f "fmt";_b "github.com/unidoc/unipdf/v3/common";_dgf "github.com/unidoc/unipdf/v3/core";_ae "io";_dd "os";_ad "regexp";_ea "sort";_c "strconv";_g "strings";);func (_cee *fdfParser )parseFdfVersion ()(int ,int ,error ){_cee ._acb .Seek (0,_ae .SeekStart );
_gcea :=20;_ecd :=make ([]byte ,_gcea );_cee ._acb .Read (_ecd );_cbg :=_cdd .FindStringSubmatch (string (_ecd ));if len (_cbg )< 3{_dag ,_fgd ,_gcef :=_cee .seekFdfVersionTopDown ();if _gcef !=nil {_b .Log .Debug ("F\u0061\u0069\u006c\u0065\u0064\u0020\u0072\u0065\u0063\u006f\u0076\u0065\u0072\u0079\u0020\u002d\u0020\u0075n\u0061\u0062\u006c\u0065\u0020\u0074\u006f\u0020\u0066\u0069nd\u0020\u0076\u0065r\u0073i\u006f\u006e");
return 0,0,_gcef ;};return _dag ,_fgd ,nil ;};_fgc ,_afc :=_c .Atoi (_cbg [1]);if _afc !=nil {return 0,0,_afc ;};_adcc ,_afc :=_c .Atoi (_cbg [2]);if _afc !=nil {return 0,0,_afc ;};_b .Log .Debug ("\u0046\u0064\u0066\u0020\u0076\u0065\u0072\u0073\u0069\u006f\u006e\u0020%\u0064\u002e\u0025\u0064",_fgc ,_adcc );
return _fgc ,_adcc ,nil ;};func (_fba *fdfParser )parseDict ()(*_dgf .PdfObjectDictionary ,error ){_b .Log .Trace ("\u0052\u0065\u0061\u0064\u0069\u006e\u0067\u0020\u0046\u0044\u0046\u0020D\u0069\u0063\u0074\u0021");_cbb :=_dgf .MakeDict ();_fdd ,_ :=_fba ._dec .ReadByte ();
if _fdd !='<'{return nil ,_d .New ("\u0069\u006e\u0076a\u006c\u0069\u0064\u0020\u0064\u0069\u0063\u0074");};_fdd ,_ =_fba ._dec .ReadByte ();if _fdd !='<'{return nil ,_d .New ("\u0069\u006e\u0076a\u006c\u0069\u0064\u0020\u0064\u0069\u0063\u0074");};for {_fba .skipSpaces ();
_fba .skipComments ();_bfb ,_dgec :=_fba ._dec .Peek (2);if _dgec !=nil {return nil ,_dgec ;};_b .Log .Trace ("D\u0069c\u0074\u0020\u0070\u0065\u0065\u006b\u003a\u0020%\u0073\u0020\u0028\u0025 x\u0029\u0021",string (_bfb ),string (_bfb ));if (_bfb [0]=='>')&&(_bfb [1]=='>'){_b .Log .Trace ("\u0045\u004f\u0046\u0020\u0064\u0069\u0063\u0074\u0069o\u006e\u0061\u0072\u0079");
_fba ._dec .ReadByte ();_fba ._dec .ReadByte ();break ;};_b .Log .Trace ("\u0050a\u0072s\u0065\u0020\u0074\u0068\u0065\u0020\u006e\u0061\u006d\u0065\u0021");_bbae ,_dgec :=_fba .parseName ();_b .Log .Trace ("\u004be\u0079\u003a\u0020\u0025\u0073",_bbae );
if _dgec !=nil {_b .Log .Debug ("E\u0052\u0052\u004f\u0052\u0020\u0052e\u0074\u0075\u0072\u006e\u0069\u006e\u0067\u0020\u006ea\u006d\u0065\u0020e\u0072r\u0020\u0025\u0073",_dgec );return nil ,_dgec ;};if len (_bbae )> 4&&_bbae [len (_bbae )-4:]=="\u006e\u0075\u006c\u006c"{_gce :=_bbae [0:len (_bbae )-4];
_b .Log .Debug ("\u0054\u0061\u006b\u0069n\u0067\u0020\u0063\u0061\u0072\u0065\u0020\u006f\u0066\u0020n\u0075l\u006c\u0020\u0062\u0075\u0067\u0020\u0028%\u0073\u0029",_bbae );_b .Log .Debug ("\u004e\u0065\u0077\u0020ke\u0079\u0020\u0022\u0025\u0073\u0022\u0020\u003d\u0020\u006e\u0075\u006c\u006c",_gce );
_fba .skipSpaces ();_ega ,_ :=_fba ._dec .Peek (1);if _ega [0]=='/'{_cbb .Set (_gce ,_dgf .MakeNull ());continue ;};};_fba .skipSpaces ();_deg ,_dgec :=_fba .parseObject ();if _dgec !=nil {return nil ,_dgec ;};_cbb .Set (_bbae ,_deg );_b .Log .Trace ("\u0064\u0069\u0063\u0074\u005b\u0025\u0073\u005d\u0020\u003d\u0020\u0025\u0073",_bbae ,_deg .String ());
};_b .Log .Trace ("\u0072\u0065\u0074\u0075rn\u0069\u006e\u0067\u0020\u0046\u0044\u0046\u0020\u0044\u0069\u0063\u0074\u0021");return _cbb ,nil ;};

// FieldDictionaries returns a map of field names to field dictionaries.
func (fdf *Data )FieldDictionaries ()(map[string ]*_dgf .PdfObjectDictionary ,error ){_ab :=map[string ]*_dgf .PdfObjectDictionary {};for _cc :=0;_cc < fdf ._ag .Len ();_cc ++{_gf ,_ca :=_dgf .GetDict (fdf ._ag .Get (_cc ));if _ca {_cdb ,_ :=_dgf .GetString (_gf .Get ("\u0054"));
if _cdb !=nil {_ab [_cdb .Str ()]=_gf ;};};};return _ab ,nil ;};func (_ace *fdfParser )parseObject ()(_dgf .PdfObject ,error ){_b .Log .Trace ("\u0052e\u0061d\u0020\u0064\u0069\u0072\u0065c\u0074\u0020o\u0062\u006a\u0065\u0063\u0074");_ace .skipSpaces ();
for {_eag ,_dge :=_ace ._dec .Peek (2);if _dge !=nil {return nil ,_dge ;};_b .Log .Trace ("\u0050e\u0065k\u0020\u0073\u0074\u0072\u0069\u006e\u0067\u003a\u0020\u0025\u0073",string (_eag ));if _eag [0]=='/'{_dafa ,_gfd :=_ace .parseName ();_b .Log .Trace ("\u002d\u003e\u004ea\u006d\u0065\u003a\u0020\u0027\u0025\u0073\u0027",_dafa );
return &_dafa ,_gfd ;}else if _eag [0]=='('{_b .Log .Trace ("\u002d>\u0053\u0074\u0072\u0069\u006e\u0067!");return _ace .parseString ();}else if _eag [0]=='['{_b .Log .Trace ("\u002d\u003e\u0041\u0072\u0072\u0061\u0079\u0021");return _ace .parseArray ();
}else if (_eag [0]=='<')&&(_eag [1]=='<'){_b .Log .Trace ("\u002d>\u0044\u0069\u0063\u0074\u0021");return _ace .parseDict ();}else if _eag [0]=='<'{_b .Log .Trace ("\u002d\u003e\u0048\u0065\u0078\u0020\u0073\u0074\u0072\u0069\u006e\u0067\u0021");return _ace .parseHexString ();
}else if _eag [0]=='%'{_ace .readComment ();_ace .skipSpaces ();}else {_b .Log .Trace ("\u002d\u003eN\u0075\u006d\u0062e\u0072\u0020\u006f\u0072\u0020\u0072\u0065\u0066\u003f");_eag ,_ =_ace ._dec .Peek (15);_cfgb :=string (_eag );_b .Log .Trace ("\u0050\u0065\u0065k\u0020\u0073\u0074\u0072\u003a\u0020\u0025\u0073",_cfgb );
if (len (_cfgb )> 3)&&(_cfgb [:4]=="\u006e\u0075\u006c\u006c"){_bgd ,_gfb :=_ace .parseNull ();return &_bgd ,_gfb ;}else if (len (_cfgb )> 4)&&(_cfgb [:5]=="\u0066\u0061\u006cs\u0065"){_gbba ,_agc :=_ace .parseBool ();return &_gbba ,_agc ;}else if (len (_cfgb )> 3)&&(_cfgb [:4]=="\u0074\u0072\u0075\u0065"){_abgg ,_faf :=_ace .parseBool ();
return &_abgg ,_faf ;};_bbf :=_geec .FindStringSubmatch (_cfgb );if len (_bbf )> 1{_eag ,_ =_ace ._dec .ReadBytes ('R');_b .Log .Trace ("\u002d\u003e\u0020\u0021\u0052\u0065\u0066\u003a\u0020\u0027\u0025\u0073\u0027",string (_eag [:]));_edac ,_gade :=_cdbd (string (_eag ));
return &_edac ,_gade ;};_ebb :=_abg .FindStringSubmatch (_cfgb );if len (_ebb )> 1{_b .Log .Trace ("\u002d\u003e\u0020\u004e\u0075\u006d\u0062\u0065\u0072\u0021");return _ace .parseNumber ();};_ebb =_add .FindStringSubmatch (_cfgb );if len (_ebb )> 1{_b .Log .Trace ("\u002d\u003e\u0020\u0045xp\u006f\u006e\u0065\u006e\u0074\u0069\u0061\u006c\u0020\u004e\u0075\u006d\u0062\u0065r\u0021");
_b .Log .Trace ("\u0025\u0020\u0073",_ebb );return _ace .parseNumber ();};_b .Log .Debug ("\u0045R\u0052\u004f\u0052\u0020U\u006e\u006b\u006e\u006f\u0077n\u0020(\u0070e\u0065\u006b\u0020\u0022\u0025\u0073\u0022)",_cfgb );return nil ,_d .New ("\u006f\u0062\u006a\u0065\u0063t\u0020\u0070\u0061\u0072\u0073\u0069\u006e\u0067\u0020\u0065\u0072\u0072\u006fr\u0020\u002d\u0020\u0075\u006e\u0065\u0078\u0070\u0065\u0063\u0074\u0065\u0064\u0020\u0070\u0061\u0074\u0074\u0065\u0072\u006e");
};};};var _gad =_ad .MustCompile ("\u0028\u005c\u0064\u002b)\\\u0073\u002b\u0028\u005c\u0064\u002b\u0029\u005c\u0073\u002b\u006f\u0062\u006a");func (_eda *fdfParser )setFileOffset (_gdg int64 ){_eda ._acb .Seek (_gdg ,_ae .SeekStart );_eda ._dec =_dg .NewReader (_eda ._acb );
};func (_bga *fdfParser )trace (_fbd _dgf .PdfObject )_dgf .PdfObject {switch _aff :=_fbd .(type ){case *_dgf .PdfObjectReference :_ccg ,_bggc :=_bga ._bc [_aff .ObjectNumber ].(*_dgf .PdfIndirectObject );if _bggc {return _ccg .PdfObject ;};_b .Log .Debug ("\u0054\u0079\u0070\u0065\u0020\u0065\u0072\u0072\u006f\u0072");
return nil ;case *_dgf .PdfIndirectObject :return _aff .PdfObject ;};return _fbd ;};

// Root returns the Root of the FDF document.
func (_acd *fdfParser )Root ()(*_dgf .PdfObjectDictionary ,error ){if _acd ._addg !=nil {if _ffa ,_feb :=_acd .trace (_acd ._addg .Get ("\u0052\u006f\u006f\u0074")).(*_dgf .PdfObjectDictionary );_feb {if _dgcd ,_aaba :=_acd .trace (_ffa .Get ("\u0046\u0044\u0046")).(*_dgf .PdfObjectDictionary );
_aaba {return _dgcd ,nil ;};};};var _cac []int64 ;for _gdgg :=range _acd ._bc {_cac =append (_cac ,_gdgg );};_ea .Slice (_cac ,func (_bbec ,_fga int )bool {return _cac [_bbec ]< _cac [_fga ]});for _ ,_aedb :=range _cac {_fff :=_acd ._bc [_aedb ];if _eefe ,_ege :=_acd .trace (_fff ).(*_dgf .PdfObjectDictionary );
_ege {if _fge ,_cdbe :=_acd .trace (_eefe .Get ("\u0046\u0044\u0046")).(*_dgf .PdfObjectDictionary );_cdbe {return _fge ,nil ;};};};return nil ,_d .New ("\u0046\u0044\u0046\u0020\u006e\u006f\u0074\u0020\u0066\u006f\u0075\u006e\u0064");};func (_bd *fdfParser )parseArray ()(*_dgf .PdfObjectArray ,error ){_egg :=_dgf .MakeArray ();
_bd ._dec .ReadByte ();for {_bd .skipSpaces ();_gbd ,_cef :=_bd ._dec .Peek (1);if _cef !=nil {return _egg ,_cef ;};if _gbd [0]==']'{_bd ._dec .ReadByte ();break ;};_egd ,_cef :=_bd .parseObject ();if _cef !=nil {return _egg ,_cef ;};_egg .Append (_egd );
};return _egg ,nil ;};func _ggbg (_cbd string )(*fdfParser ,error ){_gde :=fdfParser {};_gcad :=[]byte (_cbd );_faeg :=_e .NewReader (_gcad );_gde ._acb =_faeg ;_gde ._bc =map[int64 ]_dgf .PdfObject {};_abcc :=_dg .NewReader (_faeg );_gde ._dec =_abcc ;
_gde ._afe =int64 (len (_cbd ));return &_gde ,_gde .parse ();};func (_ff *fdfParser )parseIndirectObject ()(_dgf .PdfObject ,error ){_gecf :=_dgf .PdfIndirectObject {};_b .Log .Trace ("\u002dR\u0065a\u0064\u0020\u0069\u006e\u0064i\u0072\u0065c\u0074\u0020\u006f\u0062\u006a");
_eec ,_ade :=_ff ._dec .Peek (20);if _ade !=nil {_b .Log .Debug ("\u0045\u0052\u0052\u004f\u0052\u003a\u0020\u0046\u0061\u0069\u006c\u0020\u0074\u006f\u0020r\u0065a\u0064\u0020\u0069\u006e\u0064\u0069\u0072\u0065\u0063\u0074\u0020\u006f\u0062\u006a");return &_gecf ,_ade ;
};_b .Log .Trace ("\u0028\u0069\u006edi\u0072\u0065\u0063\u0074\u0020\u006f\u0062\u006a\u0020\u0070\u0065\u0065\u006b\u0020\u0022\u0025\u0073\u0022",string (_eec ));_eef :=_gad .FindStringSubmatchIndex (string (_eec ));if len (_eef )< 6{_b .Log .Debug ("\u0045\u0052\u0052\u004f\u0052\u003a\u0020U\u006e\u0061\u0062l\u0065\u0020\u0074\u006f \u0066\u0069\u006e\u0064\u0020\u006f\u0062\u006a\u0065\u0063\u0074\u0020\u0073\u0069\u0067\u006e\u0061\u0074\u0075\u0072\u0065\u0020\u0028\u0025\u0073\u0029",string (_eec ));
return &_gecf ,_d .New ("\u0075\u006e\u0061b\u006c\u0065\u0020\u0074\u006f\u0020\u0064\u0065\u0074\u0065\u0063\u0074\u0020\u0069\u006e\u0064\u0069\u0072\u0065\u0063\u0074\u0020\u006f\u0062\u006a\u0065\u0063\u0074\u0020s\u0069\u0067\u006e\u0061\u0074\u0075\u0072\u0065");
};_ff ._dec .Discard (_eef [0]);_b .Log .Trace ("O\u0066\u0066\u0073\u0065\u0074\u0073\u0020\u0025\u0020\u0064",_eef );_afb :=_eef [1]-_eef [0];_ba :=make ([]byte ,_afb );_ ,_ade =_ff .readAtLeast (_ba ,_afb );if _ade !=nil {_b .Log .Debug ("\u0045\u0052\u0052\u004f\u0052\u003a\u0020\u0075\u006e\u0061\u0062l\u0065\u0020\u0074\u006f\u0020\u0072\u0065\u0061\u0064\u0020-\u0020\u0025\u0073",_ade );
return nil ,_ade ;};_b .Log .Trace ("\u0074\u0065\u0078t\u006c\u0069\u006e\u0065\u003a\u0020\u0025\u0073",_ba );_fbb :=_gad .FindStringSubmatch (string (_ba ));if len (_fbb )< 3{_b .Log .Debug ("\u0045\u0052\u0052\u004f\u0052\u003a\u0020U\u006e\u0061\u0062l\u0065\u0020\u0074\u006f \u0066\u0069\u006e\u0064\u0020\u006f\u0062\u006a\u0065\u0063\u0074\u0020\u0073\u0069\u0067\u006e\u0061\u0074\u0075\u0072\u0065\u0020\u0028\u0025\u0073\u0029",string (_ba ));
return &_gecf ,_d .New ("\u0075\u006e\u0061b\u006c\u0065\u0020\u0074\u006f\u0020\u0064\u0065\u0074\u0065\u0063\u0074\u0020\u0069\u006e\u0064\u0069\u0072\u0065\u0063\u0074\u0020\u006f\u0062\u006a\u0065\u0063\u0074\u0020s\u0069\u0067\u006e\u0061\u0074\u0075\u0072\u0065");
};_ccfe ,_ :=_c .Atoi (_fbb [1]);_cga ,_ :=_c .Atoi (_fbb [2]);_gecf .ObjectNumber =int64 (_ccfe );_gecf .GenerationNumber =int64 (_cga );for {_abgb ,_agg :=_ff ._dec .Peek (2);if _agg !=nil {return &_gecf ,_agg ;};_b .Log .Trace ("I\u006ed\u002e\u0020\u0070\u0065\u0065\u006b\u003a\u0020%\u0073\u0020\u0028\u0025 x\u0029\u0021",string (_abgb ),string (_abgb ));
if _dgf .IsWhiteSpace (_abgb [0]){_ff .skipSpaces ();}else if _abgb [0]=='%'{_ff .skipComments ();}else if (_abgb [0]=='<')&&(_abgb [1]=='<'){_b .Log .Trace ("\u0043\u0061\u006c\u006c\u0020\u0050\u0061\u0072\u0073e\u0044\u0069\u0063\u0074");_gecf .PdfObject ,_agg =_ff .parseDict ();
_b .Log .Trace ("\u0045\u004f\u0046\u0020Ca\u006c\u006c\u0020\u0050\u0061\u0072\u0073\u0065\u0044\u0069\u0063\u0074\u003a\u0020%\u0076",_agg );if _agg !=nil {return &_gecf ,_agg ;};_b .Log .Trace ("\u0050\u0061\u0072\u0073\u0065\u0064\u0020\u0064\u0069\u0063t\u0069\u006f\u006e\u0061\u0072\u0079\u002e.\u002e\u0020\u0066\u0069\u006e\u0069\u0073\u0068\u0065\u0064\u002e");
}else if (_abgb [0]=='/')||(_abgb [0]=='(')||(_abgb [0]=='[')||(_abgb [0]=='<'){_gecf .PdfObject ,_agg =_ff .parseObject ();if _agg !=nil {return &_gecf ,_agg ;};_b .Log .Trace ("P\u0061\u0072\u0073\u0065\u0064\u0020o\u0062\u006a\u0065\u0063\u0074\u0020\u002e\u002e\u002e \u0066\u0069\u006ei\u0073h\u0065\u0064\u002e");
}else {if _abgb [0]=='e'{_fdb ,_cbbg :=_ff .readTextLine ();if _cbbg !=nil {return nil ,_cbbg ;};if len (_fdb )>=6&&_fdb [0:6]=="\u0065\u006e\u0064\u006f\u0062\u006a"{break ;};}else if _abgb [0]=='s'{_abgb ,_ =_ff ._dec .Peek (10);if string (_abgb [:6])=="\u0073\u0074\u0072\u0065\u0061\u006d"{_dcd :=6;
if len (_abgb )> 6{if _dgf .IsWhiteSpace (_abgb [_dcd ])&&_abgb [_dcd ]!='\r'&&_abgb [_dcd ]!='\n'{_b .Log .Debug ("\u004e\u006fn\u002d\u0063\u006f\u006e\u0066\u006f\u0072\u006d\u0061\u006e\u0074\u0020\u0046\u0044\u0046\u0020\u006e\u006f\u0074 \u0065\u006e\u0064\u0069\u006e\u0067 \u0073\u0074\u0072\u0065\u0061\u006d\u0020\u006c\u0069\u006e\u0065\u0020\u0070\u0072o\u0070\u0065r\u006c\u0079\u0020\u0077i\u0074\u0068\u0020\u0045\u004fL\u0020\u006d\u0061\u0072\u006b\u0065\u0072");
_dcd ++;};if _abgb [_dcd ]=='\r'{_dcd ++;if _abgb [_dcd ]=='\n'{_dcd ++;};}else if _abgb [_dcd ]=='\n'{_dcd ++;};};_ff ._dec .Discard (_dcd );_bec ,_ceg :=_gecf .PdfObject .(*_dgf .PdfObjectDictionary );if !_ceg {return nil ,_d .New ("\u0073\u0074\u0072\u0065\u0061\u006d\u0020\u006f\u0062\u006a\u0065\u0063\u0074\u0020\u006di\u0073s\u0069\u006e\u0067\u0020\u0064\u0069\u0063\u0074\u0069\u006f\u006e\u0061\u0072\u0079");
};_b .Log .Trace ("\u0053\u0074\u0072\u0065\u0061\u006d\u0020\u0064\u0069c\u0074\u0020\u0025\u0073",_bec );_cfa ,_bcaa :=_bec .Get ("\u004c\u0065\u006e\u0067\u0074\u0068").(*_dgf .PdfObjectInteger );if !_bcaa {return nil ,_d .New ("\u0073\u0074re\u0061\u006d\u0020l\u0065\u006e\u0067\u0074h n\u0065ed\u0073\u0020\u0074\u006f\u0020\u0062\u0065 a\u006e\u0020\u0069\u006e\u0074\u0065\u0067e\u0072");
};_edb :=*_cfa ;if _edb < 0{return nil ,_d .New ("\u0073\u0074\u0072\u0065\u0061\u006d\u0020\u006e\u0065\u0065\u0064\u0073\u0020\u0074\u006f \u0062e\u0020\u006c\u006f\u006e\u0067\u0065\u0072\u0020\u0074\u0068\u0061\u006e\u0020\u0030");};if int64 (_edb )> _ff ._afe {_b .Log .Debug ("\u0045\u0052R\u004f\u0052\u003a\u0020\u0053t\u0072\u0065\u0061\u006d\u0020l\u0065\u006e\u0067\u0074\u0068\u0020\u0063\u0061\u006e\u006e\u006f\u0074\u0020\u0062\u0065\u0020\u006c\u0061\u0072\u0067\u0065\u0072\u0020\u0074\u0068\u0061\u006e\u0020\u0066\u0069\u006c\u0065\u0020\u0073\u0069\u007a\u0065");
return nil ,_d .New ("\u0069n\u0076\u0061l\u0069\u0064\u0020\u0073t\u0072\u0065\u0061m\u0020\u006c\u0065\u006e\u0067\u0074\u0068\u002c\u0020la\u0072\u0067\u0065r\u0020\u0074h\u0061\u006e\u0020\u0066\u0069\u006ce\u0020\u0073i\u007a\u0065");};_geaa :=make ([]byte ,_edb );
_ ,_agg =_ff .readAtLeast (_geaa ,int (_edb ));if _agg !=nil {_b .Log .Debug ("E\u0052\u0052\u004f\u0052 s\u0074r\u0065\u0061\u006d\u0020\u0028%\u0064\u0029\u003a\u0020\u0025\u0058",len (_geaa ),_geaa );_b .Log .Debug ("\u0045R\u0052\u004f\u0052\u003a\u0020\u0025v",_agg );
return nil ,_agg ;};_caa :=_dgf .PdfObjectStream {};_caa .Stream =_geaa ;_caa .PdfObjectDictionary =_gecf .PdfObject .(*_dgf .PdfObjectDictionary );_caa .ObjectNumber =_gecf .ObjectNumber ;_caa .GenerationNumber =_gecf .GenerationNumber ;_ff .skipSpaces ();
_ff ._dec .Discard (9);_ff .skipSpaces ();return &_caa ,nil ;};};_gecf .PdfObject ,_agg =_ff .parseObject ();return &_gecf ,_agg ;};};_b .Log .Trace ("\u0052\u0065\u0074\u0075rn\u0069\u006e\u0067\u0020\u0069\u006e\u0064\u0069\u0072\u0065\u0063\u0074\u0021");
return &_gecf ,nil ;};func (_gca *fdfParser )skipComments ()error {if _ ,_dgcf :=_gca .skipSpaces ();_dgcf !=nil {return _dgcf ;};_gdc :=true ;for {_eac ,_fg :=_gca ._dec .Peek (1);if _fg !=nil {_b .Log .Debug ("\u0045\u0072\u0072\u006f\u0072\u0020\u0025\u0073",_fg .Error ());
return _fg ;};if _gdc &&_eac [0]!='%'{return nil ;};_gdc =false ;if (_eac [0]!='\r')&&(_eac [0]!='\n'){_gca ._dec .ReadByte ();}else {break ;};};return _gca .skipComments ();};func (_abf *fdfParser )parseNull ()(_dgf .PdfObjectNull ,error ){_ ,_gec :=_abf ._dec .Discard (4);
return _dgf .PdfObjectNull {},_gec ;};func (_aab *fdfParser )parseBool ()(_dgf .PdfObjectBool ,error ){_dcec ,_eacac :=_aab ._dec .Peek (4);if _eacac !=nil {return _dgf .PdfObjectBool (false ),_eacac ;};if (len (_dcec )>=4)&&(string (_dcec [:4])=="\u0074\u0072\u0075\u0065"){_aab ._dec .Discard (4);
return _dgf .PdfObjectBool (true ),nil ;};_dcec ,_eacac =_aab ._dec .Peek (5);if _eacac !=nil {return _dgf .PdfObjectBool (false ),_eacac ;};if (len (_dcec )>=5)&&(string (_dcec [:5])=="\u0066\u0061\u006cs\u0065"){_aab ._dec .Discard (5);return _dgf .PdfObjectBool (false ),nil ;
};return _dgf .PdfObjectBool (false ),_d .New ("\u0075n\u0065\u0078\u0070\u0065c\u0074\u0065\u0064\u0020\u0062o\u006fl\u0065a\u006e\u0020\u0073\u0074\u0072\u0069\u006eg");};var _cb =_ad .MustCompile ("\u0025\u0025\u0045O\u0046");func _cfcd (_ffaf _ae .ReadSeeker )(*fdfParser ,error ){_fcb :=&fdfParser {};
_fcb ._acb =_ffaf ;_fcb ._bc =map[int64 ]_dgf .PdfObject {};_caf ,_gbf ,_gcc :=_fcb .parseFdfVersion ();if _gcc !=nil {_b .Log .Error ("U\u006e\u0061\u0062\u006c\u0065\u0020t\u006f\u0020\u0070\u0061\u0072\u0073\u0065\u0020\u0076e\u0072\u0073\u0069o\u006e:\u0020\u0025\u0076",_gcc );
return nil ,_gcc ;};_fcb ._ee =_caf ;_fcb ._dcf =_gbf ;_gcc =_fcb .parse ();return _fcb ,_gcc ;};func (_gb *fdfParser )parseNumber ()(_dgf .PdfObject ,error ){return _dgf .ParseNumber (_gb ._dec )};

// LoadFromPath loads FDF form data from file path `fdfPath`.
func LoadFromPath (fdfPath string )(*Data ,error ){_ddb ,_eca :=_dd .Open (fdfPath );if _eca !=nil {return nil ,_eca ;};defer _ddb .Close ();return Load (_ddb );};var _abg =_ad .MustCompile ("\u005e\u005b\u005c\u002b\u002d\u002e\u005d\u002a\u0028\u005b\u0030\u002d9\u002e\u005d\u002b\u0029");
func (_adc *fdfParser )skipSpaces ()(int ,error ){_ccd :=0;for {_cf ,_fe :=_adc ._dec .ReadByte ();if _fe !=nil {return 0,_fe ;};if _dgf .IsWhiteSpace (_cf ){_ccd ++;}else {_adc ._dec .UnreadByte ();break ;};};return _ccd ,nil ;};func (_cag *fdfParser )seekToEOFMarker (_bdg int64 )error {_fae :=int64 (0);
_cbeg :=int64 (1000);for _fae < _bdg {if _bdg <=(_cbeg +_fae ){_cbeg =_bdg -_fae ;};_ ,_ebg :=_cag ._acb .Seek (-_fae -_cbeg ,_ae .SeekEnd );if _ebg !=nil {return _ebg ;};_ebgb :=make ([]byte ,_cbeg );_cag ._acb .Read (_ebgb );_b .Log .Trace ("\u004c\u006f\u006f\u006bi\u006e\u0067\u0020\u0066\u006f\u0072\u0020\u0045\u004f\u0046 \u006da\u0072\u006b\u0065\u0072\u003a\u0020\u0022%\u0073\u0022",string (_ebgb ));
_aca :=_cb .FindAllStringIndex (string (_ebgb ),-1);if _aca !=nil {_ced :=_aca [len (_aca )-1];_b .Log .Trace ("\u0049\u006e\u0064\u003a\u0020\u0025\u0020\u0064",_aca );_cag ._acb .Seek (-_fae -_cbeg +int64 (_ced [0]),_ae .SeekEnd );return nil ;};_b .Log .Debug ("\u0057\u0061\u0072\u006e\u0069\u006eg\u003a\u0020\u0045\u004f\u0046\u0020\u006d\u0061\u0072\u006b\u0065\u0072\u0020\u006e\u006f\u0074\u0020\u0066\u006f\u0075n\u0064\u0021\u0020\u002d\u0020\u0063\u006f\u006e\u0074\u0069\u006e\u0075\u0065\u0020s\u0065e\u006b\u0069\u006e\u0067");
_fae +=_cbeg ;};_b .Log .Debug ("\u0045\u0072\u0072\u006f\u0072\u003a\u0020\u0045\u004f\u0046\u0020\u006d\u0061\u0072\u006be\u0072 \u0077\u0061\u0073\u0020\u006e\u006f\u0074\u0020\u0066\u006f\u0075\u006e\u0064\u002e");return _d .New ("\u0045\u004f\u0046\u0020\u006e\u006f\u0074\u0020\u0066\u006f\u0075\u006e\u0064");
};func (_ggb *fdfParser )parseString ()(*_dgf .PdfObjectString ,error ){_ggb ._dec .ReadByte ();var _cgb _e .Buffer ;_dae :=1;for {_fc ,_fcf :=_ggb ._dec .Peek (1);if _fcf !=nil {return _dgf .MakeString (_cgb .String ()),_fcf ;};if _fc [0]=='\\'{_ggb ._dec .ReadByte ();
_ce ,_bgc :=_ggb ._dec .ReadByte ();if _bgc !=nil {return _dgf .MakeString (_cgb .String ()),_bgc ;};if _dgf .IsOctalDigit (_ce ){_dca ,_ecf :=_ggb ._dec .Peek (2);if _ecf !=nil {return _dgf .MakeString (_cgb .String ()),_ecf ;};var _gcab []byte ;_gcab =append (_gcab ,_ce );
for _ ,_be :=range _dca {if _dgf .IsOctalDigit (_be ){_gcab =append (_gcab ,_be );}else {break ;};};_ggb ._dec .Discard (len (_gcab )-1);_b .Log .Trace ("\u004e\u0075\u006d\u0065ri\u0063\u0020\u0073\u0074\u0072\u0069\u006e\u0067\u0020\u0022\u0025\u0073\u0022",_gcab );
_dgb ,_ecf :=_c .ParseUint (string (_gcab ),8,32);if _ecf !=nil {return _dgf .MakeString (_cgb .String ()),_ecf ;};_cgb .WriteByte (byte (_dgb ));continue ;};switch _ce {case 'n':_cgb .WriteRune ('\n');case 'r':_cgb .WriteRune ('\r');case 't':_cgb .WriteRune ('\t');
case 'b':_cgb .WriteRune ('\b');case 'f':_cgb .WriteRune ('\f');case '(':_cgb .WriteRune ('(');case ')':_cgb .WriteRune (')');case '\\':_cgb .WriteRune ('\\');};continue ;}else if _fc [0]=='('{_dae ++;}else if _fc [0]==')'{_dae --;if _dae ==0{_ggb ._dec .ReadByte ();
break ;};};_dgd ,_ :=_ggb ._dec .ReadByte ();_cgb .WriteByte (_dgd );};return _dgf .MakeString (_cgb .String ()),nil ;};func _cdbd (_aea string )(_dgf .PdfObjectReference ,error ){_efd :=_dgf .PdfObjectReference {};_egc :=_geec .FindStringSubmatch (_aea );
if len (_egc )< 3{_b .Log .Debug ("\u0045\u0072\u0072or\u0020\u0070\u0061\u0072\u0073\u0069\u006e\u0067\u0020\u0072\u0065\u0066\u0065\u0072\u0065\u006e\u0063\u0065");return _efd ,_d .New ("\u0075n\u0061\u0062\u006c\u0065 \u0074\u006f\u0020\u0070\u0061r\u0073e\u0020r\u0065\u0066\u0065\u0072\u0065\u006e\u0063e");
};_dgfe ,_dedd :=_c .Atoi (_egc [1]);if _dedd !=nil {_b .Log .Debug ("\u0045\u0072\u0072\u006f\u0072\u0020\u0070a\u0072\u0073\u0069n\u0067\u0020\u006fb\u006a\u0065c\u0074\u0020\u006e\u0075\u006d\u0062e\u0072 '\u0025\u0073\u0027\u0020\u002d\u0020\u0055\u0073\u0069\u006e\u0067\u0020\u006f\u0062\u006a\u0065\u0063\u0074\u0020\u006e\u0075\u006d\u0020\u003d\u0020\u0030",_egc [1]);
return _efd ,nil ;};_efd .ObjectNumber =int64 (_dgfe );_ecfb ,_dedd :=_c .Atoi (_egc [2]);if _dedd !=nil {_b .Log .Debug ("\u0045\u0072r\u006f\u0072\u0020\u0070\u0061r\u0073\u0069\u006e\u0067\u0020g\u0065\u006e\u0065\u0072\u0061\u0074\u0069\u006f\u006e\u0020\u006e\u0075\u006d\u0062\u0065\u0072\u0020\u0027\u0025\u0073\u0027\u0020\u002d\u0020\u0055\u0073\u0069\u006e\u0067\u0020\u0067\u0065\u006e\u0020\u003d\u0020\u0030",_egc [2]);
return _efd ,nil ;};_efd .GenerationNumber =int64 (_ecfb );return _efd ,nil ;};func (_fde *fdfParser )parse ()error {_fde ._acb .Seek (0,_ae .SeekStart );_fde ._dec =_dg .NewReader (_fde ._acb );for {_fde .skipComments ();_cgf ,_gbc :=_fde ._dec .Peek (20);
if _gbc !=nil {_b .Log .Debug ("\u0045\u0052\u0052\u004f\u0052\u003a\u0020\u0046\u0061\u0069\u006c\u0020\u0074\u006f\u0020r\u0065a\u0064\u0020\u0069\u006e\u0064\u0069\u0072\u0065\u0063\u0074\u0020\u006f\u0062\u006a");return _gbc ;};if _g .HasPrefix (string (_cgf ),"\u0074r\u0061\u0069\u006c\u0065\u0072"){_fde ._dec .Discard (7);
_fde .skipSpaces ();_fde .skipComments ();_cagg ,_ :=_fde .parseDict ();_fde ._addg =_cagg ;break ;};_dfe :=_gad .FindStringSubmatchIndex (string (_cgf ));if len (_dfe )< 6{_b .Log .Debug ("\u0045\u0052\u0052\u004f\u0052\u003a\u0020U\u006e\u0061\u0062l\u0065\u0020\u0074\u006f \u0066\u0069\u006e\u0064\u0020\u006f\u0062\u006a\u0065\u0063\u0074\u0020\u0073\u0069\u0067\u006e\u0061\u0074\u0075\u0072\u0065\u0020\u0028\u0025\u0073\u0029",string (_cgf ));
return _d .New ("\u0075\u006e\u0061b\u006c\u0065\u0020\u0074\u006f\u0020\u0064\u0065\u0074\u0065\u0063\u0074\u0020\u0069\u006e\u0064\u0069\u0072\u0065\u0063\u0074\u0020\u006f\u0062\u006a\u0065\u0063\u0074\u0020s\u0069\u0067\u006e\u0061\u0074\u0075\u0072\u0065");
};_ebf ,_gbc :=_fde .parseIndirectObject ();if _gbc !=nil {return _gbc ;};switch _gfa :=_ebf .(type ){case *_dgf .PdfIndirectObject :_fde ._bc [_gfa .ObjectNumber ]=_gfa ;case *_dgf .PdfObjectStream :_fde ._bc [_gfa .ObjectNumber ]=_gfa ;default:return _d .New ("\u0074\u0079\u0070\u0065\u0020\u0065\u0072\u0072\u006f\u0072");
};};return nil ;};type fdfParser struct{_ee int ;_dcf int ;_bc map[int64 ]_dgf .PdfObject ;_acb _ae .ReadSeeker ;_dec *_dg .Reader ;_afe int64 ;_addg *_dgf .PdfObjectDictionary ;};func (_gaa *fdfParser )readTextLine ()(string ,error ){var _aed _e .Buffer ;
for {_fec ,_gg :=_gaa ._dec .Peek (1);if _gg !=nil {_b .Log .Debug ("\u0045\u0072\u0072\u006f\u0072\u0020\u0025\u0073",_gg .Error ());return _aed .String (),_gg ;};if (_fec [0]!='\r')&&(_fec [0]!='\n'){_bgg ,_ :=_gaa ._dec .ReadByte ();_aed .WriteByte (_bgg );
}else {break ;};};return _aed .String (),nil ;};func (_bba *fdfParser )readComment ()(string ,error ){var _fac _e .Buffer ;_ ,_aa :=_bba .skipSpaces ();if _aa !=nil {return _fac .String (),_aa ;};_ef :=true ;for {_gdce ,_cfc :=_bba ._dec .Peek (1);if _cfc !=nil {_b .Log .Debug ("\u0045\u0072\u0072\u006f\u0072\u0020\u0025\u0073",_cfc .Error ());
return _fac .String (),_cfc ;};if _ef &&_gdce [0]!='%'{return _fac .String (),_d .New ("c\u006f\u006d\u006d\u0065\u006e\u0074 \u0073\u0068\u006f\u0075\u006c\u0064\u0020\u0073\u0074a\u0072\u0074\u0020w\u0069t\u0068\u0020\u0025");};_ef =false ;if (_gdce [0]!='\r')&&(_gdce [0]!='\n'){_bca ,_ :=_bba ._dec .ReadByte ();
_fac .WriteByte (_bca );}else {break ;};};return _fac .String (),nil ;};var _add =_ad .MustCompile ("\u005e\u005b\u005c+-\u002e\u005d\u002a\u0028\u005b\u0030\u002d\u0039\u002e]\u002b)\u0065[\u005c+\u002d\u002e\u005d\u002a\u0028\u005b\u0030\u002d\u0039\u002e\u005d\u002b\u0029");


// FieldValues implements interface model.FieldValueProvider.
// Returns a map of field names to values (PdfObjects).
func (fdf *Data )FieldValues ()(map[string ]_dgf .PdfObject ,error ){_bf ,_gd :=fdf .FieldDictionaries ();if _gd !=nil {return nil ,_gd ;};var _cdc []string ;for _gc :=range _bf {_cdc =append (_cdc ,_gc );};_ea .Strings (_cdc );_dgc :=map[string ]_dgf .PdfObject {};
for _ ,_af :=range _cdc {_afa :=_bf [_af ];_ded :=_dgf .TraceToDirectObject (_afa .Get ("\u0056"));_dgc [_af ]=_ded ;};return _dgc ,nil ;};func (_bbg *fdfParser )getFileOffset ()int64 {_bg ,_ :=_bbg ._acb .Seek (0,_ae .SeekCurrent );_bg -=int64 (_bbg ._dec .Buffered ());
return _bg ;};func (_bbc *fdfParser )readAtLeast (_dgfb []byte ,_gea int )(int ,error ){_ed :=_gea ;_ac :=0;_fd :=0;for _ed > 0{_ddd ,_ccf :=_bbc ._dec .Read (_dgfb [_ac :]);if _ccf !=nil {_b .Log .Debug ("\u0045\u0052\u0052O\u0052\u0020\u0046\u0061i\u006c\u0065\u0064\u0020\u0072\u0065\u0061d\u0069\u006e\u0067\u0020\u0028\u0025\u0064\u003b\u0025\u0064\u0029\u0020\u0025\u0073",_ddd ,_fd ,_ccf .Error ());
return _ac ,_d .New ("\u0066\u0061\u0069\u006c\u0065\u0064\u0020\u0072\u0065a\u0064\u0069\u006e\u0067");};_fd ++;_ac +=_ddd ;_ed -=_ddd ;};return _ac ,nil ;};func (_cfg *fdfParser )parseName ()(_dgf .PdfObjectName ,error ){var _eg _e .Buffer ;_bce :=false ;
for {_bgf ,_aac :=_cfg ._dec .Peek (1);if _aac ==_ae .EOF {break ;};if _aac !=nil {return _dgf .PdfObjectName (_eg .String ()),_aac ;};if !_bce {if _bgf [0]=='/'{_bce =true ;_cfg ._dec .ReadByte ();}else if _bgf [0]=='%'{_cfg .readComment ();_cfg .skipSpaces ();
}else {_b .Log .Debug ("\u0045\u0052\u0052\u004f\u0052\u0020N\u0061\u006d\u0065\u0020\u0073\u0074\u0061\u0072\u0074\u0069\u006e\u0067\u0020w\u0069\u0074\u0068\u0020\u0025\u0073\u0020(\u0025\u0020\u0078\u0029",_bgf ,_bgf );return _dgf .PdfObjectName (_eg .String ()),_f .Errorf ("\u0069n\u0076a\u006c\u0069\u0064\u0020\u006ea\u006d\u0065:\u0020\u0028\u0025\u0063\u0029",_bgf [0]);
};}else {if _dgf .IsWhiteSpace (_bgf [0]){break ;}else if (_bgf [0]=='/')||(_bgf [0]=='[')||(_bgf [0]=='(')||(_bgf [0]==']')||(_bgf [0]=='<')||(_bgf [0]=='>'){break ;}else if _bgf [0]=='#'{_daf ,_eb :=_cfg ._dec .Peek (3);if _eb !=nil {return _dgf .PdfObjectName (_eg .String ()),_eb ;
};_cfg ._dec .Discard (3);_gab ,_eb :=_de .DecodeString (string (_daf [1:3]));if _eb !=nil {return _dgf .PdfObjectName (_eg .String ()),_eb ;};_eg .Write (_gab );}else {_dddc ,_ :=_cfg ._dec .ReadByte ();_eg .WriteByte (_dddc );};};};return _dgf .PdfObjectName (_eg .String ()),nil ;
};

// Load loads FDF form data from `r`.
func Load (r _ae .ReadSeeker )(*Data ,error ){_ge ,_gee :=_cfcd (r );if _gee !=nil {return nil ,_gee ;};_cd ,_gee :=_ge .Root ();if _gee !=nil {return nil ,_gee ;};_dc ,_ec :=_dgf .GetArray (_cd .Get ("\u0046\u0069\u0065\u006c\u0064\u0073"));if !_ec {return nil ,_d .New ("\u0066\u0069\u0065\u006c\u0064\u0073\u0020\u006d\u0069s\u0073\u0069\u006e\u0067");
};return &Data {_ag :_dc ,_da :_cd },nil ;};func (_gbb *fdfParser )parseHexString ()(*_dgf .PdfObjectString ,error ){_gbb ._dec .ReadByte ();var _df _e .Buffer ;for {_eaca ,_dce :=_gbb ._dec .Peek (1);if _dce !=nil {return _dgf .MakeHexString (""),_dce ;
};if _eaca [0]=='>'{_gbb ._dec .ReadByte ();break ;};_eff ,_ :=_gbb ._dec .ReadByte ();if !_dgf .IsWhiteSpace (_eff ){_df .WriteByte (_eff );};};if _df .Len ()%2==1{_df .WriteRune ('0');};_edg ,_gba :=_de .DecodeString (_df .String ());if _gba !=nil {_b .Log .Debug ("\u0045\u0052\u0052\u004f\u0052\u0020\u0050\u0061\u0072\u0073\u0069\u006e\u0067\u0020\u0068\u0065\u0078\u0020\u0073\u0074r\u0069\u006e\u0067\u003a\u0020\u0027\u0025\u0073\u0027 \u002d\u0020\u0072\u0065\u0074\u0075\u0072\u006e\u0069\u006e\u0067\u0020\u0061n\u0020\u0065\u006d\u0070\u0074\u0079 \u0073\u0074\u0072i\u006e\u0067",_df .String ());
return _dgf .MakeHexString (""),nil ;};return _dgf .MakeHexString (string (_edg )),nil ;};var _cdd =_ad .MustCompile ("\u0025F\u0044F\u002d\u0028\u005c\u0064\u0029\u005c\u002e\u0028\u005c\u0064\u0029");

// Data represents forms data format (FDF) file data.
type Data struct{_da *_dgf .PdfObjectDictionary ;_ag *_dgf .PdfObjectArray ;};func (_fgg *fdfParser )seekFdfVersionTopDown ()(int ,int ,error ){_fgg ._acb .Seek (0,_ae .SeekStart );_fgg ._dec =_dg .NewReader (_fgg ._acb );_egaa :=20;_eeg :=make ([]byte ,_egaa );
for {_fgb ,_aae :=_fgg ._dec .ReadByte ();if _aae !=nil {if _aae ==_ae .EOF {break ;}else {return 0,0,_aae ;};};if _dgf .IsDecimalDigit (_fgb )&&_eeg [_egaa -1]=='.'&&_dgf .IsDecimalDigit (_eeg [_egaa -2])&&_eeg [_egaa -3]=='-'&&_eeg [_egaa -4]=='F'&&_eeg [_egaa -5]=='D'&&_eeg [_egaa -6]=='P'{_fffb :=int (_eeg [_egaa -2]-'0');
_bdd :=int (_fgb -'0');return _fffb ,_bdd ,nil ;};_eeg =append (_eeg [1:_egaa ],_fgb );};return 0,0,_d .New ("\u0076\u0065\u0072\u0073\u0069\u006f\u006e\u0020\u006e\u006f\u0074\u0020f\u006f\u0075\u006e\u0064");};var _geec =_ad .MustCompile ("^\u005c\u0073\u002a\u0028\\d\u002b)\u005c\u0073\u002b\u0028\u005cd\u002b\u0029\u005c\u0073\u002b\u0052");
